<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨Ø§ ÙØ±Ù…ÙˆÙ„ To-Do List">
  <meta name="theme-color" content="#10B981">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoi2YHYsdmF2YjZhCBUby1EbyIsInNob3J0X25hbWUiOiJUb0RvIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNGOEZBRkMiLCJ0aGVtZV9jb2xvciI6IiMxMEI5ODEifQ==">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœ…</text></svg>">
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
  <title>ÙØ±Ù…ÙˆÙ„ To-Do</title>
  <style>
    :root {
      --primary: #10B981;
      --primary-light: #D1FAE5;
      --primary-dark: #059669;
      --secondary: #6366F1;
      --secondary-light: #E0E7FF;
      --warning: #F59E0B;
      --warning-light: #FEF3C7;
      --danger: #EF4444;
      --danger-light: #FEE2E2;
      --orange: #F97316;
      --orange-light: #FFEDD5;
      --bg: #F8FAFC;
      --bg2: #FFFFFF;
      --bg3: #F1F5F9;
      --text: #1E293B;
      --text2: #64748B;
      --text3: #94A3B8;
      --border: #E2E8F0;
      --shadow: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
      --radius: 12px;
      --radius-lg: 16px;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }
    
    [data-theme="dark"] {
      --bg: #0F172A;
      --bg2: #1E293B;
      --bg3: #334155;
      --text: #F1F5F9;
      --text2: #94A3B8;
      --text3: #64748B;
      --border: #334155;
      --primary-light: #064E3B;
      --secondary-light: #312E81;
      --warning-light: #78350F;
      --danger-light: #7F1D1D;
      --orange-light: #7C2D12;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; }
    
    body {
      font-family: 'Vazirmatn', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      font-size: 14px;
      line-height: 1.6;
      -webkit-tap-highlight-color: transparent;
    }
    
    .app {
      height: 100%;
      max-width: 500px;
      margin: 0 auto;
      background: var(--bg);
      display: flex;
      flex-direction: column;
    }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 10px 14px;
      padding-top: calc(10px + var(--safe-top));
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
    }
    
    .header-title { font-size: 1rem; font-weight: 700; }
    .header-btns { display: flex; gap: 6px; }
    
    .header-btn {
      width: 36px; height: 36px;
      border-radius: 10px;
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Main */
    .main {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
      padding-bottom: calc(75px + var(--safe-bottom));
      -webkit-overflow-scrolling: touch;
    }
    
    /* Page Center */
    .page-center {
      min-height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 16px 0;
    }
    
    .page-content { width: 100%; max-width: 380px; }
    
    /* Cards */
    .card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 10px;
      box-shadow: var(--shadow);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }
    
    .card-icon {
      width: 38px; height: 38px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    
    .card-icon.green { background: var(--primary-light); }
    .card-icon.blue { background: var(--secondary-light); }
    .card-icon.yellow { background: var(--warning-light); }
    .card-icon.red { background: var(--danger-light); }
    .card-icon.orange { background: var(--orange-light); }
    .card-icon.gray { background: var(--bg3); }
    
    .card-title { font-size: 0.95rem; font-weight: 700; }
    .card-subtitle { font-size: 0.75rem; color: var(--text2); margin-top: 2px; }
    
    /* Buttons */
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 12px 16px;
      border-radius: 10px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      font-family: inherit;
      width: 100%;
      transition: transform 0.1s, opacity 0.2s;
    }
    
    .btn:active { transform: scale(0.98); }
    .btn-primary { background: var(--primary); color: white; }
    .btn-secondary { background: var(--secondary); color: white; }
    .btn-warning { background: var(--warning); color: white; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-light { background: var(--primary-light); color: var(--primary-dark); }
    .btn-outline { background: transparent; color: var(--text2); border: 1px solid var(--border); }
    .btn-sm { padding: 8px 12px; font-size: 0.8rem; }
    .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    
    /* Inputs */
    .input, .textarea, .select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid var(--border);
      border-radius: 10px;
      font-size: 0.9rem;
      font-family: inherit;
      background: var(--bg2);
      color: var(--text);
      transition: border-color 0.2s;
    }
    
    .input:focus, .textarea:focus, .select:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .textarea { resize: vertical; min-height: 80px; }
    .form-group { margin-bottom: 12px; }
    .form-label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 6px; }
    .form-hint { font-size: 0.75rem; color: var(--text3); margin-top: 4px; }
    
    /* Chips */
    .chips { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; }
    
    .chip {
      padding: 8px 14px;
      background: var(--bg3);
      border: 2px solid transparent;
      border-radius: 50px;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .chip.selected { background: var(--primary); color: white; }
    
    /* Priority chips */
    .priority-chips { display: flex; gap: 6px; }
    .priority-chip {
      flex: 1;
      padding: 8px;
      text-align: center;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 600;
      border: 2px solid var(--border);
      background: var(--bg2);
      transition: all 0.2s;
    }
    .priority-chip.low { border-color: var(--primary); color: var(--primary); }
    .priority-chip.medium { border-color: var(--warning); color: var(--warning); }
    .priority-chip.high { border-color: var(--danger); color: var(--danger); }
    .priority-chip.selected.low { background: var(--primary-light); }
    .priority-chip.selected.medium { background: var(--warning-light); }
    .priority-chip.selected.high { background: var(--danger-light); }
    
    /* Tags */
    .tag {
      display: inline-flex;
      padding: 3px 8px;
      background: var(--primary-light);
      color: var(--primary-dark);
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .tag.yellow { background: var(--warning-light); color: #92400E; }
    .tag.red { background: var(--danger-light); color: #991B1B; }
    .tag.blue { background: var(--secondary-light); color: #4338CA; }
    .tag.orange { background: var(--orange-light); color: #9A3412; }
    
    [data-theme="dark"] .tag { color: var(--primary); }
    [data-theme="dark"] .tag.yellow { color: var(--warning); }
    [data-theme="dark"] .tag.red { color: var(--danger); }
    [data-theme="dark"] .tag.blue { color: var(--secondary); }
    [data-theme="dark"] .tag.orange { color: var(--orange); }
    
    /* Progress */
    .progress { height: 8px; background: var(--bg3); border-radius: 8px; overflow: hidden; }
    .progress-bar { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-dark)); border-radius: 8px; transition: width 0.4s; }
    
    /* Stats */
    .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 12px; }
    
    .stat {
      background: var(--bg2);
      border: 1px solid var(--border);
      padding: 10px 6px;
      border-radius: 10px;
      text-align: center;
    }
    
    .stat-num { font-size: 1.1rem; font-weight: 700; color: var(--primary); }
    .stat-label { font-size: 0.65rem; color: var(--text2); margin-top: 2px; }
    
    /* Task */
    .task {
      display: flex;
      gap: 10px;
      padding: 12px;
      background: var(--bg3);
      border-radius: 10px;
      margin-bottom: 8px;
      border-right: 4px solid transparent;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .task:hover { background: var(--border); }
    .task.importance-high { border-color: var(--danger); }
    .task.importance-medium { border-color: var(--warning); }
    .task.importance-low { border-color: var(--primary); }
    .task.done { opacity: 0.5; }
    .task.done .task-title { text-decoration: line-through; }
    .task.blocked { background: var(--orange-light); }
    
    .task-check {
      width: 24px; height: 24px;
      border: 2px solid var(--border);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 0.8rem;
      color: transparent;
      flex-shrink: 0;
      transition: all 0.2s;
    }
    
    .task-check.checked { background: var(--primary); border-color: var(--primary); color: white; }
    .task-content { flex: 1; min-width: 0; }
    .task-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 4px; }
    .task-meta { display: flex; flex-wrap: wrap; gap: 4px; }
    .task-actions { display: flex; gap: 4px; flex-shrink: 0; }
    
    .task-btn {
      width: 28px; height: 28px;
      border-radius: 6px;
      border: none;
      background: var(--bg2);
      color: var(--text2);
      font-size: 0.9rem;
      cursor: pointer;
    }
    
    /* List tabs */
    .list-tabs { display: flex; gap: 6px; margin-bottom: 12px; overflow-x: auto; }
    
    .list-tab {
      padding: 8px 14px;
      background: var(--bg3);
      border: none;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      color: var(--text2);
      font-family: inherit;
    }
    
    .list-tab.active { background: var(--primary); color: white; }
    
    .list-tab .badge {
      background: rgba(0,0,0,0.15);
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 0.7rem;
      margin-inline-start: 4px;
    }
    
    /* Capacity */
    .capacity {
      background: var(--bg3);
      border-radius: 10px;
      padding: 10px 12px;
      margin-bottom: 12px;
    }
    
    .capacity-header { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 6px; }
    .capacity-value { font-weight: 700; }
    .capacity-value.warning { color: var(--warning); }
    .capacity-value.danger { color: var(--danger); }
    
    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: flex-end;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }
    
    .modal.show { opacity: 1; visibility: visible; }
    
    .modal-box {
      background: var(--bg2);
      border-radius: 20px 20px 0 0;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 16px;
      transform: translateY(100%);
      transition: transform 0.3s;
    }
    
    .modal.show .modal-box { transform: translateY(0); }
    
    .modal-handle { width: 36px; height: 4px; background: var(--border); border-radius: 2px; margin: 0 auto 12px; }
    .modal-title { font-size: 1.1rem; font-weight: 700; text-align: center; margin-bottom: 16px; }
    
    /* Nav - Professional */
    .nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-top: 1px solid var(--border);
      display: grid;
      grid-template-columns: 1fr 1fr auto 1fr 1fr;
      align-items: end;
      padding: 0 10px;
      padding-bottom: calc(8px + var(--safe-bottom));
      height: calc(65px + var(--safe-bottom));
      box-shadow: 0 -4px 20px rgba(0,0,0,0.06);
      z-index: 100;
    }

    [data-theme="dark"] .nav {
      background: rgba(30, 41, 59, 0.95);
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 6px 0;
      border-radius: 12px;
      cursor: pointer;
      color: var(--text3);
      transition: all 0.2s;
      height: 100%;
    }
    
    .nav-item.active { color: var(--primary); }
    .nav-item.active .nav-icon { transform: translateY(-2px); }
    
    .nav-icon { font-size: 1.4rem; margin-bottom: 3px; transition: transform 0.2s; }
    .nav-label { font-size: 0.65rem; font-weight: 600; }

    /* Floating Action Button (FAB) */
    .nav-fab-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      height: 100%;
      pointer-events: none; /* Let clicks pass to button */
    }

    .nav-fab {
      pointer-events: auto;
      width: 56px; height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      border: 4px solid var(--bg);
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
      transform: translateY(-25px);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .nav-fab:active { transform: translateY(-22px) scale(0.95); }
    
    [data-theme="dark"] .nav-fab { border-color: var(--bg); }
    
    /* Page */
    .page { display: none; }
    .page.active { display: block; animation: fadeIn 0.3s ease; }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 90px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--text);
      color: var(--bg);
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 600;
      z-index: 9999;
      box-shadow: var(--shadow-lg);
    }
    
    /* Accordion */
    .accordion {
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-bottom: 8px;
      overflow: hidden;
      background: var(--bg2);
    }
    
    .accordion-header {
      padding: 12px 14px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .accordion-icon { font-size: 0.75rem; transition: transform 0.2s; }
    .accordion.open .accordion-icon { transform: rotate(180deg); }
    .accordion-body { padding: 0 14px 14px; display: none; font-size: 0.85rem; line-height: 1.7; color: var(--text2); }
    .accordion.open .accordion-body { display: block; }
    
    /* Welcome banner */
    .welcome-banner {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 12px;
      box-shadow: var(--shadow);
    }
    
    .welcome-banner h2 { font-size: 1rem; font-weight: 700; margin-bottom: 2px; }
    .welcome-banner p { font-size: 0.8rem; opacity: 0.9; }
    
    /* Review card */
    .review-card {
      background: var(--secondary-light);
      border-radius: var(--radius);
      padding: 12px;
      margin-bottom: 10px;
    }
    
    .review-card h4 { font-size: 0.85rem; margin-bottom: 6px; color: var(--secondary); }
    .review-card p { font-size: 0.8rem; color: var(--text2); }
    
    /* Dots */
    .dots { display: flex; justify-content: center; gap: 8px; margin-bottom: 16px; }
    .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--border); }
    .dot.active { background: var(--primary); width: 24px; border-radius: 4px; }
    .dot.done { background: var(--primary); opacity: 0.4; }
    
    /* Empty */
    .empty { text-align: center; padding: 24px 16px; color: var(--text3); }
    .empty-icon { font-size: 2.5rem; margin-bottom: 8px; opacity: 0.5; }
    .empty-text { font-size: 0.9rem; }
    
    /* Tiny task */
    .tiny-task {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: var(--bg3);
      border-radius: 8px;
      margin-bottom: 6px;
    }
    
    .tiny-task-text { flex: 1; font-size: 0.85rem; }
    
    /* Prompt box */
    .prompt-box {
      background: var(--bg3);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 12px;
      font-family: monospace;
      font-size: 0.75rem;
      line-height: 1.5;
      max-height: 250px;
      overflow-y: auto;
      white-space: pre-wrap;
      direction: ltr;
      text-align: left;
    }
    
    /* Utils */
    .hidden { display: none !important; }
    .mb-2 { margin-bottom: 8px; }
    .mb-3 { margin-bottom: 12px; }
    .mt-2 { margin-top: 8px; }
    .mt-3 { margin-top: 12px; }
    .text-center { text-align: center; }
    .text-muted { color: var(--text2); }
    .text-sm { font-size: 0.8rem; }
    .flex { display: flex; }
    .flex-1 { flex: 1; }
    .gap-2 { gap: 8px; }
    .items-center { align-items: center; }
    
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
  </style>
</head>
<body>
  <div class="app">
    <header class="header hidden" id="header">
      <h1 class="header-title">âœ… ÙØ±Ù…ÙˆÙ„ To-Do</h1>
      <div class="header-btns">
        <button class="header-btn" onclick="goToPage('brain')" title="ØªØ®Ù„ÛŒÙ‡ Ø°Ù‡Ù†">ğŸ§ </button>
        <button class="header-btn" onclick="goToPage('ai')" title="ØªØ­Ù„ÛŒÙ„ AI">ğŸ¤–</button>
        <button class="header-btn" onclick="goToPage('settings')" title="ØªÙ†Ø¸ÛŒÙ…Ø§Øª">âš™ï¸</button>
      </div>
    </header>
    
    <main class="main" id="main">
      
      <!-- Modals -->
      <div class="modal" id="backupModal">
        <div class="modal-box">
          <div class="modal-handle"></div>
          <h2 class="modal-title">ğŸ’¾ Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ</h2>
          <p class="text-center text-muted mb-3">ÙØ§ÛŒÙ„ Ø¯Ø± Ù¾ÙˆØ´Ù‡ Downloads Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
          <button onclick="downloadBackup()" class="btn btn-primary mb-2">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ø¨Ú©Ø§Ù¾</button>
          <button onclick="copyBackup()" class="btn btn-warning mb-2">ğŸ“‹ Ú©Ù¾ÛŒ Ù…ØªÙ† Ø¨Ú©Ø§Ù¾</button>
          <label class="btn btn-light mb-2" style="cursor:pointer">
            ğŸ“¤ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² ÙØ§ÛŒÙ„
            <input type="file" accept=".json,.txt" style="display:none" onchange="handleImport(this)">
          </label>
          <button onclick="hideBackupModal()" class="btn btn-outline">Ø¨Ø³ØªÙ†</button>
        </div>
      </div>
      
      <!-- Task Modal -->
      <div class="modal" id="taskModal">
        <div class="modal-box">
          <div class="modal-handle"></div>
          <h2 class="modal-title" id="taskModalTitle">â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯</h2>
          <input type="hidden" id="editTaskId">
          
          <div class="form-group">
            <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ú©Ø§Ø± (Ø¨Ø§ ÙØ¹Ù„ Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯)</label>
            <input type="text" id="taskTitle" class="input" placeholder="Ù…Ø«Ø§Ù„: ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±Ù… Ø¨Ø§...">
            <p class="form-hint">ğŸ’¡ Ø¨Ø§ ÙØ¹Ù„ Ø´Ø±ÙˆØ¹ Ú©Ù†: Ø¨Ù†ÙˆÛŒØ³ØŒ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ØŒ Ù…Ø±ÙˆØ± Ú©Ù†...</p>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ù†ØªÛŒØ¬Ù‡ Ù…Ø·Ù„ÙˆØ¨ (Ú†Ø±Ø§ Ø§ÛŒÙ† Ú©Ø§Ø± Ù…Ù‡Ù… Ø§Ø³ØªØŸ)</label>
            <input type="text" id="taskOutcome" class="input" placeholder="ØªØ§ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ù„Ùˆ Ø¨Ø±ÙˆØ¯">
          </div>
          
          <div class="form-group">
            <label class="form-label">ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ùˆ Ø¬Ø²Ø¦ÛŒØ§Øª</label>
            <textarea id="taskNotes" class="textarea" rows="2" placeholder="Ù‡Ø± ØªÙˆØ¶ÛŒØ­ Ø§Ø¶Ø§ÙÙ‡â€ŒØ§ÛŒ..."></textarea>
          </div>
          
          <div class="btn-row mb-3">
            <div class="form-group" style="margin:0">
              <label class="form-label">Ø²Ù…Ø§Ù† (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
              <input type="number" id="taskTime" class="input" value="30" min="5">
            </div>
            <div class="form-group" style="margin:0">
              <label class="form-label">Ø¯Ø¯Ù„Ø§ÛŒÙ†</label>
              <input type="date" id="taskDeadline" class="input">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ø§Ù‡Ù…ÛŒØª</label>
            <div class="priority-chips" id="importanceChips">
              <div class="priority-chip low" data-v="low" onclick="selectImportance('low')">ğŸŸ¢ Ú©Ù…</div>
              <div class="priority-chip medium selected" data-v="medium" onclick="selectImportance('medium')">ğŸŸ¡ Ù…ØªÙˆØ³Ø·</div>
              <div class="priority-chip high" data-v="high" onclick="selectImportance('high')">ğŸ”´ Ø²ÛŒØ§Ø¯</div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">ÙÙˆØ±ÛŒØª</label>
            <div class="priority-chips" id="urgencyChips">
              <div class="priority-chip low" data-v="low" onclick="selectUrgency('low')">ğŸ¢ Ø¢Ø±Ø§Ù…</div>
              <div class="priority-chip medium selected" data-v="medium" onclick="selectUrgency('medium')">ğŸš¶ Ø¹Ø§Ø¯ÛŒ</div>
              <div class="priority-chip high" data-v="high" onclick="selectUrgency('high')">ğŸƒ ÙÙˆØ±ÛŒ</div>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ù†Ù‚Ø´ Ù…Ø±ØªØ¨Ø·</label>
            <select id="taskRole" class="select"></select>
          </div>

          <div class="form-group">
            <label class="form-label">Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ù¾Ø±ÙˆÚ˜Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
            <select id="taskProject" class="select">
              <option value="">-- Ø¨Ø¯ÙˆÙ† Ù¾Ø±ÙˆÚ˜Ù‡ --</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯ÛŒÚ¯Ø±Ø§Ù†ØŸ</label>
            <div class="flex gap-2 items-center">
              <input type="checkbox" id="taskBlocked" style="width:20px;height:20px">
              <label for="taskBlocked" style="font-size:0.85rem">â³ Ù…Ù†ØªØ¸Ø± Ù¾Ø§Ø³Ø® Ø¯ÛŒÚ¯Ø±Ø§Ù†</label>
            </div>
            <div id="blockedDeadlineWrap" class="mt-2 hidden">
              <label class="form-label">Ø¯Ø¯Ù„Ø§ÛŒÙ† Ù¾ÛŒÚ¯ÛŒØ±ÛŒ</label>
              <input type="date" id="blockedDeadline" class="input">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ù„ÛŒØ³Øª Ù…Ù‚ØµØ¯</label>
            <select id="taskList" class="select">
              <option value="today">ğŸ“… Ø§Ù…Ø±ÙˆØ²</option>
              <option value="quick">âš¡ Ø³Ø±ÛŒØ¹ (Ø²ÛŒØ± Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡)</option>
              <option value="master">ğŸ“‹ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§</option>
            </select>
          </div>
          
          <div class="btn-row">
            <button onclick="hideTaskModal()" class="btn btn-outline">Ø§Ù†ØµØ±Ø§Ù</button>
            <button onclick="saveTask()" class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
          </div>
        </div>
      </div>
      
      <!-- START PAGE -->
      <div id="page-start" class="page active">
        <div class="page-center">
          <div class="page-content text-center">
            <div style="font-size: 3.5rem; margin-bottom: 12px;">âœ…</div>
            <h1 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 8px;">ÙØ±Ù…ÙˆÙ„ To-Do List</h1>
            <p class="text-muted mb-3">Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø¹Ù„Ù…ÛŒØŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ±Ø³</p>
            
            <div class="card" style="text-align: right;">
              <h3 style="font-size: 0.95rem; margin-bottom: 12px; font-weight: 700;">Ú†Ø±Ø§ Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ØªÙØ§ÙˆØª Ø§Ø³ØªØŸ</h3>
              <div style="display: flex; flex-direction: column; gap: 10px; font-size: 0.85rem;">
                <div class="flex items-center gap-2">
                  <span style="font-size: 1.2rem;">ğŸ“š</span>
                  <span>Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©ØªØ§Ø¨ To-Do List Formula</span>
                </div>
                <div class="flex items-center gap-2">
                  <span style="font-size: 1.2rem;">7ï¸âƒ£</span>
                  <span>Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø± Ø¯Ø± Ø±ÙˆØ²</span>
                </div>
                <div class="flex items-center gap-2">
                  <span style="font-size: 1.2rem;">âš¡</span>
                  <span>Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</span>
                </div>
                <div class="flex items-center gap-2">
                  <span style="font-size: 1.2rem;">ğŸ§ </span>
                  <span>Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ Ø±ÙØªØ§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ</span>
                </div>
              </div>
            </div>
            
            <button onclick="startSetup()" class="btn btn-primary mt-3">Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†Ù… â†</button>
            <p class="text-sm text-muted mt-2">ÙÙ‚Ø· Û² Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆÙ‚Øª Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯</p>
          </div>
        </div>
      </div>
      
      <!-- ONBOARDING -->
      <div id="page-setup" class="page">
        <div class="page-center">
          <div class="page-content">
            <div class="dots" id="dots"></div>
            
            <div id="step-1" class="setup-step">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon green">ğŸ‘‹</div>
                  <div>
                    <h2 class="card-title">Ø³Ù„Ø§Ù…! Ø§Ø³Ù… Ú©ÙˆÚ†Ú©Øª Ú†ÛŒÙ‡ØŸ</h2>
                    <p class="card-subtitle">Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØªØ± Ø´Ø¯Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡</p>
                  </div>
                </div>
                <input type="text" id="inputName" class="input mb-3" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù„ÛŒØŒ Ù…Ø±ÛŒÙ…...">
                <button onclick="nextStep(2)" class="btn btn-primary">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
              </div>
            </div>
            
            <div id="step-2" class="setup-step hidden">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon blue">ğŸ’</div>
                  <div>
                    <h2 class="card-title">Ú†Ù‡ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§Øª Ù…Ù‡Ù…Ù‡ØŸ</h2>
                    <p class="card-subtitle">Û² ØªØ§ Û´ Ø§Ø±Ø²Ø´ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</p>
                  </div>
                </div>
                <div id="valuesChips" class="chips mb-3">
                  <span class="chip" data-v="ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ">ğŸ“š ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</span>
                  <span class="chip" data-v="Ø³Ù„Ø§Ù…ØªÛŒ">ğŸ’ª Ø³Ù„Ø§Ù…ØªÛŒ</span>
                  <span class="chip" data-v="Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡</span>
                  <span class="chip" data-v="Ø¢Ø±Ø§Ù…Ø´">ğŸ§˜ Ø¢Ø±Ø§Ù…Ø´</span>
                  <span class="chip" data-v="Ø®Ù„Ø§Ù‚ÛŒØª">ğŸ¨ Ø®Ù„Ø§Ù‚ÛŒØª</span>
                  <span class="chip" data-v="Ù¾ÛŒØ´Ø±ÙØª">ğŸ“ˆ Ù¾ÛŒØ´Ø±ÙØª</span>
                </div>
                <div class="flex gap-2 mb-3">
                  <input type="text" id="customValue" class="input flex-1" placeholder="Ø§Ø±Ø²Ø´ Ø¯ÛŒÚ¯Ù‡...">
                  <button onclick="addCustomValue()" class="btn btn-light" style="width:auto;padding:10px 14px">+</button>
                </div>
                <div class="btn-row">
                  <button onclick="prevStep(1)" class="btn btn-outline">â†’ Ù‚Ø¨Ù„ÛŒ</button>
                  <button onclick="nextStep(3)" class="btn btn-primary">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
                </div>
              </div>
            </div>
            
            <div id="step-3" class="setup-step hidden">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon yellow">ğŸ­</div>
                  <div>
                    <h2 class="card-title">Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ú¯ÛŒØª Ú†ÛŒÙ‡ØŸ</h2>
                    <p class="card-subtitle">Ú©Ø§Ø±Ù‡Ø§ Ø±Ùˆ Ø¨Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§ ÙˆØµÙ„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…</p>
                  </div>
                </div>
                <div id="rolesChips" class="chips mb-3">
                  <span class="chip" data-v="Ø¯Ø§Ù†Ø´Ø¬Ùˆ">ğŸ“ Ø¯Ø§Ù†Ø´Ø¬Ùˆ</span>
                  <span class="chip" data-v="Ø´Ø§ØºÙ„">ğŸ’¼ Ø´Ø§ØºÙ„</span>
                  <span class="chip" data-v="ÙˆØ§Ù„Ø¯">ğŸ‘¨â€ğŸ‘§ ÙˆØ§Ù„Ø¯</span>
                  <span class="chip" data-v="ÙˆØ±Ø²Ø´Ú©Ø§Ø±">ğŸƒ ÙˆØ±Ø²Ø´Ú©Ø§Ø±</span>
                  <span class="chip" data-v="Ù‡Ù†Ø±Ù…Ù†Ø¯">ğŸ¨ Ù‡Ù†Ø±Ù…Ù†Ø¯</span>
                </div>
                <div class="flex gap-2 mb-3">
                  <input type="text" id="customRole" class="input flex-1" placeholder="Ù†Ù‚Ø´ Ø¯ÛŒÚ¯Ù‡...">
                  <button onclick="addCustomRole()" class="btn btn-light" style="width:auto;padding:10px 14px">+</button>
                </div>
                <div class="btn-row">
                  <button onclick="prevStep(2)" class="btn btn-outline">â†’ Ù‚Ø¨Ù„ÛŒ</button>
                  <button onclick="nextStep(4)" class="btn btn-primary">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
                </div>
              </div>
            </div>
            
            <div id="step-4" class="setup-step hidden">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon green">â°</div>
                  <div>
                    <h2 class="card-title">Ú©ÛŒ Ø¨ÛŒØ´ØªØ± Ø§Ù†Ø±Ú˜ÛŒ Ø¯Ø§Ø±ÛŒØŸ</h2>
                    <p class="card-subtitle">Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø®Øª Ø±Ùˆ Ø§ÙˆÙ† Ù…ÙˆÙ‚Ø¹ Ø¨Ø°Ø§Ø±</p>
                  </div>
                </div>
                <div class="chips mb-3" id="energyChips">
                  <span class="chip" data-v="morning">ğŸŒ… ØµØ¨Ø­</span>
                  <span class="chip selected" data-v="afternoon">â˜€ï¸ Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø±</span>
                  <span class="chip" data-v="evening">ğŸŒ™ Ø´Ø¨</span>
                </div>
                <div class="btn-row">
                  <button onclick="prevStep(3)" class="btn btn-outline">â†’ Ù‚Ø¨Ù„ÛŒ</button>
                  <button onclick="nextStep(5)" class="btn btn-primary">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
                </div>
              </div>
            </div>
            
            <div id="step-5" class="setup-step hidden">
              <div class="card">
                <div class="card-header">
                  <div class="card-icon blue">ğŸŒ±</div>
                  <div>
                    <h2 class="card-title">Ø¬Ù…Ù„Ù‡ Ù‡ÙˆÛŒØªÛŒ ØªÙˆ</h2>
                    <p class="card-subtitle">Ø§ÛŒÙ† ÛŒØ§Ø¯Ø¢ÙˆØ± Ù…Ø³ÛŒØ±ØªÙ‡</p>
                  </div>
                </div>
                <div style="background: var(--primary-light); padding: 12px; border-radius: 10px; margin-bottom: 12px;">
                  <p id="identityPreview" style="font-size: 0.9rem; line-height: 1.7;"></p>
                </div>
                <textarea id="inputIdentity" class="textarea mb-3" rows="2" placeholder="Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´Ø´ Ú©Ù†ÛŒ..."></textarea>
                <div class="btn-row">
                  <button onclick="prevStep(4)" class="btn btn-outline">â†’ Ù‚Ø¨Ù„ÛŒ</button>
                  <button onclick="finishSetup()" class="btn btn-primary">Ø´Ø±ÙˆØ¹! ğŸ‰</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- TODAY PAGE -->
      <div id="page-today" class="page">
        <div class="welcome-banner">
          <h2>Ø³Ù„Ø§Ù… <span id="userName">Ø¯ÙˆØ³Øª</span> ğŸ‘‹</h2>
          <p id="todayDate"></p>
        </div>
        
        <!-- Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø±ÛŒØ¹ Ø¯Ø± Ø¨Ø§Ù„Ø§ -->
        <button onclick="showTaskModal()" class="btn btn-primary mb-3">+ Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯</button>
        
        <div class="stats">
          <div class="stat">
            <div class="stat-num" id="statToday">Û°/Û·</div>
            <div class="stat-label">Ø§Ù…Ø±ÙˆØ²</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="statDone">Û°</div>
            <div class="stat-label">Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="statQuick">Û°</div>
            <div class="stat-label">Ø³Ø±ÛŒØ¹</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="statStreak">Û°ğŸ”¥</div>
            <div class="stat-label">Ø§Ø³ØªØ±ÛŒÚ©</div>
          </div>
        </div>
        
        <div class="capacity">
          <div class="capacity-header">
            <span>Ø¨Ø§Ø± Ú©Ø§Ø±ÛŒ Ø§Ù…Ø±ÙˆØ²</span>
            <span class="capacity-value" id="capacityValue">Û° Ø§Ø² Û¸ Ø³Ø§Ø¹Øª</span>
          </div>
          <div class="progress">
            <div class="progress-bar" id="capacityProgress" style="width: 0%"></div>
          </div>
        </div>
        
        <div class="list-tabs">
          <button class="list-tab active" data-list="today" onclick="switchList('today')">
            ğŸ“… Ø§Ù…Ø±ÙˆØ² <span class="badge" id="todayCount">Û°</span>
          </button>
          <button class="list-tab" data-list="quick" onclick="switchList('quick')">
            âš¡ Ø³Ø±ÛŒØ¹ <span class="badge" id="quickCount">Û°</span>
          </button>
        </div>
        
        <div id="todayList" class="task-list"></div>
        <div id="quickList" class="task-list hidden"></div>
        
        <!-- Daily Review -->
        <div class="card mt-3">
          <div class="card-header">
            <div class="card-icon blue">ğŸ“</div>
            <div>
              <h2 class="card-title">Ù…Ø±ÙˆØ± Ø¢Ø®Ø± Ø±ÙˆØ²</h2>
              <p class="card-subtitle">Û³ Ø³ÙˆØ§Ù„ Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</p>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ú†ÛŒ Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ø±ÙØªØŸ âœ…</label>
            <textarea id="reviewGood" class="textarea" rows="2" placeholder="Ø­ØªÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Ú†ÛŒ Ù…ÛŒâ€ŒØªÙˆÙ†Ø³Øª Ø¨Ù‡ØªØ± Ø¨Ø§Ø´Ù‡ØŸ ğŸ¤”</label>
            <textarea id="reviewBetter" class="textarea" rows="2" placeholder="Ø¨Ø¯ÙˆÙ† Ø³Ø±Ø²Ù†Ø´ØŒ ÙÙ‚Ø· Ú©Ù†Ø¬Ú©Ø§ÙˆÛŒ..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">ÙØ±Ø¯Ø§ ÛŒÙ‡ ØªØºÛŒÛŒØ± Ú©ÙˆÚ†Ú©ØŸ ğŸ’¡</label>
            <input type="text" id="reviewTomorrow" class="input" placeholder="ÛŒÙ‡ Ú†ÛŒØ² Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†">
          </div>
          <button onclick="saveDailyReview()" class="btn btn-secondary">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ²</button>
        </div>
      </div>
      
      <!-- BRAIN DUMP PAGE -->
      <div id="page-brain" class="page">
        <div class="card">
          <div class="card-header">
            <div class="card-icon blue">ğŸ§ </div>
            <div>
              <h2 class="card-title">ØªØ®Ù„ÛŒÙ‡ Ø°Ù‡Ù†</h2>
              <p class="card-subtitle">Ù‡Ø± Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¯Ø± Ø°Ù‡Ù†Øª Ù‡Ø³Øª Ø±Ùˆ Ø¨Ø±ÛŒØ² Ø¨ÛŒØ±ÙˆÙ†</p>
            </div>
          </div>
          <textarea id="brainDumpText" class="textarea mb-3" rows="5" placeholder="Ù‡Ø± Ø®Ø· = ÛŒÙ‡ ÙÚ©Ø±ØŒ Ú©Ø§Ø±ØŒ Ù†Ú¯Ø±Ø§Ù†ÛŒ..."></textarea>
          <button onclick="saveBrainDump()" class="btn btn-primary mb-2">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ®Ù„ÛŒÙ‡ Ø°Ù‡Ù†</button>
          <button onclick="processBrainDump()" class="btn btn-light">ğŸ“‹ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ù‡Ø§</button>
        </div>
        
        <!-- Ù„ÛŒØ³Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ ØªØ®Ù„ÛŒÙ‡ Ø°Ù‡Ù† -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon gray">ğŸ“</div>
            <div>
              <h2 class="card-title">ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø°Ù‡Ù†ÛŒ</h2>
              <p class="card-subtitle">ÙÚ©Ø±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø±Ø¯ÛŒ</p>
            </div>
          </div>
          <div id="brainDumpList"></div>
        </div>
      </div>
      
      <!-- ALL TASKS PAGE -->
      <div id="page-all" class="page">
        <div class="card">
          <div class="card-header">
            <div class="card-icon green">ğŸ“‹</div>
            <div>
              <h2 class="card-title">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§</h2>
              <p class="card-subtitle">Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ú©Ø§Ø±Ù‡Ø§ (Master List)</p>
            </div>
          </div>
          <div id="masterList"></div>
          <button onclick="showTaskModal('master')" class="btn btn-primary mt-2">+ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ</button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon green">ğŸ“Š</div>
            <div>
              <h2 class="card-title">Ø¢Ù…Ø§Ø± Ø§ÛŒÙ† Ù‡ÙØªÙ‡</h2>
            </div>
          </div>
          <div class="stats">
            <div class="stat">
              <div class="stat-num" id="wkDone">Û°</div>
              <div class="stat-label">Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</div>
            </div>
            <div class="stat">
              <div class="stat-num" id="wkPlan">Û°</div>
              <div class="stat-label">Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ</div>
            </div>
            <div class="stat">
              <div class="stat-num" id="wkDays">Û°</div>
              <div class="stat-label">Ø±ÙˆØ² ÙØ¹Ø§Ù„</div>
            </div>
            <div class="stat">
              <div class="stat-num" id="wkPercent">Û°Ùª</div>
              <div class="stat-label">Ù…ÙˆÙÙ‚ÛŒØª</div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon yellow">ğŸ”</div>
            <div>
              <h2 class="card-title">Ù‡Ø±Ø³ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ</h2>
              <p class="card-subtitle">Ú©Ø§Ø±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨ÛŒØ´ Ø§Ø² ÛŒÚ© Ù‡ÙØªÙ‡ Ù‡Ø³Øª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù†</p>
            </div>
          </div>
          <div id="staleTasksList"></div>
          <button onclick="pruneOldTasks()" class="btn btn-warning mt-2">ğŸ—‘ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù‡Ù†Ù‡</button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon blue">ğŸ§ª</div>
            <div>
              <h2 class="card-title">Ù…Ø±ÙˆØ± Ù‡ÙØªÚ¯ÛŒ</h2>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ú†Ù‡ Ù¾ÛŒØ´Ø±ÙØªÛŒ Ø¯Ø§Ø´ØªÙ…ØŸ</label>
            <textarea id="weekProgress" class="textarea" rows="2" placeholder="Ø­ØªÛŒ Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ù¾ÛŒØ´Ø±ÙØªâ€ŒÙ‡Ø§..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Ù…ÙˆØ§Ù†Ø¹ Ø§ØµÙ„ÛŒ Ú†ÛŒ Ø¨ÙˆØ¯ØŸ</label>
            <div class="chips mb-2" id="obstacleChips">
              <span class="chip" data-v="Ø®Ø³ØªÚ¯ÛŒ">ğŸ˜´ Ø®Ø³ØªÚ¯ÛŒ</span>
              <span class="chip" data-v="Ø­ÙˆØ§Ø³â€ŒÙ¾Ø±ØªÛŒ">ğŸ“± Ø­ÙˆØ§Ø³â€ŒÙ¾Ø±ØªÛŒ</span>
              <span class="chip" data-v="Ú©Ù…Ø§Ù„â€ŒÚ¯Ø±Ø§ÛŒÛŒ">ğŸ¯ Ú©Ù…Ø§Ù„â€ŒÚ¯Ø±Ø§ÛŒÛŒ</span>
              <span class="chip" data-v="Ø§ØªÙØ§Ù‚Ø§Øª">ğŸŒ€ Ø§ØªÙØ§Ù‚Ø§Øª</span>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ù‡ÙØªÙ‡ Ø¨Ø¹Ø¯ ÛŒÙ‡ Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©ÙˆÚ†Ú©ØŸ</label>
            <input type="text" id="weekExperiment" class="input" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØµØ¨Ø­â€ŒÙ‡Ø§ Ø²ÙˆØ¯ØªØ± Ø´Ø±ÙˆØ¹ Ú©Ù†Ù…">
          </div>
          <button onclick="saveWeeklyReview()" class="btn btn-secondary">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø±ÙˆØ± Ù‡ÙØªÚ¯ÛŒ</button>
        </div>
        
        <!-- Review History -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon gray">ğŸ“œ</div>
            <div>
              <h2 class="card-title">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø±ÙˆØ±Ù‡Ø§</h2>
            </div>
          </div>
          <div id="reviewHistory"></div>
        </div>
      </div>
      
      <!-- HABITS PAGE -->
      <div id="page-habits" class="page">
        <div class="card">
          <div class="card-header">
            <div class="card-icon green">ğŸ”—</div>
            <div>
              <h2 class="card-title">Ø¹Ø§Ø¯Øªâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú©</h2>
              <p class="card-subtitle">Ø¨Ø¹Ø¯ Ø§Ø² XØŒ ÙÙ‚Ø· Y Ù…ÛŒâ€ŒÚ©Ù†Ù…</p>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡...</label>
            <div class="flex gap-2">
              <input type="text" id="habitAnchor" class="input" placeholder="ØµØ¨Ø­Ø§Ù†Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù…">
              <select id="habitTaskSelect" class="select" style="width: 40%; font-size: 0.8rem;" onchange="document.getElementById('habitAnchor').value = this.options[this.selectedIndex].text">
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²...</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ÙÙ‚Ø·...</label>
            <input type="text" id="habitBehavior" class="input" placeholder="Û² Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³Ù…">
          </div>
          <button onclick="addHabit()" class="btn btn-primary mb-3">+ Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ø§Ø¯Øª</button>
          <div id="habitsList"></div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon yellow">âš¡</div>
            <div>
              <h2 class="card-title">Ø§Ú¯Ø±... Ø¢Ù†Ú¯Ø§Ù‡...</h2>
              <p class="card-subtitle">Ø§Ø² Ù‚Ø¨Ù„ ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±</p>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø§Ú¯Ø±...</label>
            <div class="flex gap-2">
              <input type="text" id="ifCond" class="input" placeholder="Ø­ÙˆØµÙ„Ù‡â€ŒØ§Ù… Ù†Ø¨ÙˆØ¯">
              <select id="ifTaskSelect" class="select" style="width: 40%; font-size: 0.8rem;" onchange="document.getElementById('ifCond').value = 'Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Â«' + this.options[this.selectedIndex].text + 'Â» Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯'">
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²...</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø¢Ù†Ú¯Ø§Ù‡...</label>
            <input type="text" id="thenAct" class="input" placeholder="ÙÙ‚Ø· Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†Ù…">
          </div>
          <button onclick="addIfThen()" class="btn btn-secondary mb-3">+ Ø§ÙØ²ÙˆØ¯Ù† Ù‚Ø§Ù†ÙˆÙ†</button>
          <div id="ifThenList"></div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon blue">â­</div>
            <div>
              <h2 class="card-title">WOOP</h2>
              <p class="card-subtitle">Ø¢Ø±Ø²Ùˆ â† Ù†ØªÛŒØ¬Ù‡ â† Ù…Ø§Ù†Ø¹ â† Ø¨Ø±Ù†Ø§Ù…Ù‡</p>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ğŸŒŸ Ø¢Ø±Ø²Ùˆ</label>
            <input type="text" id="woopW" class="input" placeholder="Ù‡Ø± Ø±ÙˆØ² Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡">
          </div>
          <div class="form-group">
            <label class="form-label">âœ¨ Ù†ØªÛŒØ¬Ù‡</label>
            <input type="text" id="woopO" class="input" placeholder="Ø­Ø³ Ù¾ÛŒØ´Ø±ÙØª Ùˆ Ø¢Ø±Ø§Ù…Ø´">
          </div>
          <div class="form-group">
            <label class="form-label">ğŸš§ Ù…Ø§Ù†Ø¹</label>
            <input type="text" id="woopOb" class="input" placeholder="Ø®Ø³ØªÚ¯ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ø§Ø±">
          </div>
          <div class="form-group">
            <label class="form-label">ğŸ“‹ Ø¨Ø±Ù†Ø§Ù…Ù‡</label>
            <input type="text" id="woopP" class="input" placeholder="ÙÙ‚Ø· Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†Ù…">
          </div>
          <button onclick="addWoop()" class="btn btn-primary mb-3">+ Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ø¯Ù</button>
          <div id="woopList"></div>
        </div>
      </div>
      
      <!-- PROJECTS PAGE -->
      <div id="page-projects" class="page">
        <div class="card">
          <div class="card-header">
            <div class="card-icon blue">ğŸ¯</div>
            <div>
              <h2 class="card-title">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h2>
              <p class="card-subtitle">Ù¾Ø±ÙˆÚ˜Ù‡ = Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©</p>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
            <input type="text" id="projectName" class="input" placeholder="Ù…Ø«Ø§Ù„: Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡ØŒ Ø³Ø§ÛŒØª Ø¬Ø¯ÛŒØ¯...">
          </div>
          <div class="form-group">
            <label class="form-label">Ù‡Ø¯Ù Ù†Ù‡Ø§ÛŒÛŒ</label>
            <input type="text" id="projectGoal" class="input" placeholder="ÙˆÙ‚ØªÛŒ ØªÙ…Ø§Ù… Ø´Ø¯ Ú†Ù‡ Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ù…ØŸ">
          </div>
          <div class="form-group">
            <label class="form-label">Ø¯Ø¯Ù„Ø§ÛŒÙ†</label>
            <input type="date" id="projectDeadline" class="input">
          </div>
          <button onclick="addProject()" class="btn btn-primary mb-3">+ Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡</button>
          <div id="projectsList"></div>
        </div>
        
        <div class="card" style="background: var(--secondary-light); border: none;">
          <h3 style="font-size: 0.9rem; font-weight: 700; margin-bottom: 8px;">ğŸ’¡ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…</h3>
          <p style="font-size: 0.85rem; line-height: 1.7;">Ù¾Ø±ÙˆÚ˜Ù‡ Ú†ÛŒØ²ÛŒ Ù…Ø«Ù„ Â«Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡Â» ÛŒØ§ Â«Ù„Ø§ØºØ± Ø´Ø¯Ù†Â» Ø§Ø³Øª. Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†ÛŒØ³ØªÙ†Ø¯! Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Û±Ûµ-Û¶Û° Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ Ø¨Ø´Ú©Ù†ÛŒ.</p>
        </div>
      </div>
      
      <!-- AI PAGE -->
      <div id="page-ai" class="page">
        <div class="card">
          <div class="card-header">
            <div class="card-icon blue">ğŸ¤–</div>
            <div>
              <h2 class="card-title">ØªØ­Ù„ÛŒÙ„ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h2>
              <p class="card-subtitle">Ù¾Ø±Ø§Ù…Ù¾Øª Ø±Ùˆ Ú©Ù¾ÛŒ Ú©Ù† Ùˆ Ø¨ÙØ±Ø³Øª Ø¨Ù‡ ChatGPT</p>
            </div>
          </div>
          <button onclick="generatePrompt()" class="btn btn-primary mb-3">ğŸ”® Ø³Ø§Ø®ØªÙ† Ù¾Ø±Ø§Ù…Ù¾Øª ØªØ­Ù„ÛŒÙ„</button>
          <div id="promptBox" class="prompt-box hidden"></div>
          <button onclick="copyPrompt()" id="copyPromptBtn" class="btn btn-secondary mt-2 hidden">ğŸ“‹ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù¾Ø±Ø§Ù…Ù¾Øª</button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon gray">ğŸ’¡</div>
            <div>
              <h2 class="card-title">Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h2>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;">
            <div class="tiny-task" onclick="copyQuestion(this)">
              <span class="tiny-task-text">Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø¹Ø§Ø¯Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø±Ùˆ ØªØ«Ø¨ÛŒØª Ú©Ù†Ù…ØŸ</span>
              <span>ğŸ“‹</span>
            </div>
            <div class="tiny-task" onclick="copyQuestion(this)">
              <span class="tiny-task-text">Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ù…ÙˆØ§Ù†Ø¹Ù…ØŒ Ú†Ù‡ Ø±Ø§Ù‡â€ŒØ­Ù„ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒØ¯ÛŒØŸ</span>
              <span>ğŸ“‹</span>
            </div>
            <div class="tiny-task" onclick="copyQuestion(this)">
              <span class="tiny-task-text">ÛŒÙ‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Û² Ù‡ÙØªÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ù‡Ù… Ø¨Ø¯Ù‡</span>
              <span>ğŸ“‹</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- SETTINGS PAGE -->
      <div id="page-settings" class="page">
        <div class="card" style="border: 2px solid var(--warning);">
          <div class="card-header">
            <div class="card-icon yellow">ğŸ’¾</div>
            <div>
              <h2 class="card-title">Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ</h2>
              <p class="card-subtitle">Ù‡ÙØªÙ‡â€ŒØ§ÛŒ ÛŒÙ‡ Ø¨Ø§Ø± Ø¨Ú©Ø§Ù¾ Ø¨Ú¯ÛŒØ±!</p>
            </div>
          </div>
          <button onclick="downloadBackup()" class="btn btn-primary mb-2">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ú©Ø§Ù¾</button>
          <button onclick="copyBackup()" class="btn btn-warning mb-2">ğŸ“‹ Ú©Ù¾ÛŒ Ù…ØªÙ† Ø¨Ú©Ø§Ù¾</button>
          <label class="btn btn-light mb-2" style="cursor:pointer">
            ğŸ“¤ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² ÙØ§ÛŒÙ„
            <input type="file" accept=".json,.txt" style="display:none" onchange="handleImport(this)">
          </label>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon gray">âš™ï¸</div>
            <div>
              <h2 class="card-title">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h2>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ø­Ø§Ù„Øª Ù†Ù…Ø§ÛŒØ´</label>
            <button onclick="toggleTheme()" class="btn btn-outline" id="themeBtnSettings">ğŸŒ™ Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©</button>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ø§Ø³Ù…</label>
            <input type="text" id="setName" class="input">
          </div>
          
          <div class="form-group">
            <label class="form-label">Ø¬Ù…Ù„Ù‡ Ù‡ÙˆÛŒØªÛŒ</label>
            <textarea id="setIdentity" class="textarea" rows="2"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§ (Ú©Ù„ÛŒÚ© = Ø­Ø°Ù)</label>
            <div id="settingsValues" class="chips mb-2"></div>
            <div class="flex gap-2">
              <input type="text" id="addValueInput" class="input flex-1" placeholder="Ø§Ø±Ø²Ø´ Ø¬Ø¯ÛŒØ¯...">
              <button onclick="addSettingValue()" class="btn btn-light" style="width:auto;padding:10px 14px">+</button>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Ù†Ù‚Ø´â€ŒÙ‡Ø§</label>
            <div id="settingsRoles" class="chips mb-2"></div>
            <div class="flex gap-2">
              <input type="text" id="addRoleInput" class="input flex-1" placeholder="Ù†Ù‚Ø´ Ø¬Ø¯ÛŒØ¯...">
              <button onclick="addSettingRole()" class="btn btn-light" style="width:auto;padding:10px 14px">+</button>
            </div>
          </div>
          
          <button onclick="saveSettings()" class="btn btn-primary mb-3">Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
          
          <div class="btn-row">
            <button onclick="doResetSetup()" class="btn btn-outline">ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
            <button onclick="doClearAll()" class="btn btn-danger">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
          </div>
        </div>
        
        <!-- LEARN SECTION -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon green">ğŸ“š</div>
            <div>
              <h2 class="card-title">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§</h2>
              <p class="card-subtitle">Ø§ØµÙˆÙ„ ÙØ±Ù…ÙˆÙ„ To-Do + Ú©ÙˆÚ†ÛŒÙ†Ú¯</p>
            </div>
          </div>
          
          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸ’¡ Û±. Ù…Ø´Ú©Ù„ Ø³ÛŒØ³ØªÙ… Ø§Ø³ØªØŒ Ù†Ù‡ ØªÙˆ</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ø§Ú¯Ø± Ú©Ø§Ø±Ù‡Ø§ÛŒØª Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯ØŒ Ù…Ø´Ú©Ù„ Ø§Ø² Ø§Ø±Ø§Ø¯Ù‡â€ŒØ§Øª Ù†ÛŒØ³ØªØŒ Ø§Ø² Ø±ÙˆØ´ Ù„ÛŒØ³Øªâ€ŒÙ†ÙˆÛŒØ³ÛŒ Ø§Ø³Øª. Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø·ÙˆØ±ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ú©Ù‡ ÙˆØ§Ù‚Ø¹â€ŒØ¨ÛŒÙ†Ø§Ù†Ù‡ Ø¨Ø§Ø´Ø¯.</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸ“¥ Û². Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹ (Master List)</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ø°Ù‡Ù† Ø¬Ø§ÛŒ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ† Ú©Ø§Ø±Ù‡Ø§ Ù†ÛŒØ³Øª. Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±Ø§ Ø¯Ø± Â«Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§Â» Ø¨Ù†ÙˆÛŒØ³. Ø§ÛŒÙ† Ù…ØºØ² Ø¯ÙˆÙ… ØªÙˆØ³Øª.</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸ“… Û³. Ù„ÛŒØ³Øª Ø§Ù…Ø±ÙˆØ² â‰  Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹ Ø´Ø§Ù…Ù„ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø§Ø³Øª. Ù„ÛŒØ³Øª Ø§Ù…Ø±ÙˆØ² ÙÙ‚Ø· Ø´Ø§Ù…Ù„ Ú©Ø§Ø±Ù‡Ø§ÛŒÛŒ Ø§Ø³Øª Ú©Ù‡ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ø§Ù…Ø±ÙˆØ² ÙˆÙ‚Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒ (Ø­Ø¯ÙˆØ¯ Û· Ú©Ø§Ø±).</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>7ï¸âƒ£ Û´. Ù‚Ø§Ù†ÙˆÙ† Û· Ú©Ø§Ø±</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ù…ØºØ² Ø¨Ø§ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ ÙÙ„Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø± Ù…Ù‡Ù… (Ø¨Ø§Ù„Ø§ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡) Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ² Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†. Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø±ÛŒØ² Ø¬Ø¯Ø§ Ù‡Ø³ØªÙ†Ø¯.</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>âš¡ Ûµ. Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ (Tiny Tasks)</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø²ÛŒØ± Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ (Ù…Ø«Ù„ ØªÙ…Ø§Ø³ØŒ Ù¾ÛŒØ§Ù…) Ø±Ø§ Ù‚Ø§Ø·ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù…Ù‡Ù… Ù†Ú©Ù†. Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ù„ÛŒØ³Øª Â«Ø³Ø±ÛŒØ¹Â» Ù†Ú¯Ù‡ Ø¯Ø§Ø± Ùˆ ÙˆÙ‚ØªÛŒ ÙˆÙ‚Øª Ù…Ø±Ø¯Ù‡ Ø¯Ø§Ø´ØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡.</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸ¯ Û¶. Ú©Ø§Ø± â‰  Ù¾Ø±ÙˆÚ˜Ù‡</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Â«Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡Â» Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø³Øª. Â«Ù†ÙˆØ´ØªÙ† ÛŒÚ© ØµÙØ­Ù‡Â» Ú©Ø§Ø± Ø§Ø³Øª. Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± ØªØ¨ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø¨Ø³Ø§Ø² Ùˆ Ø¨Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø¨Ø´Ú©Ù†.</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>â±ï¸ Û·. Ù‚Ø§Ù†ÙˆÙ† Û±.Ûµ Ø¨Ø±Ø§Ø¨Ø±</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ù…Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ø²Ù…Ø§Ù† Ø±Ø§ Ø¯Ø³Øªâ€ŒÚ©Ù… Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ…. Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø²Ù…Ø§Ù† ØªØ®Ù…ÛŒÙ†ÛŒ ØªÙˆ Ø±Ø§ Ø¯Ø± Û±.Ûµ Ø¶Ø±Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§Øª ÙˆØ§Ù‚Ø¹ÛŒâ€ŒØªØ± Ø´ÙˆØ¯.</p>
            </div>
          </div>
          
          <div style="margin: 12px 0; border-top: 1px dashed var(--border);"></div>
          <h3 style="font-size:0.9rem; font-weight:700; margin-bottom:8px;">ğŸ§  Ø§ØµÙˆÙ„ Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ</h3>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸª Ù‡ÙˆÛŒØª Ùˆ Ø¹Ø§Ø¯Øª</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ø¨Ù‡ Ø¬Ø§ÛŒ Â«Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… ÙˆØ±Ø²Ø´ Ú©Ù†Ù…Â»ØŒ Ø¨Ú¯Ùˆ Â«Ù…Ù† ÙˆØ±Ø²Ø´Ú©Ø§Ø±Ù…Â». Ù‡ÙˆÛŒØªØŒ Ø¹Ø§Ø¯Øª Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯. (James Clear)</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>ğŸ”— Ø¹Ø§Ø¯Øªâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© (Tiny Habits)</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ø±ÙØªØ§Ø± Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø¨Ù‡ Ø±ÙØªØ§Ø± Ù‚Ø¯ÛŒÙ…ÛŒ ÙˆØµÙ„ Ú©Ù†: Â«Ø¨Ø¹Ø¯ Ø§Ø² Ù…Ø³ÙˆØ§Ú© (Ù‚Ø¯ÛŒÙ…ÛŒ)ØŒ Ù†Ø® Ø¯Ù†Ø¯Ø§Ù† Ù…ÛŒâ€ŒÚ©Ø´Ù… (Ø¬Ø¯ÛŒØ¯)Â». (BJ Fogg)</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>âš¡ Ø§Ú¯Ø±... Ø¢Ù†Ú¯Ø§Ù‡...</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ù†Ø¹ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø´: Â«Ø§Ú¯Ø± Ø®Ø³ØªÙ‡ Ø¨ÙˆØ¯Ù…ØŒ Ø¢Ù†Ú¯Ø§Ù‡ ÙÙ‚Ø· Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…Â». (Implementation Intentions)</p>
            </div>
          </div>

          <div class="accordion" onclick="this.classList.toggle('open')">
            <div class="accordion-header"><span>â­ WOOP</span><span class="accordion-icon">â–¼</span></div>
            <div class="accordion-body">
              <p>Wish (Ø¢Ø±Ø²Ùˆ) â†’ Outcome (Ù†ØªÛŒØ¬Ù‡) â†’ Obstacle (Ù…Ø§Ù†Ø¹) â†’ Plan (Ø¨Ø±Ù†Ø§Ù…Ù‡). Ù…Ø§Ù†Ø¹ Ø±Ø§ Ø¨Ø¨ÛŒÙ† Ùˆ Ø¨Ø±Ø§ÛŒØ´ Ù¾Ù„Ù† Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´.</p>
            </div>
          </div>
        </div>
        
        <!-- Ø¯Ø± ÛŒÚ© Ù†Ú¯Ø§Ù‡ -->
        <div class="card" style="background: var(--primary-light); border: none;">
          <h3 style="font-size: 0.95rem; font-weight: 700; margin-bottom: 10px;">ğŸ¯ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¯Ø± ÛŒÚ© Ù†Ú¯Ø§Ù‡</h3>
          <div style="font-size: 0.85rem; line-height: 1.8;">
            <p>â€¢ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§ â†’ Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹ (Master List)</p>
            <p>â€¢ Ù‡Ø± Ø±ÙˆØ² Ø­Ø¯Ø§Ú©Ø«Ø± ~Û· Ú©Ø§Ø± Ø¬Ø¯ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</p>
            <p>â€¢ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø±ÛŒØ² (Ø²ÛŒØ± Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡) Ø¬Ø¯Ø§ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±</p>
            <p>â€¢ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ â†’ Ø´Ú©Ø³ØªÙ† Ø¨Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©</p>
            <p>â€¢ Ù…Ø±ÙˆØ± Ù…Ù†Ø¸Ù… = Ø±Ø´Ø¯ Ù¾ÛŒÙˆØ³ØªÙ‡</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û± -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ’¡ Ù…Ø´Ú©Ù„ ØªÙˆ Â«Ø¨ÛŒâ€ŒØ§Ø±Ø§Ø¯Ú¯ÛŒÂ» Ù†ÛŒØ³Øª</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø§Ú¯Ø± Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø­Ø³Ø§Ø³ Ù…ÛŒâ€ŒÚ©Ù†ÛŒ Ú©Ù„ÛŒ Ú©Ø§Ø± Ù†Ø§ØªÙ…Ø§Ù… Ø¯Ø§Ø±ÛŒØŒ Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ù…Ø´Ú©Ù„ Ø§Ø² <strong>Ù„ÛŒØ³Øªâ€ŒÙ†ÙˆÛŒØ³ÛŒ</strong> ØªÙˆØ³ØªØŒ Ù†Ù‡ Ø§Ø² Ø§Ø±Ø§Ø¯Ù‡ ÛŒØ§ Ø´Ø®ØµÛŒØªØª.</p>
            <p style="margin-top: 8px;">ÙØ±Ù…ÙˆÙ„ Ø²Ø§Ù‡Ø§Ø±ÛŒØ§Ø¯Ø³ ÛŒÚ© Ú†Ø§Ø±Ú†ÙˆØ¨ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒØª <strong>ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù‚Ø§Ø¨Ù„â€ŒØ§Ø¬Ø±Ø§</strong> Ø´ÙˆÙ†Ø¯. Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª Â«Ø®ÙˆØ¯ØªÂ» Ø±Ø§ Ø¹ÙˆØ¶ Ú©Ù†ÛŒØŒ Ø¨Ù„Ú©Ù‡ Â«Ø±ÙˆØ´ Ù„ÛŒØ³Øªâ€ŒÙ†ÙˆÛŒØ³ÛŒÂ» Ø±Ø§.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û² -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ“¥ Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹ = Ù…ØºØ² Ø¯ÙˆÙ…</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø°Ù‡Ù† Ø¬Ø§ÛŒ Â«Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ†ÙÂ» Ú©Ø§Ø±Ù‡Ø§ Ù†ÛŒØ³ØªØ› ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Â«ÙÚ©Ø± Ú©Ø±Ø¯Ù†Â» Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡.</p>
            <p style="margin-top: 8px;">Ù‡Ø± Ú©Ø§Ø±ÛŒ Ú©Ù‡ Ø¨Ù‡ Ø°Ù‡Ù†â€ŒØ§Øª Ù…ÛŒâ€ŒØ¢ÛŒØ¯ â€“ Ø§Ø² Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† ØªØ§ Ø¨Ø²Ø±Ú¯â€ŒØªØ±ÛŒÙ† â€“ Ø§ÙˆÙ„ Ø¨Ø§ÛŒØ¯ ÛŒÚ© Ø¬Ø§ Ø«Ø¨Øª Ø´ÙˆØ¯. Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù‡ Ø¢Ù† Ù…ÛŒâ€ŒÚ¯ÙˆÛŒÛŒÙ… Â«Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹Â»Ø› Ù…Ø«Ù„ ÛŒÚ© <strong>Ù…ØºØ² Ø¯ÙˆÙ…</strong>ØŒ Ú©Ù‡ Ø®ÛŒØ§Ù„â€ŒØ§Øª Ø±Ø§ Ø±Ø§Ø­Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú†ÛŒØ²ÛŒ Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†ÛŒ.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û³ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ“… ÙØ±Ù‚ Â«Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹Â» Ø¨Ø§ Â«Ù„ÛŒØ³Øª Ø§Ù…Ø±ÙˆØ²Â»</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø§Ø´ØªØ¨Ø§Ù‡ Ø±Ø§ÛŒØ¬ Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ Ù„ÛŒØ³ØªÙ Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø±Ø§ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Â«Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ù…Ø±ÙˆØ²Â» Ù†Ú¯Ø§Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….</p>
            <p style="margin-top: 8px;"><strong>Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹</strong> = Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡</p>
            <p><strong>Ù„ÛŒØ³Øª Ø§Ù…Ø±ÙˆØ²</strong> = Ø­Ø¯Ø§Ú©Ø«Ø± Ú†Ù†Ø¯ Ú©Ø§Ø± Ù…Ø­Ø¯ÙˆØ¯ Ú©Ù‡ Ø§Ù…Ø±ÙˆØ² Ù‚Ø±Ø§Ø± Ø§Ø³Øª ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ø¨Ø±Ø§ÛŒØ´Ø§Ù† ÙˆÙ‚Øª Ø¨Ú¯Ø°Ø§Ø±ÛŒ.</p>
            <p style="margin-top: 8px;">Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø¨Ù‡ ØªÙˆ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø§ÛŒÙ† Ø¯Ùˆ Ø±Ø§ Ø§Ø² Ù‡Ù… Ø¬Ø¯Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒ.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û´ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ”¨ Â«Ú©Ø§Ø±Â» Ø¨Ø§ Â«Ù¾Ø±ÙˆÚ˜Ù‡Â» ÙØ±Ù‚ Ø¯Ø§Ø±Ø¯</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ù…Ø«Ù„ Â«Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡Â»ØŒ Â«Ø³Ø§ÛŒØªÂ»ØŒ Â«Ù„Ø§ØºØ± Ø´Ø¯Ù†Â» <strong>Ù¾Ø±ÙˆÚ˜Ù‡â€Œ</strong>Ø§Ù†Ø¯ØŒ Ù†Ù‡ Ú©Ø§Ø±.</p>
            <p style="margin-top: 8px;">Ú©Ø§Ø± Ø¨Ø§ÛŒØ¯ <strong>Ú©ÙˆÚ†Ú©ØŒ Ù…Ø´Ø®Øµ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø± ÛŒÚ© Ù†Ø´Ø³Øª Ù…Ø¹Ù‚ÙˆÙ„</strong> (Ù…Ø«Ù„Ø§Ù‹ Û±Ûµâ€“Û¶Û° Ø¯Ù‚ÛŒÙ‚Ù‡) Ø¨Ø§Ø´Ø¯.</p>
            <p style="margin-top: 8px;">Ù‡Ø± ÙˆÙ‚Øª Ú†ÛŒØ²ÛŒ Ø¯Ø± Ù„ÛŒØ³ØªØª Ø¢Ù†â€ŒÙ‚Ø¯Ø± Ø¨Ø²Ø±Ú¯ Ø§Ø³Øª Ú©Ù‡ Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒ Ø§Ø² Ú©Ø¬Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØŒ ÛŒØ¹Ù†ÛŒ Ø¨Ø§ ÛŒÚ© Â«Ù¾Ø±ÙˆÚ˜Ù‡Â» Ø·Ø±ÙÛŒ. Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø¨Ø´Ú©Ù†.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Ûµ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>7ï¸âƒ£ Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø± Ø¬Ø¯ÛŒ Ø¯Ø± Ø±ÙˆØ²</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ù„ÛŒØ³Øª Ø§Ù…Ø±ÙˆØ²Øª Ù†Ø¨Ø§ÛŒØ¯ Ø¨Ø´ÙˆØ¯ Û²Û°â€“Û³Û° Ù…ÙˆØ±Ø¯!</p>
            <p style="margin-top: 8px;">Ø·Ø¨Ù‚ ÙØ±Ù…ÙˆÙ„ØŒ Ø­Ø¯Ø§Ú©Ø«Ø± Ø­Ø¯ÙˆØ¯ <strong>Û· Ú©Ø§Ø± Ø¬Ø¯ÛŒ</strong> (Ù‡Ø±Ú©Ø¯Ø§Ù… Ø­Ø¯Ø§Ù‚Ù„ ~Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡) Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ² Ú©Ø§ÙÛŒ Ø§Ø³Øª. Ø¨Ø§Ù‚ÛŒ Ú©Ø§Ø±Ù‡Ø§ ÛŒØ§ Ù…ÛŒâ€ŒØ±ÙˆÙ†Ø¯ Ø¯Ø± Ù„ÛŒØ³Øª Â«Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹Â» ÛŒØ§ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±.</p>
            <p style="margin-top: 8px;"><strong>Ú†Ø±Ø§ Û·ØŸ</strong> Ú†ÙˆÙ† Ù…ØºØ² Ø¯Ø± Ù…Ù‚Ø§Ø¨Ù„ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ ÙÙ„Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ú©Ù…Ù‘ÛŒØŒ ØªÙ…Ø±Ú©Ø² Ùˆ Ø§Ø­Ø³Ø§Ø³ Ù¾ÛŒØ±ÙˆØ²ÛŒ Ø±Ø§ Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨Ø±Ø¯.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û¶ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>âš¡ Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø²ÛŒØ± Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ (Ù…Ø«Ù„: Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø¯Ù† ÛŒÚ© Ø§ÛŒÙ…ÛŒÙ„ØŒ ÙØ±Ø³ØªØ§Ø¯Ù† ÛŒÚ© ÙØ§ÛŒÙ„) Ø±Ø§ Ù†Ø¨Ø§ÛŒØ¯ Ù‚Ø§Ø·ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø±ÙˆØ² Ú©Ø±Ø¯.</p>
            <p style="margin-top: 8px;">Ø§ÛŒÙ† Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ú†Ù†ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§ÛŒÛŒ Ø±Ø§ Ø¯Ø± ÛŒÚ© <strong>Â«Ù„ÛŒØ³Øª Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹Â»</strong> Ø¬Ø¯Ø§ Ø¬Ù…Ø¹ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ ØªØ§ ÙˆÙ‚ØªÛŒ Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÛŒ Ø®Ø§Ù„ÛŒ Ø¯Ø§Ø´ØªÛŒØŒ Ø¨Ø±ÙˆÛŒ Ø³Ø±Ø§Øº Ø¢Ù†â€ŒÙ‡Ø§.</p>
            <p style="margin-top: 8px;">Ø§Ú¯Ø± Ø¨ÛŒØ§ÛŒÙ†Ø¯ Ø¯Ø± Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ø±ÙˆØ²ØŒ Ù‡Ù… Ø¬Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ØŒ Ù‡Ù… ØªÙˆ Ø±Ø§ Ú¯ÙˆÙ„ Ù…ÛŒâ€ŒØ²Ù†Ù†Ø¯ Ú©Ù‡ Â«Ø®ÛŒÙ„ÛŒ Ú©Ø§Ø± Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒÂ»!</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û· -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>â±ï¸ Ø¯Ø¯Ù„Ø§ÛŒÙ† Ùˆ ØªØ®Ù…ÛŒÙ† Ø²Ù…Ø§Ù†</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ù‡Ø± Ú©Ø§Ø± Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÛŒØ® Ùˆ Ø¨Ø¯ÙˆÙ† ØªØ®Ù…ÛŒÙ† Ø²Ù…Ø§Ù†ØŒ Ø¨Ù‡â€ŒØ±Ø§Ø­ØªÛŒ Ù‡ÙØªÙ‡â€ŒÙ‡Ø§ Ø¯Ø± Ù„ÛŒØ³Øª Ø®Ø§Ú© Ù…ÛŒâ€ŒØ®ÙˆØ±Ø¯.</p>
            <p style="margin-top: 8px;">Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±ØŒ ÛŒÚ© Â«Ø­Ø¯Ø³ Ø²Ù…Ø§Ù†Â» Ø¨Ø²Ù† (Ù…Ø«Ù„Ø§Ù‹ Û±ÛµØŒ Û³Û°ØŒ Û´Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡)ØŒ Ùˆ Ø§Ú¯Ø± Ø´Ø¯ØŒ ÛŒÚ© ØªØ§Ø±ÛŒØ® Ù‡Ø¯Ù Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.</p>
            <p style="margin-top: 8px;">Ø³ÛŒØ³ØªÙ… Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¨Ø¨ÛŒÙ†ÛŒ Ø¢ÛŒØ§ Ø­Ø¬Ù… Ú©Ø§Ø± Ø§Ù…Ø±ÙˆØ² Ø¨Ø§ Ø²Ù…Ø§Ù† Ùˆ Ø§Ù†Ø±Ú˜ÛŒ ÙˆØ§Ù‚Ø¹ÛŒØª Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯ ÛŒØ§ Ù†Ù‡. (Ù…Ø§ Ø®ÙˆØ¯Ù…Ø§Ù† Û±.Ûµ Ø¨Ø±Ø§Ø¨Ø± Ø­Ø³Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú†ÙˆÙ† Ù‡Ù…Ù‡ Ø²Ù…Ø§Ù† Ø±Ø§ Ø¯Ø³Øªâ€ŒÚ©Ù… Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ…!)</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø§ØµÙ„ÛŒ Û¸ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ”„ Ù…Ø±ÙˆØ± Ù…Ù†Ø¸Ù… = Ø¨Ø®Ø´ÛŒ Ø§Ø² Ø³ÛŒØ³ØªÙ…</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø§Ú¯Ø± Ù‡ÛŒÚ†â€ŒÙˆÙ‚Øª Ø¨Ù‡ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒØª Ø³Ø± Ù†Ø²Ù†ÛŒ Ùˆ ØªÙ…ÛŒØ²Ø´Ø§Ù† Ù†Ú©Ù†ÛŒØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù‡Ù…Ø§Ù† Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒâ€ŒÙ…ØµØ±Ù Ùˆ Ø´Ù„ÙˆØº Ù‚Ø¨Ù„ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p>
            <p style="margin-top: 8px;">Ø§ÛŒÙ† Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± ÛŒÚ© <strong>Ù…Ø±ÙˆØ± Ú©ÙˆØªØ§Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</strong> Ùˆ <strong>Ù…Ø±ÙˆØ± Ù‡ÙØªÚ¯ÛŒ</strong> Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯:</p>
            <p>â€¢ Ø¨Ø¨ÛŒÙ†ÛŒ Ú†Ù‡ Ú†ÛŒØ² Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ø±ÙØª</p>
            <p>â€¢ Ú†Ù‡ Ú†ÛŒØ² Ù†Ù‡</p>
            <p>â€¢ Ùˆ ÙØ±Ø¯Ø§ Ø±Ø§ Ú©Ù…ÛŒ ÙˆØ§Ù‚Ø¹ÛŒâ€ŒØªØ± Ø¨Ú†ÛŒÙ†ÛŒ</p>
          </div>
        </div>
        
        <!-- Ø¹Ù†ÙˆØ§Ù† Ù†Ú©Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ -->
        <div class="card" style="background: var(--warning-light); border: none; margin-top: 16px;">
          <h3 style="font-size: 0.95rem; font-weight: 700;">âœ¨ Ù†Ú©Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</h3>
          <p style="font-size: 0.8rem; color: var(--text2);">Ú†ÛŒØ²Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©ÛŒ Ú©Ù‡ ØªÙØ§ÙˆØª Ø¨Ø²Ø±Ú¯ Ù…ÛŒâ€ŒØ³Ø§Ø²Ù†Ø¯</p>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û± -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>âœï¸ Ø´Ø±ÙˆØ¹ Ø¨Ø§ ÙØ¹Ù„ ÙØ¹Ø§Ù„</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø¨Ù‡â€ŒØ¬Ø§ÛŒ Â«Ù¾Ø±ÙˆÚ˜Ù‡ Ú¯Ø²Ø§Ø±Ø´Â»ØŒ Ø¨Ù†ÙˆÛŒØ³: Â«Ù†ÙˆØ´ØªÙ† Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³ Ø¨Ø®Ø´ Ø§ÙˆÙ„ Ú¯Ø²Ø§Ø±Ø´Â»</p>
            <p style="margin-top: 8px;">Ø³Ø¹ÛŒ Ú©Ù† Ø¹Ù†ÙˆØ§Ù† Ù‡Ø± Ú©Ø§Ø± Ø±Ø§ Ø¨Ø§ ÛŒÚ© ÙØ¹Ù„ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒ: Â«Ø²Ù†Ú¯â€ŒØ²Ø¯Ù† Ø¨Ù‡â€¦Â»ØŒ Â«Ù†ÙˆØ´ØªÙ†â€¦Â»ØŒ Â«Ù…Ø±ÙˆØ± Ú©Ø±Ø¯Ù†â€¦Â». Ø§ÛŒÙ†â€ŒØ·ÙˆØ±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒ Ø¨Ø§ÛŒØ¯ Ú†Ù‡ Ú©Ø§Ø± Ú©Ù†ÛŒ.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û² -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ¯ Ú©Ø§Ø± ÙˆØ§Ù‚Ø¹ÛŒ vs Ø¢Ø±Ø²ÙˆÙ†Ø§Ù…Ù‡</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ù„ÛŒØ³Øª Ú©Ø§Ø± Ù†Ø¨Ø§ÛŒØ¯ Ù¾Ø± Ø§Ø² Â«Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± ÙÙ„Ø§Ù† Ú©Ø§Ø± Ø±Ø§ Ø¨Ú©Ù†Ù…Â» Ùˆ Â«Ø§ÛŒâ€ŒÚ©Ø§Ø´â€¦Â» Ø¨Ø§Ø´Ø¯.</p>
            <p style="margin-top: 8px;">Ø§Ú¯Ø± Ø¯Ø± Ù„ÛŒØ³ØªØª Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ù…Ø«Ù„ Â«Ø¨ÛŒØ´ØªØ± Ú©ØªØ§Ø¨ Ø¨Ø®ÙˆØ§Ù†Ù…Â» Ø¯Ø§Ø±ÛŒØŒ ØªØ¨Ø¯ÛŒÙ„Ø´ Ú©Ù† Ø¨Ù‡: Â«Ø®ÙˆØ§Ù†Ø¯Ù† Û±Û° ØµÙØ­Ù‡ Ø§Ø² Ú©ØªØ§Ø¨ XÂ»</p>
            <p style="margin-top: 8px;">ÙØ±Ù…ÙˆÙ„ Ø¨Ø§ Â«Ø¢Ø±Ø²ÙˆÙ†Ø§Ù…Ù‡Â» Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯Ø› ÙÙ‚Ø· Ø¨Ø§ <strong>Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¬Ø§Ù…</strong>.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û³ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>â³ Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ø¨Ø³ØªÙ‡</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø¨Ø¹Ø¶ÛŒ Ú©Ø§Ø±Ù‡Ø§ Ù…ØªÙˆÙ‚Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ú†ÙˆÙ† Ø¨Ø§ÛŒØ¯ Ù…Ù†ØªØ¸Ø± Ø¬ÙˆØ§Ø¨ Ø§ÛŒÙ…ÛŒÙ„ØŒ ØªÙ…Ø§Ø³ØŒ ÛŒØ§ ØªØ£ÛŒÛŒØ¯ Ú©Ø³ÛŒ Ø¨Ø§Ø´ÛŒ.</p>
            <p style="margin-top: 8px;">Ø§Ú¯Ø± Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¬Ø¯Ø§ Ù†Ú©Ù†ÛŒØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø§Ø² Ø®ÙˆØ¯Øª Ù†Ø§Ø±Ø§Ø¶ÛŒ Ø´ÙˆÛŒØŒ Ø¯Ø±Ø­Ø§Ù„ÛŒâ€ŒÚ©Ù‡ ØªÙˆÙ¾ Ø¯Ø³Øª ØªÙˆ Ù†Ø¨ÙˆØ¯Ù‡!</p>
            <p style="margin-top: 8px;">Ø¯Ø± Ø§ÛŒÙ† Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ø§ ÛŒÚ© ØªÛŒÚ© Ø³Ø§Ø¯Ù‡ Ø¨Ú¯ÙˆÛŒÛŒ Â«Ø§ÛŒÙ† Ú©Ø§Ø± ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø§Ø³ØªÂ».</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û´ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ·ï¸ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù‚Ø´</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø¨Ø±Ú†Ø³Ø¨â€ŒØ²Ø¯Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù‚Ø´ (Ø¯Ø§Ù†Ø´Ø¬ÙˆØŒ Ø´Ø§ØºÙ„ØŒ ÙˆØ§Ù„Ø¯ØŒ ÙˆØ±Ø²Ø´Ú©Ø§Ø±) Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø¯Ø± Ù‡Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ø¯Ø§Ù†ÛŒ Ø³Ø±Ø§Øº Ú©Ø¯Ø§Ù… Ø¨Ø±ÙˆÛŒ.</p>
            <p style="margin-top: 8px;">Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø§ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† ØªÙ…Ø±Ú©Ø² Ú©Ø§Ø± Ú©Ù†ÛŒ. ÙˆÙ‚ØªÛŒ Ø®Ø³ØªÙ‡â€ŒØ§ÛŒØŒ Ø³Ø±Ø§Øº Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø¨Ú©â€ŒØªØ± Ø¨Ø±Ùˆ.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Ûµ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ—‘ï¸ Ø­Ø°Ùâ€ŒÚ©Ø±Ø¯Ù† Ù‡Ù… Ø¨Ø®Ø´ÛŒ Ø§Ø² ÙØ±Ù…ÙˆÙ„ Ø§Ø³Øª</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª Ù‡Ø± Ú©Ø§Ø±ÛŒ Ú©Ù‡ ÙˆØ§Ø±Ø¯ Ù„ÛŒØ³Øª Ø´Ø¯Ù‡ ØªØ§ Ø§Ø¨Ø¯ Ø¢Ù†Ø¬Ø§ Ø¨Ù…Ø§Ù†Ø¯.</p>
            <p style="margin-top: 8px;">Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ú©Ø§Ø± Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ Ø´Ø¬Ø§Ø¹Ø§Ù†Ù‡ Ø¨Ú¯ÙˆÛŒÛŒ: Â«Ø§ÛŒÙ† Ú©Ø§Ø± Ø¯ÛŒÚ¯Ø± Ø¨Ø±Ø§ÛŒÙ… Ù…Ù‡Ù… Ù†ÛŒØ³ØªÂ» Ùˆ Ø¢Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒ.</p>
            <p style="margin-top: 8px;">ÙØ±Ù…ÙˆÙ„Ù Ø®ÙˆØ¨ØŒ ÙÙ‚Ø· Ø§Ø¶Ø§ÙÙ‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯Ø› <strong>Ú©Ù… Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</strong></p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û¶ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ§¹ ØªÙ…ÛŒØ² Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ† Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ù„ÛŒØ³Øª Ù…Ø±Ø¬Ø¹ ØªÙˆ Ù…Ø«Ù„ ÛŒÚ© Â«Ù…ØºØ² Ø¯ÙˆÙ…Â» Ø§Ø³Øª. Ø§Ú¯Ø± Ø¢Ù† Ø±Ø§ Ù‡Ø± Ø§Ø² Ú¯Ø§Ù‡ÛŒ ØªÙ…ÛŒØ² Ù†Ú©Ù†ÛŒØŒ Ù¾Ø± Ø§Ø² Ú†ÛŒØ²Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ùˆ Ø¨ÛŒâ€ŒÙØ§ÛŒØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
            <p style="margin-top: 8px;">Ù‡Ø± Ú†Ù†Ø¯ ÙˆÙ‚Øª ÛŒÚ©â€ŒØ¨Ø§Ø±ØŒ Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆÙ‚Øª Ø¨Ú¯Ø°Ø§Ø± Ùˆ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ø±Ø§ Ú©Ù‡ Ø¯ÛŒÚ¯Ø± Ø¨Ø±Ø§ÛŒØª Ù…Ù‡Ù… Ù†ÛŒØ³ØªÙ†Ø¯ØŒ Ù¾Ø§Ú© ÛŒØ§ Ø¨Ù‡ Â«Ø±ÙˆØ²ÛŒ Ø±ÙˆØ²Ú¯Ø§Ø±ÛŒÂ» Ù…Ù†ØªÙ‚Ù„ Ú©Ù†.</p>
          </div>
        </div>
        
        <!-- Ù†Ú©ØªÙ‡ Ø±ÛŒØ² Û· -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ’š ÙØ±Ù…ÙˆÙ„ Ø®Ø¯Ù…ØªÚ©Ø§Ø± ØªÙˆØ³ØªØŒ Ù†Ù‡ Ø±Ø¦ÛŒØ³Øª</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p>Ø§ÛŒÙ† ÙØ±Ù…ÙˆÙ„ Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª Ø±Ø¦ÛŒØ³ ØªÙˆ Ø¨Ø§Ø´Ø¯Ø› Ù‚Ø±Ø§Ø± Ø§Ø³Øª <strong>Ø®Ø¯Ù…ØªÚ©Ø§Ø± ØªÙˆ</strong> Ø¨Ø§Ø´Ø¯.</p>
            <p style="margin-top: 8px;">Ù‡Ø±Ø¬Ø§ Ø¯ÛŒØ¯ÛŒ ÛŒÚ© Ù‚Ø§Ù†ÙˆÙ†ØŒ Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø§ÛŒÙ†â€ŒÚ©Ù‡ Ú©Ù…Ú© Ú©Ù†Ø¯ØŒ ØªÙˆ Ø±Ø§ ÙÙ„Ø¬ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:</p>
            <p>â€¢ ÛŒÚ© Ù‚Ø¯Ù… Ø¨Ø±Ú¯Ø±Ø¯ Ø¹Ù‚Ø¨</p>
            <p>â€¢ Ø³Ø¨Ú©â€ŒØªØ±Ø´ Ú©Ù†</p>
            <p>â€¢ Ù†Ø³Ø®Ù‡â€ŒØ§ÛŒ Ø¨Ø³Ø§Ø² Ú©Ù‡ Ø¨Ø§ Ø²Ù†Ø¯Ú¯ÛŒ ØªÙˆ Ø¬ÙˆØ±ØªØ± Ø§Ø³Øª</p>
            <p style="margin-top: 8px;">Ù…Ù‡Ù…ØŒ <strong>Ù¾ÛŒØ´Ø±ÙØª Ù¾ÛŒÙˆØ³ØªÙ‡</strong> Ø§Ø³ØªØŒ Ù†Ù‡ Ø§Ø¬Ø±Ø§ÛŒ Ú©Ø§Ù…Ù„ Ùˆ Ø¨ÛŒâ€ŒÙ†Ù‚Øµ ÙØ±Ù…ÙˆÙ„.</p>
          </div>
        </div>
        
        <!-- Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙˆÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ -->
        <div class="card" style="background: var(--secondary-light); border: none; margin-top: 16px;">
          <h3 style="font-size: 0.95rem; font-weight: 700;">ğŸ§  Ø§ØµÙˆÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Ùˆ Ø±ÙØªØ§Ø±Ø´Ù†Ø§Ø³ÛŒ</h3>
          <p style="font-size: 0.8rem; color: var(--text2);">Ø¹Ù„Ù… Ù¾Ø´Øª Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ…</p>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û± -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸª Ù‡ÙˆÛŒØª Ùˆ Ø¹Ø§Ø¯Øª</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Identity-Based Habits (James Clear):</strong></p>
            <p>Ø¨Ù‡ Ø¬Ø§ÛŒ Â«Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… ÙˆØ±Ø²Ø´ Ú©Ù†Ù…Â»ØŒ Ø¨Ú¯Ùˆ Â«Ù…Ù† Ø¢Ø¯Ù…ÛŒ Ù‡Ø³ØªÙ… Ú©Ù‡ Ø³Ù„Ø§Ù…ØªÛŒ Ø¨Ø±Ø§ÛŒØ´ Ù…Ù‡Ù… Ø§Ø³ØªÂ».</p>
            <p style="margin-top: 8px;">ØªØºÛŒÛŒØ± Ù‡ÙˆÛŒØªØŒ ØªØºÛŒÛŒØ± Ø±ÙØªØ§Ø± Ø±Ø§ Ø¢Ø³Ø§Ù†â€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ÙˆÙ‚ØªÛŒ Ø®ÙˆØ¯Øª Ø±Ø§ Ù†ÙˆØ¹ÛŒ Ø¢Ø¯Ù… Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒØŒ Ø±ÙØªØ§Ø±Ù‡Ø§ÛŒØª Ø®ÙˆØ¯Ø¨Ù‡â€ŒØ®ÙˆØ¯ Ù‡Ù…Ø³Ùˆ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û² -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ’ Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§ Ùˆ Ù…Ø¹Ù†Ø§</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Self-Concordance Theory:</strong></p>
            <p>Ù‡Ø¯Ùâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ø§ Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙˆ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ù¾ÛŒÚ¯ÛŒØ±ÛŒâ€ŒØ´Ø§Ù† Ø±Ø§Ø­Øªâ€ŒØªØ± Ø§Ø³Øª Ùˆ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡Ø´Ø§Ù† Ø±Ø¶Ø§ÛŒØª Ø¨ÛŒØ´ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
            <p style="margin-top: 8px;">ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒØª Ø¨Ù‡ Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§ÛŒØª ÙˆØµÙ„ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ø§Ù†Ú¯ÛŒØ²Ù‡â€ŒØ§Øª Ø¯Ø±ÙˆÙ†ÛŒâ€ŒØªØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û³ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ”— Ø¹Ø§Ø¯Øªâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú©</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Tiny Habits (BJ Fogg):</strong></p>
            <p>ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±ÛŒ Ø±Ø§ Ø®Ù†Ø¯Ù‡â€ŒØ¯Ø§Ø± Ú©ÙˆÚ†Ú© Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Ù…Ù‚Ø§ÙˆÙ…Øª Ø°Ù‡Ù†ÛŒâ€ŒØ§Øª Ø§Ø² Ø¨ÛŒÙ† Ù…ÛŒâ€ŒØ±ÙˆØ¯.</p>
            <p style="margin-top: 8px;">Â«ÙÙ‚Ø· ÙØ§ÛŒÙ„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†Â» Ø¨Ø³ÛŒØ§Ø± Ø¢Ø³Ø§Ù†â€ŒØªØ± Ø§Ø² Â«Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡ Ø¨Ù†ÙˆÛŒØ³Â» Ø§Ø³Øª.</p>
            <p style="margin-top: 8px;"><strong>ÙØ±Ù…ÙˆÙ„:</strong> Ø¨Ø¹Ø¯ Ø§Ø² [Ø¹Ø§Ø¯Øª Ù‚Ø¯ÛŒÙ…ÛŒ]ØŒ ÙÙ‚Ø· [Ø¹Ø§Ø¯Øª Ú©ÙˆÚ†Ú© Ø¬Ø¯ÛŒØ¯].</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û´ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>âš¡ Ø§Ú¯Ø±... Ø¢Ù†Ú¯Ø§Ù‡...</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Implementation Intentions (Peter Gollwitzer):</strong></p>
            <p>ØªØ­Ù‚ÛŒÙ‚Ø§Øª Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ø³Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ø² Ù‚Ø¨Ù„ Â«Ø§Ú¯Ø±-Ø¢Ù†Ú¯Ø§Ù‡Â» ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŒ Û²-Û³ Ø¨Ø±Ø§Ø¨Ø± Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ Ù‡Ø¯Ù Ù…ÛŒâ€ŒØ±Ø³Ù†Ø¯!</p>
            <p style="margin-top: 8px;">Ù…Ø«Ø§Ù„: Ø§Ú¯Ø± Ø³Ø§Ø¹Øª Û¹ Ø´Ø¨ Ø´Ø¯ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ ÙØ±Ø¯Ø§ Ø±Ø§ Ù†Ù†ÙˆØ´ØªÙ…ØŒ Ø¢Ù†Ú¯Ø§Ù‡ ÙÙ‚Ø· Û³ Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆÙ‚Øª Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ù….</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Ûµ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>â­ WOOP</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Mental Contrasting (Gabriele Oettingen):</strong></p>
            <p>ÙÙ‚Ø· ØªØ¬Ø³Ù… Ù…Ø«Ø¨Øª Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª! Ø¨Ø§ÛŒØ¯ Ù…ÙˆØ§Ù†Ø¹ Ø±Ø§ Ù‡Ù… Ø¨Ø¨ÛŒÙ†ÛŒ Ùˆ Ø¨Ø±Ø§ÛŒØ´Ø§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒ.</p>
            <p style="margin-top: 8px;"><strong>W</strong>ish (Ø¢Ø±Ø²Ùˆ) â†’ <strong>O</strong>utcome (Ù†ØªÛŒØ¬Ù‡) â†’ <strong>O</strong>bstacle (Ù…Ø§Ù†Ø¹) â†’ <strong>P</strong>lan (Ø¨Ø±Ù†Ø§Ù…Ù‡)</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û¶ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ’š Ø®ÙˆØ¯Ø´ÙÙ‚ØªÛŒ</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Self-Compassion (Kristin Neff):</strong></p>
            <p>Ø³Ø±Ø²Ù†Ø´ Ú©Ø±Ø¯Ù† Ø®ÙˆØ¯Øª ÙˆÙ‚ØªÛŒ Ø¹Ù‚Ø¨ Ù…ÛŒâ€ŒØ§ÙØªÛŒØŒ Ú©Ù…Ú©ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯Ø› Ø¨Ù„Ú©Ù‡ Ø¨Ø¯ØªØ±Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
            <p style="margin-top: 8px;">Ø¨Ø§ Ø®ÙˆØ¯Øª Ù…Ø«Ù„ ÛŒÚ© Ø¯ÙˆØ³Øª Ø®ÙˆØ¨ Ø±ÙØªØ§Ø± Ú©Ù†. Â«Ø§Ù…Ø±ÙˆØ² Ù†Ø´Ø¯ØŒ ÙØ±Ø¯Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù….Â»</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û· -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>â° Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†Ø±Ú˜ÛŒ</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Chronotype Research:</strong></p>
            <p>Ù‡Ø± Ú©Ø³ÛŒ ÛŒÚ© Ø±ÛŒØªÙ… Ø´Ø¨Ø§Ù†Ù‡â€ŒØ±ÙˆØ²ÛŒ Ø¯Ø§Ø±Ø¯. Ú©Ø§Ø± Ú©Ø±Ø¯Ù† <strong>Ø¨Ø§</strong> Ø§ÛŒÙ† Ø±ÛŒØªÙ…ØŒ Ù†Ù‡ Ø¹Ù„ÛŒÙ‡â€ŒØ§Ø´ØŒ Ø¨Ù‡Ø±Ù‡â€ŒÙˆØ±ÛŒ Ø±Ø§ Ú†Ù†Ø¯ Ø¨Ø±Ø§Ø¨Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
            <p style="margin-top: 8px;">Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø®Øª Ø±Ø§ ÙˆÙ‚ØªÛŒ Ø§Ù†Ø±Ú˜ÛŒ Ø¯Ø§Ø±ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡ØŒ Ù†Ù‡ ÙˆÙ‚ØªÛŒ Ø®Ø³ØªÙ‡â€ŒØ§ÛŒ.</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û¸ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ”„ Ú†Ø±Ø®Ù‡ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ PDCA</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Plan-Do-Check-Act:</strong></p>
            <p>Ø¨Ù‡Ø¨ÙˆØ¯ Ù…Ø³ØªÙ…Ø± Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù…Ø±ÙˆØ± Ùˆ ØªÙ†Ø¸ÛŒÙ…. Ù‡Ø± Ø±ÙˆØ² Ú©Ù…ÛŒ Ø¨Ù‡ØªØ±.</p>
            <p style="margin-top: 8px;">â€¢ <strong>Plan:</strong> Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø±ÛŒØ²</p>
            <p>â€¢ <strong>Do:</strong> Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡</p>
            <p>â€¢ <strong>Check:</strong> Ù…Ø±ÙˆØ± Ú©Ù† Ú†Ù‡ Ø´Ø¯</p>
            <p>â€¢ <strong>Act:</strong> ØªÙ†Ø¸ÛŒÙ… Ú©Ù† Ø¨Ø±Ø§ÛŒ Ø¯ÙØ¹Ù‡ Ø¨Ø¹Ø¯</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û¹ -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ§  Ø¨Ø§Ø± Ø´Ù†Ø§Ø®ØªÛŒ</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Zeigarnik Effect:</strong></p>
            <p>Ø°Ù‡Ù† Ù…Ø§ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù†Ø§ØªÙ…Ø§Ù… Ø±Ø§ Ù…Ø¯Ø§Ù… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ù…ØµØ±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
            <p style="margin-top: 8px;">Ù†ÙˆØ´ØªÙ† Ø±ÙˆÛŒ Ú©Ø§ØºØ° (ÛŒØ§ Ø§ÛŒÙ†Ø¬Ø§) Ø§ÛŒÙ† Ø­Ù„Ù‚Ù‡ Ø±Ø§ Ù…ÛŒâ€ŒØ¨Ù†Ø¯Ø¯ Ùˆ Ø°Ù‡Ù†Øª Ø±Ø§ Ø¢Ø²Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
          </div>
        </div>
        
        <!-- Ø§ØµÙ„ Ú©ÙˆÚ†ÛŒÙ†Ú¯ Û±Û° -->
        <div class="accordion" onclick="this.classList.toggle('open')">
          <div class="accordion-header"><span>ğŸ Ù¾Ø§Ø¯Ø§Ø´ ÙÙˆØ±ÛŒ</span><span class="accordion-icon">â–¼</span></div>
          <div class="accordion-body">
            <p><strong>Temporal Discounting:</strong></p>
            <p>Ù…ØºØ² Ù…Ø§ Ù¾Ø§Ø¯Ø§Ø´â€ŒÙ‡Ø§ÛŒ ÙÙˆØ±ÛŒ Ø±Ø§ Ø¨Ù‡ Ù¾Ø§Ø¯Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ ØªØ±Ø¬ÛŒØ­ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
            <p style="margin-top: 8px;">Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ú©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ù‡ Ù‚Ø¯Ù…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø¨Ø´Ú©Ù†ÛŒ ØªØ§ Ù‡Ø± Ø¨Ø§Ø± Ø­Ø³ Ù…ÙˆÙÙ‚ÛŒØª Ùˆ Ù¾Ø§Ø¯Ø§Ø´ Ø¨Ú¯ÛŒØ±ÛŒ.</p>
          </div>
        </div>
      </div>
      
    </main>
    
    <nav class="nav hidden" id="nav">
      <div class="nav-item active" data-page="today">
        <div class="nav-icon">ğŸ“…</div>
        <div class="nav-label">Ø§Ù…Ø±ÙˆØ²</div>
      </div>
      <div class="nav-item" data-page="all">
        <div class="nav-icon">ğŸ“‹</div>
        <div class="nav-label">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§</div>
      </div>
      
      <div class="nav-fab-wrapper">
        <button class="nav-fab" onclick="showTaskModal()">+</button>
      </div>

      <div class="nav-item" data-page="projects">
        <div class="nav-icon">ğŸ¯</div>
        <div class="nav-label">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</div>
      </div>
      <div class="nav-item" data-page="habits">
        <div class="nav-icon">ğŸ”—</div>
        <div class="nav-label">Ø¹Ø§Ø¯Øª</div>
      </div>
    </nav>
  </div>

<script>
const STORAGE_KEY = 'todo_formula_v12';

let data = {
  user: { name: '', values: [], roles: [], identity: '', energy: 'afternoon' },
  tasks: [],
  inbox: [],
  habits: [],
  ifThens: [],
  woops: [],
  projects: [],
  brainDumps: [],
  dailyReviews: [],
  weeklyReviews: [],
  streak: 0,
  totalDays: 0,
  activeDates: [],
  lastActive: null,
  setupDone: false,
  theme: 'light'
};

let tempValues = [];
let tempRoles = [];
let tempObstacles = [];
let currentStep = 1;
let currentList = 'today';
let selectedImportance = 'medium';
let selectedUrgency = 'medium';

// Storage
function saveData() {
  try {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    if ('indexedDB' in window) {
      const req = indexedDB.open('TodoFormulaDB', 1);
      req.onupgradeneeded = e => e.target.result.createObjectStore('backup');
      req.onsuccess = e => {
        try {
          const tx = e.target.result.transaction('backup', 'readwrite');
          tx.objectStore('backup').put(JSON.stringify(data), 'data');
        } catch(err) {}
      };
    }
  } catch(e) { console.error('Save error:', e); }
}

function loadData() {
  try {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) {
      const parsed = JSON.parse(stored);
      data = { ...data, ...parsed };
      if (parsed.user) data.user = { ...data.user, ...parsed.user };
      return true;
    }
  } catch(e) { console.error('Load error:', e); }
  return false;
}

// Utils
function showToast(msg) {
  document.querySelectorAll('.toast').forEach(t => t.remove());
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 2500);
}

function toPersian(n) {
  return n.toString().replace(/\d/g, d => 'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[d]);
}

function getToday() { return new Date().toISOString().split('T')[0]; }

function getPersianDate() {
  return new Date().toLocaleDateString('fa-IR', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
}

function showConfetti() {
  const colors = ['#10B981', '#6366F1', '#F59E0B', '#EF4444', '#EC4899'];
  for (let i = 0; i < 20; i++) {
    const c = document.createElement('div');
    c.style.cssText = `position:fixed;width:10px;height:10px;background:${colors[Math.floor(Math.random()*colors.length)]};left:${Math.random()*100}%;top:-10px;border-radius:${Math.random()>0.5?'50%':'2px'};z-index:9999;pointer-events:none;animation:confetti ${2+Math.random()*2}s linear forwards`;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
  }
}

// Theme
function applyTheme() {
  document.documentElement.setAttribute('data-theme', data.theme);
  const btnSettings = document.getElementById('themeBtnSettings');
  if (btnSettings) btnSettings.textContent = data.theme === 'dark' ? 'â˜€ï¸ Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù†' : 'ğŸŒ™ Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©';
}

function toggleTheme() {
  data.theme = data.theme === 'light' ? 'dark' : 'light';
  applyTheme();
  saveData();
}

// Priority selection
function selectImportance(level) {
  selectedImportance = level;
  document.querySelectorAll('#importanceChips .priority-chip').forEach(c => {
    c.classList.toggle('selected', c.dataset.v === level);
  });
}

function selectUrgency(level) {
  selectedUrgency = level;
  document.querySelectorAll('#urgencyChips .priority-chip').forEach(c => {
    c.classList.toggle('selected', c.dataset.v === level);
  });
}

// Navigation
function goToPage(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.querySelector(`.nav-item[data-page="${page}"]`)?.classList.add('active');
  document.getElementById('main').scrollTop = 0;
  
  if (page === 'today') updateTodayPage();
  if (page === 'all') updateAllPage();
  if (page === 'habits') updateHabitsPage();
  if (page === 'brain') updateBrainPage();
  if (page === 'projects') updateProjectsPage();
  if (page === 'settings') {
    updateSettingsPage();
    applyTheme();
  }
}

function showMainApp() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-today').classList.add('active');
  document.getElementById('header').classList.remove('hidden');
  document.getElementById('nav').classList.remove('hidden');
  updateTodayPage();
}

// Backup
function showBackupModal() { document.getElementById('backupModal').classList.add('show'); }
function hideBackupModal() { document.getElementById('backupModal').classList.remove('show'); }

function downloadBackup() {
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'todo-formula-backup.json';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  showToast('âœ… ÙØ§ÛŒÙ„ Ø¨Ú©Ø§Ù¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯');
  hideBackupModal();
}

function copyBackup() {
  navigator.clipboard.writeText(JSON.stringify(data, null, 2))
    .then(() => showToast('âœ… Ú©Ù¾ÛŒ Ø´Ø¯'))
    .catch(() => showToast('âŒ Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ'));
}

function handleImport(input) {
  const file = input.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = e => {
    try {
      const parsed = JSON.parse(e.target.result);
      if (parsed.user || parsed.tasks) {
        data = { ...data, ...parsed };
        if (parsed.user) data.user = { ...data.user, ...parsed.user };
        saveData();
        showToast('âœ… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯');
        setTimeout(() => location.reload(), 1000);
      }
    } catch(err) { showToast('âŒ ÙØ§ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±'); }
  };
  reader.readAsText(file);
}

// Onboarding
function startSetup() {
  document.getElementById('page-start').classList.remove('active');
  document.getElementById('page-setup').classList.add('active');
  updateDots();
}

function updateDots() {
  const dots = document.getElementById('dots');
  dots.innerHTML = '';
  for (let i = 1; i <= 5; i++) {
    const dot = document.createElement('div');
    dot.className = 'dot' + (i === currentStep ? ' active' : i < currentStep ? ' done' : '');
    dots.appendChild(dot);
  }
}

function nextStep(step) {
  if (step === 2) data.user.name = document.getElementById('inputName').value.trim() || 'Ø¯ÙˆØ³Øª';
  if (step === 3) data.user.values = [...tempValues];
  if (step === 4) data.user.roles = [...tempRoles];
  if (step === 5) updateIdentityPreview();
  
  document.getElementById('step-' + currentStep).classList.add('hidden');
  document.getElementById('step-' + step).classList.remove('hidden');
  currentStep = step;
  updateDots();
  saveData();
}

function prevStep(step) {
  document.getElementById('step-' + currentStep).classList.add('hidden');
  document.getElementById('step-' + step).classList.remove('hidden');
  currentStep = step;
  updateDots();
}

function addCustomValue() {
  const input = document.getElementById('customValue');
  const v = input.value.trim();
  if (!v || tempValues.includes(v)) return;
  tempValues.push(v);
  const chip = document.createElement('span');
  chip.className = 'chip selected';
  chip.dataset.v = v;
  chip.textContent = v;
  chip.onclick = () => toggleChip(chip, tempValues);
  document.getElementById('valuesChips').appendChild(chip);
  input.value = '';
}

function addCustomRole() {
  const input = document.getElementById('customRole');
  const v = input.value.trim();
  if (!v || tempRoles.includes(v)) return;
  tempRoles.push(v);
  const chip = document.createElement('span');
  chip.className = 'chip selected';
  chip.dataset.v = v;
  chip.textContent = v;
  chip.onclick = () => toggleChip(chip, tempRoles);
  document.getElementById('rolesChips').appendChild(chip);
  input.value = '';
}

function toggleChip(chip, arr) {
  const v = chip.dataset.v;
  chip.classList.toggle('selected');
  if (chip.classList.contains('selected')) {
    if (!arr.includes(v)) arr.push(v);
  } else {
    const idx = arr.indexOf(v);
    if (idx > -1) arr.splice(idx, 1);
  }
}

function updateIdentityPreview() {
  const name = data.user.name || 'Ø¯ÙˆØ³Øª';
  const values = data.user.values.slice(0, 2).join(' Ùˆ ') || 'Ù¾ÛŒØ´Ø±ÙØª';
  const text = `Ù…Ù† ${name} Ù‡Ø³ØªÙ… Ú©Ù‡ ${values} Ø¨Ø±Ø§Ù… Ù…Ù‡Ù…Ù‡ Ùˆ Ù‚Ø¯Ù…â€ŒØ¨Ù‡â€ŒÙ‚Ø¯Ù… Ù¾ÛŒØ´ Ù…ÛŒØ±Ù….`;
  document.getElementById('identityPreview').innerHTML = `Â«${text}Â»`;
  document.getElementById('inputIdentity').value = text;
  data.user.identity = text;
}

function finishSetup() {
  data.user.identity = document.getElementById('inputIdentity').value;
  data.setupDone = true;
  data.lastActive = getToday();
  data.streak = 1;
  data.totalDays = 1;
  data.activeDates = [getToday()];
  saveData();
  
  document.getElementById('page-setup').classList.remove('active');
  showMainApp();
  showToast('Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ! ğŸ’š');
  showConfetti();
}

// Today Page
function updateTodayPage() {
  document.getElementById('userName').textContent = data.user.name || 'Ø¯ÙˆØ³Øª';
  document.getElementById('todayDate').textContent = getPersianDate();
  
  const todayTasks = data.tasks.filter(t => t.list === 'today' && t.date === getToday());
  const quickTasks = data.tasks.filter(t => t.list === 'quick');
  const doneTasks = todayTasks.filter(t => t.completed);
  
  document.getElementById('statToday').textContent = toPersian(todayTasks.length) + '/Û·';
  document.getElementById('statDone').textContent = toPersian(doneTasks.length);
  document.getElementById('statQuick').textContent = toPersian(quickTasks.length);
  document.getElementById('statStreak').textContent = toPersian(data.streak) + 'ğŸ”¥';
  
  const totalMinutes = todayTasks.reduce((sum, t) => sum + (t.adjustedMinutes || 0), 0);
  const hours = Math.round(totalMinutes / 60 * 10) / 10;
  const percent = Math.min(100, (hours / 8) * 100);
  
  document.getElementById('capacityValue').textContent = `${toPersian(hours)} Ø§Ø² Û¸ Ø³Ø§Ø¹Øª`;
  document.getElementById('capacityValue').className = 'capacity-value' + (percent > 100 ? ' danger' : percent > 80 ? ' warning' : '');
  document.getElementById('capacityProgress').style.width = percent + '%';
  
  document.getElementById('todayCount').textContent = toPersian(todayTasks.length);
  document.getElementById('quickCount').textContent = toPersian(quickTasks.length);
  
  updateRoleSelect();
  renderTasks();
  updateStreak();
}

function updateRoleSelect() {
  const roleSelect = document.getElementById('taskRole');
  roleSelect.innerHTML = '<option value="">Ø¨Ø¯ÙˆÙ† Ù†Ù‚Ø´</option>' + 
    data.user.roles.map(r => `<option value="${r}">${r}</option>`).join('');
}

function updateProjectSelect() {
  const projectSelect = document.getElementById('taskProject');
  if(!data.projects) data.projects = [];
  projectSelect.innerHTML = '<option value="">-- Ø¨Ø¯ÙˆÙ† Ù¾Ø±ÙˆÚ˜Ù‡ --</option>' + 
    data.projects.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
}

function switchList(list) {
  currentList = list;
  document.querySelectorAll('.list-tab').forEach(t => t.classList.toggle('active', t.dataset.list === list));
  document.querySelectorAll('.task-list').forEach(l => l.classList.add('hidden'));
  document.getElementById(list + 'List').classList.remove('hidden');
  renderTasks();
}

function renderTasks() {
  const today = getToday();
  let tasks;
  let container;
  
  if (currentList === 'today') {
    tasks = data.tasks.filter(t => t.list === 'today' && t.date === today);
    container = document.getElementById('todayList');
  } else if (currentList === 'quick') {
    tasks = data.tasks.filter(t => t.list === 'quick');
    container = document.getElementById('quickList');
  } else {
    tasks = data.tasks.filter(t => t.list === 'master');
    container = document.getElementById('masterList');
  }
  
  if (!tasks.length) {
    container.innerHTML = `<div class="empty"><div class="empty-icon">${currentList === 'quick' ? 'âš¡' : 'ğŸ“‹'}</div><div class="empty-text">Ù‡Ù†ÙˆØ² Ú©Ø§Ø±ÛŒ Ù†Ø¯Ø§Ø±ÛŒ</div></div>`;
    return;
  }
  
  // Sort by importance then urgency
  const order = { high: 0, medium: 1, low: 2 };
  tasks.sort((a, b) => (order[a.importance] || 1) - (order[b.importance] || 1));
  
  container.innerHTML = tasks.map(task => {
    const classes = ['task'];
    if (task.completed) classes.push('done');
    if (task.importance) classes.push('importance-' + task.importance);
    if (task.blocked) classes.push('blocked');
    
    const importanceEmoji = task.importance === 'high' ? 'ğŸ”´' : task.importance === 'low' ? 'ğŸŸ¢' : 'ğŸŸ¡';
    const urgencyEmoji = task.urgency === 'high' ? 'ğŸƒ' : task.urgency === 'low' ? 'ğŸ¢' : 'ğŸš¶';
    
    return `
      <div class="${classes.join(' ')}" onclick="editTask('${task.id}')">
        <div class="task-check ${task.completed ? 'checked' : ''}" onclick="event.stopPropagation(); toggleTask('${task.id}')">${task.completed ? 'âœ“' : ''}</div>
        <div class="task-content">
          <div class="task-title">${task.title}</div>
          <div class="task-meta">
            <span class="tag">${importanceEmoji}</span>
            <span class="tag">${urgencyEmoji}</span>
            ${task.blocked ? '<span class="tag orange">â³ Ù…Ù†ØªØ¸Ø±</span>' : ''}
            ${task.role ? `<span class="tag blue">${task.role}</span>` : ''}
            ${task.adjustedMinutes ? `<span class="tag">${toPersian(task.adjustedMinutes)}Ø¯</span>` : ''}
          </div>
        </div>
        <div class="task-actions">
          ${task.list === 'master' ? `<button class="task-btn" onclick="event.stopPropagation(); moveToToday('${task.id}')">ğŸ“…</button>` : ''}
          <button class="task-btn" onclick="event.stopPropagation(); deleteTask('${task.id}')">ğŸ—‘ï¸</button>
        </div>
      </div>
    `;
  }).join('');
}

// Task Modal
function showTaskModal(defaultList) {
  document.getElementById('editTaskId').value = '';
  document.getElementById('taskModalTitle').textContent = 'â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯';
  document.getElementById('taskTitle').value = '';
  document.getElementById('taskOutcome').value = '';
  document.getElementById('taskNotes').value = '';
  document.getElementById('taskTime').value = '30';
  document.getElementById('taskDeadline').value = getToday();
  document.getElementById('taskBlocked').checked = false;
  document.getElementById('blockedDeadline').value = '';
  document.getElementById('blockedDeadlineWrap').classList.add('hidden');
  document.getElementById('taskList').value = defaultList || 'today';
  
  selectImportance('medium');
  selectUrgency('medium');
  updateRoleSelect();
  updateProjectSelect(); // Populate project dropdown
  document.getElementById('taskProject').value = '';

  const todayTasks = data.tasks.filter(t => t.list === 'today' && t.date === getToday());
  if (todayTasks.length >= 7 && !defaultList) {
    showToast('âš ï¸ Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø± Ø¯Ø± Ø±ÙˆØ²! Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.');
    document.getElementById('taskList').value = 'master';
  }
  
  document.getElementById('taskModal').classList.add('show');
}

function hideTaskModal() {
  document.getElementById('taskModal').classList.remove('show');
}

function editTask(id) {
  const task = data.tasks.find(t => t.id === id);
  if (!task) return;
  
  document.getElementById('editTaskId').value = id;
  document.getElementById('taskModalTitle').textContent = 'âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±';
  document.getElementById('taskTitle').value = task.title;
  document.getElementById('taskOutcome').value = task.outcome || '';
  document.getElementById('taskNotes').value = task.notes || '';
  document.getElementById('taskTime').value = task.estimatedMinutes || 30;
  document.getElementById('taskDeadline').value = task.deadline || '';
  document.getElementById('taskBlocked').checked = task.blocked || false;
  document.getElementById('blockedDeadline').value = task.blockedDeadline || '';
  document.getElementById('blockedDeadlineWrap').classList.toggle('hidden', !task.blocked);
  document.getElementById('taskList').value = task.list;
  
  selectImportance(task.importance || 'medium');
  selectUrgency(task.urgency || 'medium');
  updateRoleSelect();
  updateProjectSelect();
  document.getElementById('taskRole').value = task.role || '';
  document.getElementById('taskProject').value = task.projectId || '';
  
  document.getElementById('taskModal').classList.add('show');
}

function saveTask() {
  const title = document.getElementById('taskTitle').value.trim();
  if (!title) return showToast('Ø¹Ù†ÙˆØ§Ù† Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†');
  
  const editId = document.getElementById('editTaskId').value;
  const estimatedMinutes = parseInt(document.getElementById('taskTime').value) || 30;
  const listType = document.getElementById('taskList').value;
  
  // Check 7 task limit for today
  if (listType === 'today' && !editId) {
    const todayTasks = data.tasks.filter(t => t.list === 'today' && t.date === getToday());
    if (todayTasks.length >= 7) {
      showToast('âš ï¸ Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø±! Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.');
      return;
    }
  }
  
  const taskData = {
    title,
    outcome: document.getElementById('taskOutcome').value.trim(),
    notes: document.getElementById('taskNotes').value.trim(),
    estimatedMinutes,
    adjustedMinutes: Math.round(estimatedMinutes * 1.5),
    deadline: document.getElementById('taskDeadline').value,
    role: document.getElementById('taskRole').value,
    importance: selectedImportance,
    urgency: selectedUrgency,
    blocked: document.getElementById('taskBlocked').checked,
    blockedDeadline: document.getElementById('blockedDeadline').value,
    projectId: document.getElementById('taskProject').value,
    list: listType,
    date: listType === 'today' ? getToday() : null
  };
  
  if (editId) {
    const idx = data.tasks.findIndex(t => t.id === editId);
    if (idx > -1) {
      data.tasks[idx] = { ...data.tasks[idx], ...taskData };
    }
  } else {
    data.tasks.push({
      id: Date.now().toString(),
      ...taskData,
      completed: false,
      createdAt: new Date().toISOString()
    });
  }
  
  saveData();
  hideTaskModal();
  updateTodayPage();
  if (currentList === 'master') renderMasterList();
  showToast(editId ? 'âœ… ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯' : 'âœ… Ú©Ø§Ø± Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
}

function toggleTask(id) {
  const task = data.tasks.find(t => t.id === id);
  if (task) {
    task.completed = !task.completed;
    saveData();
    renderTasks();
    updateTodayPage();
    if (task.completed) {
      showConfetti();
      showToast('ğŸ‰ Ø¢ÙØ±ÛŒÙ†!');
    }
  }
}

function deleteTask(id) {
  if (!confirm('Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ø±ØŸ')) return;
  data.tasks = data.tasks.filter(t => t.id !== id);
  saveData();
  renderTasks();
  updateTodayPage();
  if (currentList === 'master') renderMasterList();
}

function moveToToday(id) {
  const todayTasks = data.tasks.filter(t => t.list === 'today' && t.date === getToday());
  if (todayTasks.length >= 7) {
    showToast('âš ï¸ Ø­Ø¯Ø§Ú©Ø«Ø± Û· Ú©Ø§Ø± Ø¯Ø± Ø±ÙˆØ²!');
    return;
  }
  
  const task = data.tasks.find(t => t.id === id);
  if (task) {
    task.list = 'today';
    task.date = getToday();
    saveData();
    renderMasterList();
    showToast('âœ… Ø¨Ù‡ Ø§Ù…Ø±ÙˆØ² Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯');
  }
}

function updateStreak() {
  const today = getToday();
  const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
  
  if (!data.activeDates.includes(today)) {
    data.activeDates.push(today);
    data.totalDays++;
  }
  
  if (data.lastActive === yesterday) {
    if (data.lastActive !== today) {
      data.streak++;
      data.lastActive = today;
    }
  } else if (data.lastActive !== today) {
    data.streak = 1;
    data.lastActive = today;
  }
  saveData();
}

// Blocked checkbox
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('taskBlocked')?.addEventListener('change', function() {
    document.getElementById('blockedDeadlineWrap').classList.toggle('hidden', !this.checked);
  });
});

// Daily Review
function saveDailyReview() {
  const good = document.getElementById('reviewGood').value.trim();
  const better = document.getElementById('reviewBetter').value.trim();
  const tomorrow = document.getElementById('reviewTomorrow').value.trim();
  
  if (!good && !better && !tomorrow) {
    showToast('Ø­Ø¯Ø§Ù‚Ù„ ÛŒÙ‡ Ú†ÛŒØ² Ø¨Ù†ÙˆÛŒØ³!');
    return;
  }
  
  data.dailyReviews.push({
    date: getToday(),
    good, better, tomorrow,
    createdAt: new Date().toISOString()
  });
  
  document.getElementById('reviewGood').value = '';
  document.getElementById('reviewBetter').value = '';
  document.getElementById('reviewTomorrow').value = '';
  
  saveData();
  showToast('âœ… Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ² Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// Brain Dump
function updateBrainPage() {
  renderBrainDumps();
}

function saveBrainDump() {
  const text = document.getElementById('brainDumpText').value.trim();
  if (!text) return showToast('Ú†ÛŒØ²ÛŒ Ø¨Ù†ÙˆÛŒØ³!');
  
  if (!data.brainDumps) data.brainDumps = [];
  data.brainDumps.push({
    id: Date.now().toString(),
    text,
    createdAt: new Date().toISOString()
  });
  
  saveData();
  document.getElementById('brainDumpText').value = '';
  renderBrainDumps();
  showToast('âœ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

function processBrainDump() {
  const text = document.getElementById('brainDumpText').value.trim();
  if (!text) return showToast('Ú†ÛŒØ²ÛŒ Ø¨Ù†ÙˆÛŒØ³!');
  
  const lines = text.split('\n').filter(l => l.trim());
  lines.forEach(line => {
    data.tasks.push({
      id: Date.now().toString() + Math.random(),
      title: line.trim(),
      outcome: '',
      notes: '',
      estimatedMinutes: 30,
      adjustedMinutes: 45,
      importance: 'medium',
      urgency: 'medium',
      blocked: false,
      completed: false,
      list: 'master',
      needsEdit: true,
      createdAt: new Date().toISOString()
    });
  });
  
  saveData();
  document.getElementById('brainDumpText').value = '';
  showToast(`âœ… ${toPersian(lines.length)} Ú©Ø§Ø± Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ (Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆÛŒØ±Ø§ÛŒØ´)`);
}

function renderBrainDumps() {
  const container = document.getElementById('brainDumpList');
  if (!data.brainDumps?.length) {
    container.innerHTML = `<div class="empty"><div class="empty-text">Ù‡Ù†ÙˆØ² ÛŒØ§Ø¯Ø¯Ø§Ø´ØªÛŒ Ù†Ø¯Ø§Ø±ÛŒ</div></div>`;
    return;
  }
  
  container.innerHTML = data.brainDumps.slice().reverse().map(item => `
    <div class="tiny-task">
      <span class="tiny-task-text">${item.text.substring(0, 50)}${item.text.length > 50 ? '...' : ''}</span>
      <button class="task-btn" onclick="deleteBrainDump('${item.id}')">ğŸ—‘ï¸</button>
    </div>
  `).join('');
}

function deleteBrainDump(id) {
  data.brainDumps = data.brainDumps.filter(b => b.id !== id);
  saveData();
  renderBrainDumps();
}

// All Tasks Page
function updateAllPage() {
  renderMasterList();
  updateWeekStats();
  renderStaleAndHistory();
}

function renderMasterList() {
  const container = document.getElementById('masterList');
  const tasks = data.tasks.filter(t => t.list === 'master');
  
  if (!tasks.length) {
    container.innerHTML = `<div class="empty"><div class="empty-icon">ğŸ“‹</div><div class="empty-text">Ù„ÛŒØ³Øª Ø§ØµÙ„ÛŒ Ø®Ø§Ù„ÛŒÙ‡</div></div>`;
    return;
  }
  
  const order = { high: 0, medium: 1, low: 2 };
  tasks.sort((a, b) => (order[a.importance] || 1) - (order[b.importance] || 1));
  
  container.innerHTML = tasks.map(task => {
    const importanceEmoji = task.importance === 'high' ? 'ğŸ”´' : task.importance === 'low' ? 'ğŸŸ¢' : 'ğŸŸ¡';
    return `
      <div class="task ${task.completed ? 'done' : ''} importance-${task.importance || 'medium'}" onclick="editTask('${task.id}')">
        <div class="task-check ${task.completed ? 'checked' : ''}" onclick="event.stopPropagation(); toggleTask('${task.id}')">${task.completed ? 'âœ“' : ''}</div>
        <div class="task-content">
          <div class="task-title">${task.title}</div>
          <div class="task-meta">
            <span class="tag">${importanceEmoji}</span>
            ${task.role ? `<span class="tag blue">${task.role}</span>` : ''}
          </div>
        </div>
        <div class="task-actions">
          <button class="task-btn" onclick="event.stopPropagation(); moveToToday('${task.id}')">ğŸ“…</button>
          <button class="task-btn" onclick="event.stopPropagation(); deleteTask('${task.id}')">ğŸ—‘ï¸</button>
        </div>
      </div>
    `;
  }).join('');
}

function updateWeekStats() {
  const weekStart = new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0];
  const weekTasks = data.tasks.filter(t => t.createdAt >= weekStart);
  const doneTasks = weekTasks.filter(t => t.completed);
  const uniqueDays = [...new Set(data.activeDates.filter(d => d >= weekStart))].length;
  const percent = weekTasks.length ? Math.round(doneTasks.length / weekTasks.length * 100) : 0;
  
  document.getElementById('wkDone').textContent = toPersian(doneTasks.length);
  document.getElementById('wkPlan').textContent = toPersian(weekTasks.length);
  document.getElementById('wkDays').textContent = toPersian(uniqueDays);
  document.getElementById('wkPercent').textContent = toPersian(percent) + 'Ùª';
}

function renderStaleAndHistory() {
  const weekStart = new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0];
  const stale = data.tasks.filter(t => !t.completed && t.list === 'master' && t.createdAt < weekStart);
  const container = document.getElementById('staleTasksList');
  
  if (!stale.length) {
    container.innerHTML = `<div class="empty"><div class="empty-text">Ú©Ø§Ø± Ú©Ù‡Ù†Ù‡â€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±ÛŒ ğŸ‘</div></div>`;
  } else {
    container.innerHTML = stale.slice(0, 5).map(t => `
      <div class="tiny-task">
        <span class="tiny-task-text">${t.title}</span>
        <button class="task-btn" onclick="deleteTask('${t.id}'); updateAllPage();">ğŸ—‘ï¸</button>
      </div>
    `).join('');
  }
  
  renderReviewHistory();
  setupObstacleChips();
}

function renderReviewHistory() {
  const container = document.getElementById('reviewHistory');
  const allReviews = [...data.dailyReviews, ...data.weeklyReviews]
    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
    .slice(0, 5);
  
  if (!allReviews.length) {
    container.innerHTML = `<div class="empty"><div class="empty-text">Ù‡Ù†ÙˆØ² Ù…Ø±ÙˆØ±ÛŒ Ù†Ø¯Ø§Ø±ÛŒ</div></div>`;
    return;
  }
  
  container.innerHTML = allReviews.map(r => `
    <div class="review-card">
      <h4>${r.date} ${r.experiment ? '(Ù‡ÙØªÚ¯ÛŒ)' : '(Ø±ÙˆØ²Ø§Ù†Ù‡)'}</h4>
      ${r.good ? `<p>âœ… ${r.good}</p>` : ''}
      ${r.better ? `<p>ğŸ¤” ${r.better}</p>` : ''}
      ${r.tomorrow ? `<p>ğŸ’¡ ${r.tomorrow}</p>` : ''}
      ${r.progress ? `<p>ğŸ“ˆ ${r.progress}</p>` : ''}
      ${r.experiment ? `<p>ğŸ§ª ${r.experiment}</p>` : ''}
    </div>
  `).join('');
}

function setupObstacleChips() {
  document.querySelectorAll('#obstacleChips .chip').forEach(c => {
    c.onclick = () => {
      c.classList.toggle('selected');
      const v = c.dataset.v;
      if (c.classList.contains('selected')) {
        if (!tempObstacles.includes(v)) tempObstacles.push(v);
      } else {
        const idx = tempObstacles.indexOf(v);
        if (idx > -1) tempObstacles.splice(idx, 1);
      }
    };
  });
}

function pruneOldTasks() {
  const weekStart = new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0];
  const before = data.tasks.length;
  data.tasks = data.tasks.filter(t => t.completed || t.createdAt >= weekStart);
  const after = data.tasks.length;
  saveData();
  updateAllPage();
  showToast(`âœ… ${toPersian(before - after)} Ú©Ø§Ø± Ù¾Ø§Ú© Ø´Ø¯`);
}

function saveWeeklyReview() {
  const progress = document.getElementById('weekProgress').value.trim();
  const experiment = document.getElementById('weekExperiment').value.trim();
  
  if (!progress && !experiment && !tempObstacles.length) {
    showToast('Ø­Ø¯Ø§Ù‚Ù„ ÛŒÙ‡ Ú†ÛŒØ² Ø¨Ù†ÙˆÛŒØ³!');
    return;
  }
  
  data.weeklyReviews.push({
    date: getToday(),
    progress,
    obstacles: [...tempObstacles],
    experiment,
    createdAt: new Date().toISOString()
  });
  
  document.getElementById('weekProgress').value = '';
  document.getElementById('weekExperiment').value = '';
  document.querySelectorAll('#obstacleChips .chip').forEach(c => c.classList.remove('selected'));
  tempObstacles = [];
  
  saveData();
  renderReviewHistory();
  showToast('âœ… Ù…Ø±ÙˆØ± Ù‡ÙØªÚ¯ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// Habits Page
function updateHabitsPage() {
  renderHabits();
  renderIfThens();
  renderWoops();
}

function renderHabits() {
  const container = document.getElementById('habitsList');
  if (!data.habits.length) { container.innerHTML = ''; return; }
  container.innerHTML = data.habits.map(h => `
    <div class="tiny-task">
      <span class="tiny-task-text">Ø¨Ø¹Ø¯ Ø§Ø² ${h.anchor} â†’ ${h.behavior}</span>
      <button class="task-btn" onclick="deleteHabit('${h.id}')">ğŸ—‘ï¸</button>
    </div>
  `).join('');
}

function addHabit() {
  const anchor = document.getElementById('habitAnchor').value.trim();
  const behavior = document.getElementById('habitBehavior').value.trim();
  if (!anchor || !behavior) return showToast('Ù‡Ø± Ø¯Ùˆ ÙÛŒÙ„Ø¯ Ø±Ùˆ Ù¾Ø± Ú©Ù†');
  
  data.habits.push({ id: Date.now().toString(), anchor, behavior });
  saveData();
  document.getElementById('habitAnchor').value = '';
  document.getElementById('habitBehavior').value = '';
  renderHabits();
  showToast('âœ… Ø¹Ø§Ø¯Øª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
}

function deleteHabit(id) {
  data.habits = data.habits.filter(h => h.id !== id);
  saveData();
  renderHabits();
}

function renderIfThens() {
  const container = document.getElementById('ifThenList');
  if (!data.ifThens.length) { container.innerHTML = ''; return; }
  container.innerHTML = data.ifThens.map(r => `
    <div class="tiny-task">
      <span class="tiny-task-text">Ø§Ú¯Ø± ${r.ifC} â†’ ${r.thenA}</span>
      <button class="task-btn" onclick="deleteIfThen('${r.id}')">ğŸ—‘ï¸</button>
    </div>
  `).join('');
}

function addIfThen() {
  const ifC = document.getElementById('ifCond').value.trim();
  const thenA = document.getElementById('thenAct').value.trim();
  if (!ifC || !thenA) return showToast('Ù‡Ø± Ø¯Ùˆ ÙÛŒÙ„Ø¯ Ø±Ùˆ Ù¾Ø± Ú©Ù†');
  
  data.ifThens.push({ id: Date.now().toString(), ifC, thenA });
  saveData();
  document.getElementById('ifCond').value = '';
  document.getElementById('thenAct').value = '';
  renderIfThens();
  showToast('âœ… Ù‚Ø§Ù†ÙˆÙ† Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
}

function deleteIfThen(id) {
  data.ifThens = data.ifThens.filter(r => r.id !== id);
  saveData();
  renderIfThens();
}

function renderWoops() {
  const container = document.getElementById('woopList');
  if (!data.woops?.length) { container.innerHTML = ''; return; }
  container.innerHTML = data.woops.map(w => `
    <div class="card" style="padding: 12px; margin-bottom: 8px;">
      <p style="font-size:0.85rem"><strong>ğŸŒŸ</strong> ${w.wish}</p>
      <p style="font-size:0.85rem"><strong>âœ¨</strong> ${w.outcome}</p>
      <p style="font-size:0.85rem"><strong>ğŸš§</strong> ${w.obstacle}</p>
      <p style="font-size:0.85rem"><strong>ğŸ“‹</strong> ${w.plan}</p>
      <button class="task-btn" onclick="deleteWoop('${w.id}')" style="margin-top: 6px;">ğŸ—‘ï¸</button>
    </div>
  `).join('');
}

function addWoop() {
  const wish = document.getElementById('woopW').value.trim();
  const outcome = document.getElementById('woopO').value.trim();
  const obstacle = document.getElementById('woopOb').value.trim();
  const plan = document.getElementById('woopP').value.trim();
  
  if (!wish || !plan) return showToast('Ø¢Ø±Ø²Ùˆ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ùˆ Ø­Ø¯Ø§Ù‚Ù„ Ø¨Ù†ÙˆÛŒØ³');
  
  if (!data.woops) data.woops = [];
  data.woops.push({ id: Date.now().toString(), wish, outcome, obstacle, plan });
  saveData();
  ['woopW', 'woopO', 'woopOb', 'woopP'].forEach(id => document.getElementById(id).value = '');
  renderWoops();
  showToast('âœ… Ù‡Ø¯Ù WOOP Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
}

function deleteWoop(id) {
  data.woops = data.woops.filter(w => w.id !== id);
  saveData();
  renderWoops();
}

// Projects
function updateProjectsPage() {
  renderProjects();
}

function addProject() {
  const name = document.getElementById('projectName').value.trim();
  const goal = document.getElementById('projectGoal').value.trim();
  const deadline = document.getElementById('projectDeadline').value;
  
  if (!name) return showToast('Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ùˆ Ø¨Ù†ÙˆÛŒØ³');
  
  if (!data.projects) data.projects = [];
  data.projects.push({
    id: Date.now().toString(),
    name,
    goal,
    deadline,
    tasks: [],
    createdAt: new Date().toISOString()
  });
  
  saveData();
  document.getElementById('projectName').value = '';
  document.getElementById('projectGoal').value = '';
  document.getElementById('projectDeadline').value = '';
  renderProjects();
  showToast('âœ… Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
}

function renderProjects() {
  const container = document.getElementById('projectsList');
  if (!data.projects?.length) {
    container.innerHTML = `<div class="empty"><div class="empty-text">Ù‡Ù†ÙˆØ² Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±ÛŒ</div></div>`;
    return;
  }
  
  container.innerHTML = data.projects.map(p => {
    const projectTasks = data.tasks.filter(t => t.projectId === p.id);
    const taskCount = projectTasks.length;
    const doneCount = projectTasks.filter(t => t.completed).length;
    
    const taskListHtml = projectTasks.length > 0 ? 
      `<div style="margin-top: 10px; padding-top: 8px; border-top: 1px dashed var(--border);">
         ${projectTasks.map(t => `
           <div class="tiny-task" onclick="editTask('${t.id}')">
             <span class="tiny-task-text ${t.completed ? 'text-muted' : ''}" style="${t.completed ? 'text-decoration:line-through' : ''}">${t.title}</span>
             <span class="tag ${t.completed ? 'green' : 'gray'}">${t.completed ? 'âœ“' : 'â—‹'}</span>
           </div>
         `).join('')}
       </div>` : '';

    return `
      <div class="card" style="padding: 16px; margin-bottom: 12px;">
        <div class="flex items-center gap-2 mb-2">
          <span style="font-size: 1.4rem;">ğŸ¯</span>
          <strong style="font-size: 1.1rem;">${p.name}</strong>
        </div>
        ${p.goal ? `<p style="font-size: 0.9rem; color: var(--text2); margin-bottom: 8px;">${p.goal}</p>` : ''}
        
        <div class="flex gap-2 mb-3">
          ${p.deadline ? `<span class="tag">ğŸ“… ${p.deadline}</span>` : ''}
          <span class="tag blue">Ù¾ÛŒØ´Ø±ÙØª: ${toPersian(doneCount)}/${toPersian(taskCount)}</span>
        </div>

        ${taskListHtml}

        <div class="flex gap-2 mt-3 pt-2 border-top">
          <button class="btn btn-sm btn-light flex-1" onclick="addTaskToProject('${p.id}')">+ Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯</button>
          <button class="btn btn-sm btn-outline" onclick="deleteProject('${p.id}')" style="width: auto;">ğŸ—‘ï¸</button>
        </div>
      </div>
    `;
  }).join('');
}

function addTaskToProject(projectId) {
  document.getElementById('taskList').value = 'master';
  showTaskModal('master');
  // Ø°Ø®ÛŒØ±Ù‡ projectId Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± saveTask
  document.getElementById('editTaskId').dataset.projectId = projectId;
}

function deleteProject(id) {
  if (!confirm('Ù¾Ø±ÙˆÚ˜Ù‡ Ùˆ Ú©Ø§Ø±Ù‡Ø§ÛŒØ´ Ø­Ø°Ù Ø¨Ø´Ù‡ØŸ')) return;
  data.projects = data.projects.filter(p => p.id !== id);
  data.tasks = data.tasks.filter(t => t.projectId !== id);
  saveData();
  renderProjects();
}

// AI Page
function generatePrompt() {
  const weekStart = new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0];
  const weekTasks = data.tasks.filter(t => t.createdAt >= weekStart);
  const doneTasks = weekTasks.filter(t => t.completed);
  const percent = weekTasks.length ? Math.round(doneTasks.length / weekTasks.length * 100) : 0;
  
  const prompt = `You are a productivity coach. Analyze this user's data and provide personalized advice in Persian (Farsi).

## Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±
- Ø§Ø³Ù…: ${data.user.name || 'Ú©Ø§Ø±Ø¨Ø±'}
- Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§: ${data.user.values.join('ØŒ ') || 'Ù†Ø§Ù…Ø´Ø®Øµ'}
- Ù†Ù‚Ø´â€ŒÙ‡Ø§: ${data.user.roles.join('ØŒ ') || 'Ù†Ø§Ù…Ø´Ø®Øµ'}
- Ø²Ù…Ø§Ù† Ø§Ù†Ø±Ú˜ÛŒ: ${data.user.energy === 'morning' ? 'ØµØ¨Ø­' : data.user.energy === 'evening' ? 'Ø´Ø¨' : 'Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø±'}
- Ø¬Ù…Ù„Ù‡ Ù‡ÙˆÛŒØªÛŒ: ${data.user.identity || 'Ù†Ø§Ù…Ø´Ø®Øµ'}

## Ø¢Ù…Ø§Ø± Ù‡ÙØªÙ‡
- Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯Ù‡: ${weekTasks.length}
- Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡: ${doneTasks.length}
- Ø¯Ø±ØµØ¯ Ù…ÙˆÙÙ‚ÛŒØª: ${percent}%
- Ø±ÙˆØ²Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„: ${data.activeDates.filter(d => d >= weekStart).length}/7
- Ø§Ø³ØªØ±ÛŒÚ© ÙØ¹Ù„ÛŒ: ${data.streak} Ø±ÙˆØ²

## Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡
${doneTasks.map(t => `- ${t.title} [Ø§Ù‡Ù…ÛŒØª: ${t.importance || 'Ù…ØªÙˆØ³Ø·'}]`).join('\n') || 'Ù‡ÛŒÚ†'}

## Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯Ù‡
${weekTasks.filter(t => !t.completed).map(t => `- ${t.title} [Ø§Ù‡Ù…ÛŒØª: ${t.importance || 'Ù…ØªÙˆØ³Ø·'}]`).join('\n') || 'Ù‡ÛŒÚ†'}

## Ø¹Ø§Ø¯Øªâ€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú©
${data.habits.map(h => `- Ø¨Ø¹Ø¯ Ø§Ø² "${h.anchor}" â†’ "${h.behavior}"`).join('\n') || 'ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡'}

## Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ú¯Ø±-Ø¢Ù†Ú¯Ø§Ù‡
${data.ifThens.map(r => `- Ø§Ú¯Ø± "${r.ifC}" â†’ "${r.thenA}"`).join('\n') || 'ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡'}

## Ø§Ù‡Ø¯Ø§Ù WOOP
${data.woops?.map(w => `- Ø¢Ø±Ø²Ùˆ: ${w.wish}ØŒ Ù…Ø§Ù†Ø¹: ${w.obstacle}ØŒ Ø¨Ø±Ù†Ø§Ù…Ù‡: ${w.plan}`).join('\n') || 'ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡'}

## Ù…Ø±ÙˆØ±Ù‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø®ÛŒØ±
${data.dailyReviews.slice(-3).map(r => `- ${r.date}: Ø®ÙˆØ¨: "${r.good}"ØŒ Ø¨Ù‡ØªØ±: "${r.better}"`).join('\n') || 'Ù‡ÛŒÚ†'}

---

Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø® Ø¨Ø¯Ù‡:
1. **ØªØ­Ù„ÛŒÙ„ Ú©Ù„ÛŒ**: ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ú©Ø§Ø±Ø¨Ø±
2. **Ù†Ù‚Ø§Ø· Ù‚ÙˆØª**: Ú†Ù‡ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ø±ÙØªÙ‡
3. **Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª**: Û³ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø´Ø®Øµ Ø¨Ø±Ø§ÛŒ Ù‡ÙØªÙ‡ Ø¢ÛŒÙ†Ø¯Ù‡
4. **Ø¹Ø§Ø¯Øª Ø¬Ø¯ÛŒØ¯**: ÛŒÚ© Tiny Habit Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
5. **Ù‚Ø§Ù†ÙˆÙ† If-Then**: ÛŒÚ© Ù‚Ø§Ù†ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§Ø¨Ù„Ù‡ Ø¨Ø§ Ù…ÙˆØ§Ù†Ø¹

Ù„Ø­Ù† Ú¯Ø±Ù…ØŒ Ø­Ù…Ø§ÛŒØªÛŒ Ùˆ Ø¶Ø¯Ú©Ù…Ø§Ù„â€ŒÚ¯Ø±Ø§ÛŒÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´. Ø¨Ø± Ù‚Ø¯Ù…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© ØªØ£Ú©ÛŒØ¯ Ú©Ù†.`;

  document.getElementById('promptBox').textContent = prompt;
  document.getElementById('promptBox').classList.remove('hidden');
  document.getElementById('copyPromptBtn').classList.remove('hidden');
}

function copyPrompt() {
  navigator.clipboard.writeText(document.getElementById('promptBox').textContent)
    .then(() => showToast('âœ… Ù¾Ø±Ø§Ù…Ù¾Øª Ú©Ù¾ÛŒ Ø´Ø¯'))
    .catch(() => showToast('âŒ Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ'));
}

function copyQuestion(el) {
  navigator.clipboard.writeText(el.querySelector('.tiny-task-text').textContent)
    .then(() => showToast('âœ… Ø³ÙˆØ§Ù„ Ú©Ù¾ÛŒ Ø´Ø¯'))
    .catch(() => showToast('âŒ Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ'));
}

// Settings Page
function updateSettingsPage() {
  document.getElementById('setName').value = data.user.name || '';
  document.getElementById('setIdentity').value = data.user.identity || '';
  
  document.getElementById('settingsValues').innerHTML = data.user.values.map(v => 
    `<span class="chip selected" onclick="removeValue('${v}')">${v} âœ•</span>`
  ).join('');
  
  document.getElementById('settingsRoles').innerHTML = data.user.roles.map(r => 
    `<span class="chip selected" onclick="removeRole('${r}')">${r} âœ•</span>`
  ).join('');
}

function addSettingValue() {
  const input = document.getElementById('addValueInput');
  const v = input.value.trim();
  if (!v || data.user.values.includes(v)) return;
  data.user.values.push(v);
  input.value = '';
  saveData();
  updateSettingsPage();
}

function removeValue(v) {
  data.user.values = data.user.values.filter(x => x !== v);
  saveData();
  updateSettingsPage();
}

function addSettingRole() {
  const input = document.getElementById('addRoleInput');
  const r = input.value.trim();
  if (!r || data.user.roles.includes(r)) return;
  data.user.roles.push(r);
  input.value = '';
  saveData();
  updateSettingsPage();
}

function removeRole(r) {
  data.user.roles = data.user.roles.filter(x => x !== r);
  saveData();
  updateSettingsPage();
}

function saveSettings() {
  data.user.name = document.getElementById('setName').value.trim();
  data.user.identity = document.getElementById('setIdentity').value;
  saveData();
  showToast('âœ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
  updateTodayPage();
}

function doResetSetup() {
  if (confirm('Ø¢Ù†Ø¨ÙˆØ±Ø¯ÛŒÙ†Ú¯ Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ø¨Ø´Ù‡ØŸ')) {
    data.setupDone = false;
    saveData();
    location.reload();
  }
}

function doClearAll() {
  if (confirm('Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø¨Ø´Ù†ØŸ')) {
    if (confirm('Ø¢Ø®Ø±ÛŒÙ† ØªØ£ÛŒÛŒØ¯: ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù¾Ø§Ú© Ø¨Ø´Ù†ØŸ')) {
      localStorage.removeItem(STORAGE_KEY);
      location.reload();
    }
  }
}

// Init
function init() {
  loadData();
  applyTheme();
  
  document.querySelectorAll('#valuesChips .chip').forEach(c => {
    c.addEventListener('click', () => toggleChip(c, tempValues));
  });
  
  document.querySelectorAll('#rolesChips .chip').forEach(c => {
    c.addEventListener('click', () => toggleChip(c, tempRoles));
  });
  
  document.querySelectorAll('#energyChips .chip').forEach(c => {
    c.addEventListener('click', () => {
      document.querySelectorAll('#energyChips .chip').forEach(x => x.classList.remove('selected'));
      c.classList.add('selected');
      data.user.energy = c.dataset.v;
    });
  });
  
  document.querySelectorAll('.nav-item').forEach(n => {
    n.addEventListener('click', () => goToPage(n.dataset.page));
  });
  
  setInterval(saveData, 30000);
  window.addEventListener('beforeunload', saveData);
  window.addEventListener('pagehide', saveData);
  document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'hidden') saveData();
  });
  
  if (data.setupDone) {
    showMainApp();
  }
}

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('data:application/javascript,' + encodeURIComponent(`
    const CACHE = 'todo-formula-v3';
    self.addEventListener('install', e => self.skipWaiting());
    self.addEventListener('activate', e => e.waitUntil(clients.claim()));
    self.addEventListener('fetch', e => e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))));
  `)).catch(() => {});
}

init();
</script>
</body>
</html>
