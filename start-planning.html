<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ³Ø§Ø² Û´ Ø±ÙˆØ²Ù‡ | Ù†Ø³Ø®Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Vazirmatn', sans-serif; }
        
        body {
            background: linear-gradient(145deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(20px);
        }
        
        .card-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
        }
        
        .gradient-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gradient-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
        }
        
        .input-field {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        
        .input-field:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
        }
        
        .option-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid #e5e7eb;
        }
        
        .option-card:hover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.05);
        }
        
        .option-card.selected {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: transparent;
            color: white;
        }
        
        .option-card.selected .text-gray-500 {
            color: rgba(255,255,255,0.8);
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .energy-track {
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            height: 10px;
            border-radius: 5px;
        }
        
        .energy-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 32px;
            height: 32px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 4px solid #10b981;
        }
        
        .prompt-box {
            background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
            font-family: 'Vazirmatn', monospace;
        }
        
        .step-indicator {
            transition: all 0.3s ease;
        }
        
        .step-indicator.active {
            background: #10b981;
            transform: scale(1.4);
        }
        
        .step-indicator.completed {
            background: #10b981;
        }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #10b981; border-radius: 3px; }
        
        .emoji-btn {
            transition: all 0.2s;
        }
        
        .emoji-btn:hover {
            transform: scale(1.05);
        }
        
        .emoji-btn.selected {
            transform: scale(1.1);
            box-shadow: 0 0 0 3px #10b981;
        }
        
        .tip-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
        }
        
        .info-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
        }
    </style>
</head>
<body class="min-h-screen py-6 px-4">
    
    <!-- Header -->
    <header class="text-center mb-6 fade-in">
        <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-emerald-400 to-green-600 mb-4 shadow-lg">
            <span class="text-4xl">ğŸ¯</span>
        </div>
        <h1 class="text-2xl font-bold text-white mb-2">Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ³Ø§Ø² Û´ Ø±ÙˆØ²Ù‡</h1>
        <p class="text-gray-400 text-sm">ÙÙ‚Ø· Ûµ Ø³ÙˆØ§Ù„ Ø³Ø§Ø¯Ù‡ØŒ Ú©Ù…ØªØ± Ø§Ø² Û± Ø¯Ù‚ÛŒÙ‚Ù‡ âš¡</p>
    </header>

    <!-- Progress - 5 Steps -->
    <div class="max-w-lg mx-auto mb-6">
        <div class="flex justify-between items-center px-6">
            <div class="step-indicator active w-3 h-3 rounded-full bg-gray-600" data-step="1"></div>
            <div class="flex-1 h-1 bg-gray-700 mx-2"><div class="progress-bar h-full bg-emerald-500 transition-all duration-300" style="width: 0%"></div></div>
            <div class="step-indicator w-3 h-3 rounded-full bg-gray-600" data-step="2"></div>
            <div class="flex-1 h-1 bg-gray-700 mx-2"><div class="progress-bar h-full bg-emerald-500 transition-all duration-300" style="width: 0%"></div></div>
            <div class="step-indicator w-3 h-3 rounded-full bg-gray-600" data-step="3"></div>
            <div class="flex-1 h-1 bg-gray-700 mx-2"><div class="progress-bar h-full bg-emerald-500 transition-all duration-300" style="width: 0%"></div></div>
            <div class="step-indicator w-3 h-3 rounded-full bg-gray-600" data-step="4"></div>
            <div class="flex-1 h-1 bg-gray-700 mx-2"><div class="progress-bar h-full bg-emerald-500 transition-all duration-300" style="width: 0%"></div></div>
            <div class="step-indicator w-3 h-3 rounded-full bg-gray-600" data-step="5"></div>
        </div>
        <div class="text-center mt-3">
            <span class="text-gray-500 text-sm">Ù…Ø±Ø­Ù„Ù‡ <span id="currentStepNum" class="text-emerald-400 font-bold text-lg">Û±</span> Ø§Ø² Ûµ</span>
        </div>
    </div>

    <!-- Main -->
    <main class="max-w-lg mx-auto">
        
        <div id="formCard" class="glass rounded-3xl card-shadow overflow-hidden">
            
            <!-- Step 1: Goal - Simple & Quick -->
            <div class="step fade-in p-6" data-step="1">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">ğŸ¯</span>
                    <h2 class="text-xl font-bold text-gray-800">Ù‡Ø¯Ù Û´ Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡</h2>
                    <p class="text-gray-500 text-sm mt-1">ÛŒÙ‡ Ú†ÛŒØ² Ú©ÙˆÚ†ÛŒÚ© Ùˆ Ù…Ø´Ø®Øµ</p>
                </div>
                
                <div class="space-y-4">
                    <input type="text" id="goal" class="input-field w-full px-4 py-4 rounded-xl focus:outline-none text-lg" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø±ÙˆØ²ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡...">
                    
                    <!-- Quick Goal Buttons -->
                    <div class="grid grid-cols-2 gap-3">
                        <button type="button" class="goal-btn option-card p-3 rounded-xl text-center">
                            <span class="text-2xl block mb-1">ğŸ“š</span>
                            <span class="text-sm font-medium">Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
                        </button>
                        <button type="button" class="goal-btn option-card p-3 rounded-xl text-center">
                            <span class="text-2xl block mb-1">ğŸƒ</span>
                            <span class="text-sm font-medium">ÙˆØ±Ø²Ø´</span>
                        </button>
                        <button type="button" class="goal-btn option-card p-3 rounded-xl text-center">
                            <span class="text-2xl block mb-1">ğŸ’¼</span>
                            <span class="text-sm font-medium">Ú©Ø§Ø± Ù…ØªÙ…Ø±Ú©Ø²</span>
                        </button>
                        <button type="button" class="goal-btn option-card p-3 rounded-xl text-center">
                            <span class="text-2xl block mb-1">ğŸ§¹</span>
                            <span class="text-sm font-medium">Ù†Ø¸Ù… Ø®ÙˆÙ†Ù‡</span>
                        </button>
                    </div>
                    
                    <div class="info-box rounded-xl p-3 text-center">
                        <p class="text-blue-800 text-xs">ğŸ’¡ Ø®Ø§Ù„ÛŒ Ø¨Ø°Ø§Ø±ÛŒ Ù‡Ù… Ø§Ø´Ú©Ø§Ù„ Ù†Ø¯Ø§Ø±Ù‡ØŒ ÛŒÙ‡ Ù‡Ø¯Ù Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒØ´Ù‡</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: Energy + Mood Combined -->
            <div class="step hidden p-6" data-step="2">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">âš¡</span>
                    <h2 class="text-xl font-bold text-gray-800">Ø§Ù†Ø±Ú˜ÛŒ Ùˆ Ø­Ø§Ù„Øª</h2>
                    <p class="text-gray-500 text-sm mt-1">Ø§Ù„Ø§Ù† Ú†Ø·ÙˆØ±ÛŒØŸ</p>
                </div>
                
                <!-- Energy Slider -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-medium mb-3">Ø³Ø·Ø­ Ø§Ù†Ø±Ú˜ÛŒ Ø§Ù…Ø±ÙˆØ²ØªØŸ</label>
                    <div class="relative mb-3">
                        <div class="energy-track"></div>
                        <input type="range" id="energy" min="1" max="10" value="5" class="energy-thumb absolute top-0 left-0 w-full h-2.5 appearance-none bg-transparent cursor-pointer">
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400 text-sm">ğŸ˜´ Ú©Ù…</span>
                        <span class="text-3xl font-bold text-emerald-600" id="energyValue">Ûµ</span>
                        <span class="text-gray-400 text-sm">ğŸ”¥ Ø²ÛŒØ§Ø¯</span>
                    </div>
                </div>
                
                <!-- Mood - Simplified to 4 options -->
                <div>
                    <label class="block text-gray-700 font-medium mb-3">Ø­Ø§Ù„ Ø±ÙˆØ­ÛŒØªØŸ</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button type="button" class="mood-btn emoji-btn py-4 rounded-xl bg-gray-100 text-2xl flex flex-col items-center" data-mood="Ø¹Ø§Ù„ÛŒ">
                            ğŸ˜Š
                            <span class="text-xs mt-1 text-gray-600">Ø¹Ø§Ù„ÛŒ</span>
                        </button>
                        <button type="button" class="mood-btn emoji-btn py-4 rounded-xl bg-gray-100 text-2xl flex flex-col items-center" data-mood="Ù…Ø¹Ù…ÙˆÙ„ÛŒ">
                            ğŸ˜
                            <span class="text-xs mt-1 text-gray-600">Ù…Ø¹Ù…ÙˆÙ„ÛŒ</span>
                        </button>
                        <button type="button" class="mood-btn emoji-btn py-4 rounded-xl bg-gray-100 text-2xl flex flex-col items-center selected" data-mood="Ø®Ø³ØªÙ‡">
                            ğŸ˜”
                            <span class="text-xs mt-1 text-gray-600">Ø®Ø³ØªÙ‡</span>
                        </button>
                        <button type="button" class="mood-btn emoji-btn py-4 rounded-xl bg-gray-100 text-2xl flex flex-col items-center" data-mood="Ø§Ø³ØªØ±Ø³ÛŒ">
                            ğŸ˜°
                            <span class="text-xs mt-1 text-gray-600">Ø§Ø³ØªØ±Ø³ÛŒ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 3: Time - Simplified -->
            <div class="step hidden p-6" data-step="3">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">â°</span>
                    <h2 class="text-xl font-bold text-gray-800">Ø²Ù…Ø§Ù†</h2>
                    <p class="text-gray-500 text-sm mt-1">Ú©ÙÛŒ Ùˆ Ú†Ù‚Ø¯Ø± ÙˆÙ‚Øª Ø¯Ø§Ø±ÛŒØŸ</p>
                </div>
                
                <!-- Available Time -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-medium mb-3">ÙˆÙ‚Øª Ø¢Ø²Ø§Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡ØŸ</label>
                    <div class="grid grid-cols-3 gap-3">
                        <label class="cursor-pointer">
                            <input type="radio" name="time" value="Ú©Ù…" class="hidden peer">
                            <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸ¢</span>
                                <span class="text-sm font-medium">Ú©Ù…</span>
                                <span class="text-xs text-gray-500 block">Û³Û°-Û´Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="time" value="Ù…ØªÙˆØ³Ø·" class="hidden peer" checked>
                            <div class="option-card selected peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸš¶</span>
                                <span class="text-sm font-medium">Ù…ØªÙˆØ³Ø·</span>
                                <span class="text-xs text-gray-500 block">Û±-Û² Ø³Ø§Ø¹Øª</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="time" value="Ø²ÛŒØ§Ø¯" class="hidden peer">
                            <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸš€</span>
                                <span class="text-sm font-medium">Ø²ÛŒØ§Ø¯</span>
                                <span class="text-xs text-gray-500 block">Û²+ Ø³Ø§Ø¹Øª</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Peak Hour - Simplified to 3 options -->
                <div>
                    <label class="block text-gray-700 font-medium mb-3">Ø¨Ù‡ØªØ±ÛŒÙ† Ø³Ø§Ø¹Øª ØªÙ…Ø±Ú©Ø²ØªØŸ</label>
                    <div class="grid grid-cols-3 gap-3">
                        <label class="cursor-pointer">
                            <input type="radio" name="peak" value="ØµØ¨Ø­" class="hidden peer">
                            <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸŒ…</span>
                                <span class="text-sm">ØµØ¨Ø­</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="peak" value="Ø¹ØµØ±" class="hidden peer" checked>
                            <div class="option-card selected peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸŒ¤ï¸</span>
                                <span class="text-sm">Ø¹ØµØ±</span>
                            </div>
                        </label>
                        <label class="cursor-pointer">
                            <input type="radio" name="peak" value="Ø´Ø¨" class="hidden peer">
                            <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                                <span class="text-2xl block mb-1">ğŸŒ™</span>
                                <span class="text-sm">Ø´Ø¨</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Step 4: Barrier - Single Question -->
            <div class="step hidden p-6" data-step="4">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">ğŸš§</span>
                    <h2 class="text-xl font-bold text-gray-800">Ù…Ø§Ù†Ø¹ Ø§ØµÙ„ÛŒ</h2>
                    <p class="text-gray-500 text-sm mt-1">Ú†ÛŒ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¬Ù„ÙˆØª Ø±Ùˆ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù‡ØŸ</p>
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <label class="cursor-pointer">
                        <input type="radio" name="barrier" value="Ú¯ÙˆØ´ÛŒ" class="hidden peer" checked>
                        <div class="option-card selected peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ“±</span>
                            <span class="font-medium">Ú¯ÙˆØ´ÛŒ</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="barrier" value="Ø®Ø³ØªÚ¯ÛŒ" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ˜´</span>
                            <span class="font-medium">Ø®Ø³ØªÚ¯ÛŒ</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="barrier" value="Ø­ÙˆØ§Ø³â€ŒÙ¾Ø±ØªÛŒ" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ¦‹</span>
                            <span class="font-medium">Ø­ÙˆØ§Ø³â€ŒÙ¾Ø±ØªÛŒ</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="barrier" value="Ø¨ÛŒâ€ŒØ­ÙˆØµÙ„Ú¯ÛŒ" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ˜‘</span>
                            <span class="font-medium">Ø¨ÛŒâ€ŒØ­ÙˆØµÙ„Ú¯ÛŒ</span>
                        </div>
                    </label>
                </div>
                
                <div class="tip-box rounded-xl p-3 mt-4 text-center">
                    <p class="text-amber-800 text-sm">ğŸ’¡ AI ÛŒÙ‡ Ø±Ø§Ù‡â€ŒØ­Ù„ If-Then Ù…Ø®ØµÙˆØµ Ø§ÛŒÙ† Ù…Ø§Ù†Ø¹ Ø¨Ù‡Øª Ù…ÛŒØ¯Ù‡</p>
                </div>
            </div>

            <!-- Step 5: Reward - Simple -->
            <div class="step hidden p-6" data-step="5">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">ğŸ</span>
                    <h2 class="text-xl font-bold text-gray-800">Ù¾Ø§Ø¯Ø§Ø´</h2>
                    <p class="text-gray-500 text-sm mt-1">Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ù†Ø¬Ø§Ù… Ú©Ø§Ø± Ú†ÛŒ Ø¨Ù‡ Ø®ÙˆØ¯Øª Ù…ÛŒØ¯ÛŒØŸ</p>
                </div>
                
                <div class="grid grid-cols-3 gap-3 mb-6">
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="Ú†Ø§ÛŒ/Ù‚Ù‡ÙˆÙ‡" class="hidden peer" checked>
                        <div class="option-card selected peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">â˜•</span>
                            <span class="text-sm">Ú†Ø§ÛŒ/Ù‚Ù‡ÙˆÙ‡</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="Ø§Ø³ØªØ±Ø§Ø­Øª" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ˜Œ</span>
                            <span class="text-sm">Ø§Ø³ØªØ±Ø§Ø­Øª</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="ØªÙØ±ÛŒØ­" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ®</span>
                            <span class="text-sm">ØªÙØ±ÛŒØ­</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="ØªÙ†Ù‚Ù„Ø§Øª" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸ«</span>
                            <span class="text-sm">ØªÙ†Ù‚Ù„Ø§Øª</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="Ù…ÙˆØ³ÛŒÙ‚ÛŒ" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸµ</span>
                            <span class="text-sm">Ù…ÙˆØ³ÛŒÙ‚ÛŒ</span>
                        </div>
                    </label>
                    <label class="cursor-pointer">
                        <input type="radio" name="reward" value="Ù‚Ø¯Ù… Ø²Ø¯Ù†" class="hidden peer">
                        <div class="option-card peer-checked:selected p-4 rounded-xl text-center">
                            <span class="text-3xl block mb-2">ğŸš¶</span>
                            <span class="text-sm">Ù‚Ø¯Ù… Ø²Ø¯Ù†</span>
                        </div>
                    </label>
                </div>
                
                <!-- Ready Message -->
                <div class="bg-gradient-to-r from-emerald-100 to-green-100 border-2 border-emerald-300 rounded-xl p-4 text-center">
                    <p class="text-emerald-800 font-bold text-lg mb-1">
                        âœ¨ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒ!
                    </p>
                    <p class="text-emerald-700 text-sm">
                        Ø¯Ú©Ù…Ù‡ Â«Ø³Ø§Ø®Øª Ø¨Ø±Ù†Ø§Ù…Ù‡Â» Ø±Ùˆ Ø¨Ø²Ù† Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ Û´ Ø±ÙˆØ²Ù‡â€ŒØ§Øª Ø±Ùˆ Ø¨Ú¯ÛŒØ±
                    </p>
                </div>
            </div>
            
        </div>

        <!-- Navigation -->
        <div class="flex gap-3 mt-5 px-2">
            <button id="prevBtn" class="hidden flex-1 py-4 px-6 bg-white/10 hover:bg-white/20 text-white font-medium rounded-2xl transition-all text-lg">
                â†’ Ù‚Ø¨Ù„ÛŒ
            </button>
            <button id="nextBtn" class="flex-1 gradient-btn py-4 px-6 text-white font-bold rounded-2xl text-lg">
                Ø¨Ø¹Ø¯ÛŒ â†
            </button>
            <button id="generateBtn" class="hidden flex-1 gradient-btn py-4 px-6 text-white font-bold rounded-2xl text-lg">
                âœ¨ Ø³Ø§Ø®Øª Ø¨Ø±Ù†Ø§Ù…Ù‡
            </button>
        </div>

        <!-- Result -->
        <div id="resultSection" class="hidden slide-up mt-6">
            <div class="glass rounded-3xl card-shadow p-6">
                <div class="text-center mb-5">
                    <span class="text-5xl mb-3 block">ğŸ‰</span>
                    <h2 class="text-xl font-bold text-gray-800">Ù¾Ø±Ø§Ù…Ù¾Øª Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Øª!</h2>
                    <p class="text-gray-500 text-sm">Ú©Ù¾ÛŒ Ú©Ù† Ùˆ Ø¨Ø¯Ù‡ Ø¨Ù‡ ChatGPT ÛŒØ§ Claude</p>
                </div>
                
                <div class="prompt-box rounded-2xl p-4 mb-5 max-h-72 overflow-y-auto border border-emerald-500/30">
                    <pre id="promptOutput" class="text-emerald-400 text-xs leading-relaxed whitespace-pre-wrap"></pre>
                </div>
                
                <div class="flex gap-3 mb-5">
                    <button id="copyBtn" class="flex-1 gradient-btn py-4 px-6 text-white font-bold rounded-2xl flex items-center justify-center gap-2 text-lg">
                        <span>ğŸ“‹</span>
                        <span>Ú©Ù¾ÛŒ Ú©Ù†</span>
                    </button>
                    <button id="resetBtn" class="py-4 px-5 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold rounded-2xl transition-all">
                        ğŸ”„
                    </button>
                </div>
                
                <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-4">
                    <p class="text-emerald-800 font-bold text-sm mb-2">ğŸ“ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ÛŒ:</p>
                    <ol class="text-emerald-700 text-sm space-y-1">
                        <li>Û±. Ú©Ù¾ÛŒ Ú©Ù†</li>
                        <li>Û². Ø¨Ø±Ùˆ ChatGPT ÛŒØ§ Claude</li>
                        <li>Û³. Paste Ú©Ù†</li>
                        <li>Û´. Ø¨Ø±Ù†Ø§Ù…Ù‡ Û´ Ø±ÙˆØ²Ù‡â€ŒØ§Øª Ø±Ùˆ Ø¨Ú¯ÛŒØ±! ğŸš€</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <!-- Save Indicator -->
        <div id="saveIndicator" class="fixed bottom-4 left-4 bg-gray-900/90 text-white px-4 py-2 rounded-full text-sm flex items-center gap-2 opacity-0 transition-all duration-300">
            <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
            Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯
        </div>

    </main>

    <script>
        // ==================== State ====================
        const state = {
            currentStep: 1,
            totalSteps: 5,
            data: {
                goal: '',
                energy: 5,
                mood: 'Ø®Ø³ØªÙ‡',
                time: 'Ù…ØªÙˆØ³Ø·',
                peak: 'Ø¹ØµØ±',
                barrier: 'Ú¯ÙˆØ´ÛŒ',
                reward: 'Ú†Ø§ÛŒ/Ù‚Ù‡ÙˆÙ‡'
            }
        };

        // Default goals
        const defaultGoals = [
            'Ø±ÙˆØ²ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡',
            'Ø±ÙˆØ²ÛŒ Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆØ±Ø²Ø´ Ø³Ø¨Ú©',
            'Ø±ÙˆØ²ÛŒ Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ú©Ø§Ø± Ù…ØªÙ…Ø±Ú©Ø²',
            'Ø±ÙˆØ²ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù†Ø¸Ù… Ø®ÙˆÙ†Ù‡'
        ];
        
        // Goal mappings
        const goalMappings = {
            'ğŸ“š': 'Ø±ÙˆØ²ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡',
            'ğŸƒ': 'Ø±ÙˆØ²ÛŒ Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ ÙˆØ±Ø²Ø´',
            'ğŸ’¼': 'Ø±ÙˆØ²ÛŒ Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ú©Ø§Ø± Ù…ØªÙ…Ø±Ú©Ø²',
            'ğŸ§¹': 'Ø±ÙˆØ²ÛŒ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù†Ø¸Ù… Ø®ÙˆÙ†Ù‡'
        };

        // ==================== Persian Numbers ====================
        const toPersian = (num) => {
            const persianDigits = ['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'Û±Û°'];
            return persianDigits[num] || String(num).replace(/\d/g, d => persianDigits[d]);
        };

        // ==================== DOM ====================
        const $ = (sel) => document.querySelector(sel);
        const $$ = (sel) => document.querySelectorAll(sel);

        // ==================== LocalStorage ====================
        const storage = {
            save() {
                localStorage.setItem('planner_v6', JSON.stringify({ ...state.data, step: state.currentStep, ts: Date.now() }));
                $('#saveIndicator').classList.remove('opacity-0');
                setTimeout(() => $('#saveIndicator').classList.add('opacity-0'), 1500);
            },
            load() {
                const saved = localStorage.getItem('planner_v6');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        if (Date.now() - data.ts < 86400000) {
                            Object.assign(state.data, data);
                            state.currentStep = data.step || 1;
                            return true;
                        }
                    } catch (e) {}
                }
                return false;
            },
            clear() {
                localStorage.removeItem('planner_v6');
            }
        };

        // ==================== UI ====================
        function updateProgress() {
            $$('.step-indicator').forEach((ind, i) => {
                ind.classList.remove('active', 'completed');
                if (i + 1 < state.currentStep) ind.classList.add('completed');
                else if (i + 1 === state.currentStep) ind.classList.add('active');
            });
            
            $$('.progress-bar').forEach((bar, i) => {
                bar.style.width = i < state.currentStep - 1 ? '100%' : '0%';
            });
            
            $('#currentStepNum').textContent = toPersian(state.currentStep);
        }

        function showStep(step) {
            $$('.step').forEach(s => s.classList.add('hidden'));
            const target = $(`.step[data-step="${step}"]`);
            target.classList.remove('hidden');
            target.classList.add('fade-in');
            
            $('#prevBtn').classList.toggle('hidden', step === 1);
            $('#nextBtn').classList.toggle('hidden', step === state.totalSteps);
            $('#generateBtn').classList.toggle('hidden', step !== state.totalSteps);
            
            updateProgress();
        }

        function updateOptionCards(name) {
            const container = $(`input[name="${name}"]`)?.closest('.step');
            if (!container) return;
            container.querySelectorAll(`input[name="${name}"]`).forEach(input => {
                const card = input.closest('label')?.querySelector('.option-card');
                if (card) {
                    card.classList.toggle('selected', input.checked);
                }
            });
        }

        function collectData() {
            state.data.goal = $('#goal').value.trim();
            state.data.energy = parseInt($('#energy').value);
            
            ['time', 'peak', 'barrier', 'reward'].forEach(name => {
                const checked = $(`input[name="${name}"]:checked`);
                if (checked) state.data[name] = checked.value;
            });
        }

        function restoreUI() {
            if (state.data.goal) $('#goal').value = state.data.goal;
            
            $('#energy').value = state.data.energy;
            $('#energyValue').textContent = toPersian(state.data.energy);
            
            $$('.mood-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.mood === state.data.mood);
            });
            
            ['time', 'peak', 'barrier', 'reward'].forEach(name => {
                const radio = $(`input[name="${name}"][value="${state.data[name]}"]`);
                if (radio) {
                    radio.checked = true;
                    updateOptionCards(name);
                }
            });
        }

        // ==================== Prompt Generator ====================
        function generatePrompt() {
            collectData();
            const d = state.data;
            
            // Use default goal if empty
            const goal = d.goal || defaultGoals[Math.floor(Math.random() * defaultGoals.length)];
            
            // Energy-based settings
            let taskDuration, taskCount, mode;
            if (d.energy <= 3) {
                taskDuration = 'Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡';
                taskCount = 'Û±';
                mode = 'Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ';
            } else if (d.energy <= 6) {
                taskDuration = 'Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡';
                taskCount = 'Û²';
                mode = 'Ø³Ø¨Ú©';
            } else {
                taskDuration = 'Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡';
                taskCount = 'Û³';
                mode = 'Ø¹Ø§Ø¯ÛŒ';
            }
            
            // Time adjustment
            if (d.time === 'Ú©Ù…') taskCount = 'Û±';
            else if (d.time === 'Ø²ÛŒØ§Ø¯' && d.energy > 5) taskCount = 'Û³';

            // Barrier solutions
            const barrierSolutions = {
                'Ú¯ÙˆØ´ÛŒ': 'Ú¯ÙˆØ´ÛŒ Ø±Ùˆ Ø¨Ø¨Ø± Ø§ØªØ§Ù‚ Ø¯ÛŒÚ¯Ù‡ + ØªØ§ÛŒÙ…Ø± Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø°Ø§Ø±',
                'Ø®Ø³ØªÚ¯ÛŒ': 'Û³ Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ + Ù†Ø³Ø®Ù‡ Û² Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡',
                'Ø­ÙˆØ§Ø³â€ŒÙ¾Ø±ØªÛŒ': 'Ø¨Ú¯Ùˆ Â«ÙÙ‚Ø· Û³Û° Ø«Ø§Ù†ÛŒÙ‡Â» + ÙÙˆØ±ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ù†',
                'Ø¨ÛŒâ€ŒØ­ÙˆØµÙ„Ú¯ÛŒ': 'Û± Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ú¯ÙˆØ´ Ø¨Ø¯Ù‡ + ØªØ§ÛŒÙ…Ø± Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡'
            };
            
            // Mood solutions
            const moodSolutions = {
                'Ø¹Ø§Ù„ÛŒ': 'Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡! Ø¨Ù‡ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù†Ù‡',
                'Ù…Ø¹Ù…ÙˆÙ„ÛŒ': 'Ø¨Ø§ ÛŒÙ‡ Ú©Ø§Ø± Ú©ÙˆÚ†ÛŒÚ© Ø´Ø±ÙˆØ¹ Ú©Ù†',
                'Ø®Ø³ØªÙ‡': 'Û³ Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ + Ù†Ø³Ø®Ù‡ Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ',
                'Ø§Ø³ØªØ±Ø³ÛŒ': 'ØªÙ†ÙØ³ Û´-Û²-Û¶ + Ø´Ø±ÙˆØ¹ Û³Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ'
            };

            return `# ğŸ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Û´ Ø±ÙˆØ²Ù‡ â€” Ù†Ø³Ø®Ù‡ Ø³Ø§Ø¯Ù‡

## âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ AI

Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±:
- ØªØ§Ø²Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¯ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø±Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ù†Ù‡
- Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ **Ø®ÛŒÙ„ÛŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ú©ÙˆÚ†Ú©** Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù‡
- Ø§Ú¯Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø³Ù†Ú¯ÛŒÙ† Ø¨Ø¯ÛŒØŒ Ø´Ú©Ø³Øª Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡

âœ… Ù‚Ø§Ù†ÙˆÙ† Ø·Ù„Ø§ÛŒÛŒ: **Ú©ÙˆÚ†Ú©â€ŒØªØ± = Ø¨Ù‡ØªØ±**

---

## ğŸ“Š Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±

| Ø¢ÛŒØªÙ… | Ù…Ù‚Ø¯Ø§Ø± |
|------|-------|
| ğŸ¯ Ù‡Ø¯Ù Û´ Ø±ÙˆØ²Ù‡ | ${goal} |
| âš¡ Ø³Ø·Ø­ Ø§Ù†Ø±Ú˜ÛŒ | ${toPersian(d.energy)}/Û±Û° |
| ğŸ˜Š Ø­Ø§Ù„ Ø±ÙˆØ­ÛŒ | ${d.mood} |
| â° ÙˆÙ‚Øª Ø¢Ø²Ø§Ø¯ | ${d.time} |
| ğŸŒŸ Ø³Ø§Ø¹Øª Ø·Ù„Ø§ÛŒÛŒ | ${d.peak} |
| ğŸš§ Ù…Ø§Ù†Ø¹ Ø§ØµÙ„ÛŒ | ${d.barrier} |
| ğŸ Ù¾Ø§Ø¯Ø§Ø´ | ${d.reward} |

---

## âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®ÙˆØ¯Ú©Ø§Ø± (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù†Ø±Ú˜ÛŒ ${toPersian(d.energy)})

| ØªÙ†Ø¸ÛŒÙ… | Ù…Ù‚Ø¯Ø§Ø± |
|-------|-------|
| Ø­Ø§Ù„Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ | ${mode} |
| ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ | Ø­Ø¯Ø§Ú©Ø«Ø± ${taskCount} |
| Ù…Ø¯Øª Ù‡Ø± Ú©Ø§Ø± | ${taskDuration} |

---

## ğŸ“‹ Û±Û° Ù‚Ø§Ù†ÙˆÙ† Ø¨Ø±Ø§ÛŒ AI

1. Ù‡Ø± Ø±ÙˆØ² **Ø­Ø¯Ø§Ú©Ø«Ø± ${taskCount} Ú©Ø§Ø±** â€” Ù†Ù‡ Ø¨ÛŒØ´ØªØ±!
2. Ù‡Ø± Ú©Ø§Ø± **Ø­Ø¯Ø§Ú©Ø«Ø± ${taskDuration}**
3. Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§ **Ø±ÙØªØ§Ø±Ù…Ø­ÙˆØ±** Ø¨Ø§Ø´Ù† (Ù…Ø«Ø§Ù„: Â«Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ ØµÙØ­Ù‡ Ûµ-Û±Ûµ Ú©ØªØ§Ø¨Â» Ù†Ù‡ Â«Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ù†Ù…Â»)
4. Ù‡Ù…ÛŒØ´Ù‡ **Ù†Ø³Ø®Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ** Ø¨Ø¯Ù‡
5. Ù‡Ù…ÛŒØ´Ù‡ **If-Then** Ø¨Ø±Ø§ÛŒ Ù…Ø§Ù†Ø¹ Â«${d.barrier}Â» Ø¨Ù†ÙˆÛŒØ³
6. **Ø±ÙˆØªÛŒÙ† Ø´Ø±ÙˆØ¹ Û± Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ** Ø¨Ø¯Ù‡
7. Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ú©Ø§Ø±ØŒ Ù¾Ø§Ø¯Ø§Ø´: **${d.reward}**
8. Ø§Ú¯Ù‡ Û² Ø±ÙˆØ² Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯ â†’ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ùˆ **ÛµÛ°Ùª Ø³Ø§Ø¯Ù‡â€ŒØªØ±** Ú©Ù†
9. **Ø¬Ù…Ù„Ø§Øª Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ** Ú©ÙˆØªØ§Ù‡ Ùˆ Ø³Ø§Ø¯Ù‡ Ø¨Ø§Ø´Ù†
10. **Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø´Ø¨Ø§Ù†Ù‡ Û³Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ** Ø¨Ø¯Ù‡

---

## ğŸ“¤ ÙØ±Ù…Øª Ø®Ø±ÙˆØ¬ÛŒ

### Û±) Û³ Ù‚Ø§Ù†ÙˆÙ† Ø·Ù„Ø§ÛŒÛŒ Ø´Ø®ØµÛŒ
Ù…Ø«Ø§Ù„:
- Â«Ú©Ø§Ù…Ù„ Ù†Ø¨Ø§Ø´ØŒ ÙÙ‚Ø· Ø´Ø±ÙˆØ¹ Ú©Ù†Â»
- Â«Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ù‡ØªØ± Ø§Ø² ØµÙØ±Ù‡Â»
- Â«Ú¯ÛŒØ± Ú©Ø±Ø¯ÛŒØŸ Ø¨Ø±Ùˆ Ù†Ø³Ø®Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒÂ»

### Û²) Ø±ÙˆØªÛŒÙ† Ø´Ø±ÙˆØ¹ Û± Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ
\`\`\`
Û±. ÛŒÙ‡ Ù„ÛŒÙˆØ§Ù† Ø¢Ø¨ (Û±Ûµ Ø«Ø§Ù†ÛŒÙ‡)
Û². Û³ Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ (Û±Ûµ Ø«Ø§Ù†ÛŒÙ‡)
Û³. ØªØ§ÛŒÙ…Ø± Ø±Ùˆ Ø¨Ø°Ø§Ø± (Û±Ûµ Ø«Ø§Ù†ÛŒÙ‡)
Û´. Ø´Ø±ÙˆØ¹ Ú©Ù†! (Û±Ûµ Ø«Ø§Ù†ÛŒÙ‡)
\`\`\`

### Û³) Ø¨Ø±Ù†Ø§Ù…Ù‡ Û´ Ø±ÙˆØ²Ù‡
Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø±ÙˆØ²:
\`\`\`
ğŸ“… Ø±ÙˆØ² [Ø´Ù…Ø§Ø±Ù‡]

â° Ø³Ø§Ø¹Øª Ø´Ø±ÙˆØ¹: ${d.peak}
ğŸš€ Ø±ÙˆØªÛŒÙ† Ø´Ø±ÙˆØ¹: [Ø®Ù„Ø§ØµÙ‡]

ğŸ§© Ú©Ø§Ø±Ù‡Ø§:
   Û±. [Ú©Ø§Ø±] (${taskDuration})
   Û². [Ú©Ø§Ø± Ø§Ø®ØªÛŒØ§Ø±ÛŒ] (${taskDuration})

ğŸ Ù¾Ø§Ø¯Ø§Ø´: ${d.reward}

ğŸ“Š Ø§Ù…ØªÛŒØ§Ø²: _/Û³
   â–¡ Ø´Ø±ÙˆØ¹ Ú©Ø±Ø¯Ù…ØŸ
   â–¡ Ú©Ø§Ø± Ø§ØµÙ„ÛŒ Ø´Ø¯ØŸ
   â–¡ Ø­Ø¯Ø§Ù‚Ù„ Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ú©Ø§Ø± Ú©Ø±Ø¯Ù…ØŸ
\`\`\`

### Û´) Ù†Ø³Ø®Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ
\`\`\`
ÙˆÙ‚ØªÛŒ Ø§ØµÙ„Ø§Ù‹ Ø­Ø§Ù„ Ù†Ø¯Ø§Ø±ÛŒ:
Û±. ÛŒÚ© Ù„ÛŒÙˆØ§Ù† Ø¢Ø¨ (Û± Ø¯Ù‚ÛŒÙ‚Ù‡)
Û². Û³ Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ (Û± Ø¯Ù‚ÛŒÙ‚Ù‡)
Û³. ÙÙ‚Ø· Û³ Ø¯Ù‚ÛŒÙ‚Ù‡ Ú©Ø§Ø± Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†ÛŒÚ©
â†’ ØªÙ…ÙˆÙ…! Ø§Ù…Ø±ÙˆØ² Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ÛŒ ğŸ‰
\`\`\`

### Ûµ) If-Then Ø¨Ø±Ø§ÛŒ Â«${d.barrier}Â»
\`\`\`
Ø§Ú¯Ø± ${d.barrier} Ø§ØªÙØ§Ù‚ Ø§ÙØªØ§Ø¯:
â†’ ${barrierSolutions[d.barrier]}
â†’ Ø§Ú¯Ø± Ù†Ø´Ø¯: Ø¨Ø±Ùˆ Ù†Ø³Ø®Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
\`\`\`

### Û¶) Ø±Ø§Ù‡Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„ Â«${d.mood}Â»
â†’ ${moodSolutions[d.mood]}

### Û·) Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø´Ø¨Ø§Ù†Ù‡ (Û³Û° Ø«Ø§Ù†ÛŒÙ‡)
\`\`\`
â–¡ Ø§Ù…Ø±ÙˆØ² Ú†Ù†Ø¯ Ø§Ù…ØªÛŒØ§Ø² Ú¯Ø±ÙØªÙ…ØŸ _/Û³
â–¡ ÛŒÙ‡ Ú†ÛŒØ² Ø®ÙˆØ¨ Ø§Ù…Ø±ÙˆØ²ØŸ ___
â–¡ ÙØ±Ø¯Ø§ Ú†ÛŒ Ø±Ùˆ Ø¨Ù‡ØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ù…ØŸ ___
\`\`\`

### Û¸) Ú©Ø§Ø±Øª Ø±ÛŒØ³Øª (ÙˆÙ‚ØªÛŒ Ø±ÙˆØ² Ø®Ø±Ø§Ø¨ Ø´Ø¯)
\`\`\`
Û±. Û³Û° Ø«Ø§Ù†ÛŒÙ‡ Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚
Û². ÛŒÙ‡ Ù„ÛŒÙˆØ§Ù† Ø¢Ø¨
Û³. ØªØµÙ…ÛŒÙ…: [Ø§Ø¯Ø§Ù…Ù‡] ÛŒØ§ [Ù†Ø³Ø®Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ] ÛŒØ§ [ÙØ±Ø¯Ø§]
â†’ Ù‡Ø± ØªØµÙ…ÛŒÙ…ÛŒ Ø¯Ø±Ø³ØªÙ‡!
\`\`\`

---

## ğŸ¯ ØªØ¹Ø±ÛŒÙ Ù…ÙˆÙÙ‚ÛŒØª

Ù…ÙˆÙÙ‚ÛŒØª = Û´ Ø±ÙˆØ² Ù¾Ø´Øª Ø³Ø± Ù‡Ù…ØŒ **Ø­Ø¯Ø§Ù‚Ù„ Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡** Ú©Ø§Ø± Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ù‡Ø¯Ù Ø§Ù†Ø¬Ø§Ù… Ø¨Ø´Ù‡

Ø´Ú©Ø³Øª = Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø³Ù†Ú¯ÛŒÙ† + Ø§Ù†ØªØ¸Ø§Ø± Ú©Ù…Ø§Ù„â€ŒÚ¯Ø±Ø§ÛŒÛŒ

---

â³ Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ù†Ø§Ù…Ù‡ Û´ Ø±ÙˆØ²Ù‡â€ŒØ§Ù… Ø±Ùˆ Ø¨Ø³Ø§Ø²!`;
        }

        // ==================== Events ====================
        
        // Energy slider
        $('#energy').addEventListener('input', (e) => {
            $('#energyValue').textContent = toPersian(e.target.value);
            state.data.energy = parseInt(e.target.value);
            storage.save();
        });
        
        // Mood buttons
        $$('.mood-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                $$('.mood-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                state.data.mood = btn.dataset.mood;
                storage.save();
            });
        });
        
        // Goal input
        $('#goal').addEventListener('input', () => {
            state.data.goal = $('#goal').value;
            storage.save();
        });
        
        // Goal buttons
        $$('.goal-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                $$('.goal-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                const emoji = btn.querySelector('span').textContent;
                const goalText = goalMappings[emoji] || '';
                $('#goal').value = goalText;
                state.data.goal = goalText;
                storage.save();
            });
        });
        
        // Radio buttons
        $$('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                updateOptionCards(e.target.name);
                state.data[e.target.name] = e.target.value;
                storage.save();
            });
        });
        
        // Navigation
        $('#nextBtn').addEventListener('click', () => {
            collectData();
            storage.save();
            state.currentStep++;
            showStep(state.currentStep);
        });
        
        $('#prevBtn').addEventListener('click', () => {
            state.currentStep--;
            showStep(state.currentStep);
        });
        
        // Generate
        $('#generateBtn').addEventListener('click', () => {
            const prompt = generatePrompt();
            $('#promptOutput').textContent = prompt;
            $('#formCard').classList.add('hidden');
            $('#prevBtn').classList.add('hidden');
            $('#generateBtn').classList.add('hidden');
            $('#resultSection').classList.remove('hidden');
            storage.clear();
        });
        
        // Copy
        $('#copyBtn').addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText($('#promptOutput').textContent);
                $('#copyBtn').innerHTML = '<span>âœ…</span><span>Ú©Ù¾ÛŒ Ø´Ø¯!</span>';
                setTimeout(() => {
                    $('#copyBtn').innerHTML = '<span>ğŸ“‹</span><span>Ú©Ù¾ÛŒ Ú©Ù†</span>';
                }, 2000);
            } catch (err) {
                const textarea = document.createElement('textarea');
                textarea.value = $('#promptOutput').textContent;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                $('#copyBtn').innerHTML = '<span>âœ…</span><span>Ú©Ù¾ÛŒ Ø´Ø¯!</span>';
                setTimeout(() => {
                    $('#copyBtn').innerHTML = '<span>ğŸ“‹</span><span>Ú©Ù¾ÛŒ Ú©Ù†</span>';
                }, 2000);
            }
        });
        
        // Reset
        $('#resetBtn').addEventListener('click', () => {
            if (confirm('Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ…ØŸ')) {
                location.reload();
            }
        });
        
        // ==================== Init ====================
        document.addEventListener('DOMContentLoaded', () => {
            if (storage.load()) {
                restoreUI();
            }
            showStep(state.currentStep);
        });
    </script>
</body>
</html>
