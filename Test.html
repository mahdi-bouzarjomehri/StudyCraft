<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø§Ø¨Ø²Ø§Ø± ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Û±Û°â€“Û±Û°â€“Û±Û°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Ø§Ø¨Ø²Ø§Ø± ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø¢Ú¯Ø§Ù‡Ø§Ù†Ù‡ Ø¨Ø§ Ù…Ø¯Ù„ Û±Û°-Û±Û°-Û±Û°" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0f;
      --bg-card: rgba(17, 17, 27, 0.95);
      --bg-input: rgba(25, 25, 40, 0.8);
      --accent: #6366f1;
      --accent-soft: rgba(99, 102, 241, 0.12);
      --accent-glow: rgba(99, 102, 241, 0.25);
      --green: #10b981;
      --green-soft: rgba(16, 185, 129, 0.12);
      --orange: #f59e0b;
      --orange-soft: rgba(245, 158, 11, 0.12);
      --red: #ef4444;
      --red-soft: rgba(239, 68, 68, 0.12);
      --purple: #a855f7;
      --purple-soft: rgba(168, 85, 247, 0.12);
      --cyan: #06b6d4;
      --cyan-soft: rgba(6, 182, 212, 0.12);
      --text: #f8fafc;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --border: rgba(148, 163, 184, 0.12);
      --border-hover: rgba(148, 163, 184, 0.25);
      --radius-xl: 24px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --brightness: 1;
    }

    body.light-mode {
      --bg: #f8fafc;
      --bg-card: rgba(255, 255, 255, 0.95);
      --bg-input: rgba(241, 245, 249, 0.9);
      --text: #1e293b;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --border: rgba(100, 116, 139, 0.2);
      --border-hover: rgba(100, 116, 139, 0.35);
      --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
    }

    body.sepia-mode {
      --bg: #f4f1ea;
      --bg-card: rgba(250, 247, 240, 0.98);
      --bg-input: rgba(240, 235, 225, 0.9);
      --text: #433422;
      --text-secondary: #5c4a35;
      --text-muted: #7a6550;
      --border: rgba(90, 70, 50, 0.15);
      --border-hover: rgba(90, 70, 50, 0.25);
      --accent: #8b6914;
      --accent-soft: rgba(139, 105, 20, 0.12);
    }

    body { filter: brightness(var(--brightness)); }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Vazirmatn', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.8;
      min-height: 100vh;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.15), transparent),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(168, 85, 247, 0.08), transparent);
      pointer-events: none;
      z-index: -1;
    }

    body.light-mode::before {
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.08), transparent);
    }

    body.sepia-mode::before {
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(139, 105, 20, 0.06), transparent);
    }

    .container { max-width: 900px; margin: 0 auto; padding: 2rem 1.25rem 4rem; }

    /* Theme Controls */
    .theme-controls {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 1000;
      display: flex;
      gap: 0.5rem;
    }

    .theme-btn {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: var(--bg-card);
      color: var(--text);
      font-size: 1.1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      backdrop-filter: blur(10px);
    }

    .theme-btn:hover {
      border-color: var(--accent);
      transform: scale(1.05);
    }

    .theme-menu {
      position: fixed;
      top: 4rem;
      left: 1rem;
      z-index: 1000;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 0.5rem;
      backdrop-filter: blur(10px);
      display: none;
      flex-direction: column;
      gap: 0.25rem;
      min-width: 140px;
    }

    .theme-menu.show { display: flex; }

    .theme-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius-sm);
      border: none;
      background: transparent;
      color: var(--text);
      font-family: inherit;
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .theme-option:hover { background: var(--accent-soft); }
    .theme-option.active { background: var(--accent-soft); color: var(--accent); }

    .brightness-control {
      position: fixed;
      top: 4rem;
      left: 4rem;
      z-index: 1000;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      backdrop-filter: blur(10px);
      display: none;
      min-width: 160px;
    }

    .brightness-control.show { display: block; }

    .brightness-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .brightness-slider {
      width: 100%;
      -webkit-appearance: none;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(to right, #374151, #fbbf24, #fff);
    }

    .brightness-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: white;
      border: 2px solid var(--accent);
      cursor: pointer;
    }

    /* Header */
    header { text-align: center; padding: 2rem 0; }

    .logo {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 1rem;
      background: var(--accent-soft);
      border: 1px solid rgba(99, 102, 241, 0.25);
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .logo-dot {
      width: 8px; height: 8px;
      background: var(--green);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
      50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
    }

    h1 {
      font-size: clamp(1.75rem, 4.5vw, 2.5rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 0.75rem;
    }

    .gradient-text {
      background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      color: var(--text-secondary);
      font-size: 1rem;
      max-width: 600px;
      margin: 0 auto 1rem;
    }

    .method-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.6rem 1.25rem;
      background: linear-gradient(135deg, var(--accent-soft), var(--purple-soft));
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 0.85rem;
    }

    .method-badge strong { color: var(--accent); }

    .time-hint {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: var(--cyan-soft);
      border: 1px solid rgba(6, 182, 212, 0.3);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      color: var(--text-secondary);
      display: inline-block;
    }

    /* Progress Bar */
    .progress-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .progress-step {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.5rem 0.9rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: 999px;
      font-size: 0.8rem;
      color: var(--text-muted);
      transition: var(--transition);
    }

    .progress-step .num {
      width: 22px; height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.05);
      border-radius: 50%;
      font-weight: 700;
      font-size: 0.75rem;
    }

    .progress-step.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--text);
    }

    .progress-step.active .num {
      background: var(--accent);
      color: var(--bg);
    }

    .progress-step.done {
      background: var(--green-soft);
      border-color: var(--green);
      color: var(--green);
    }

    .progress-step.done .num {
      background: var(--green);
      color: white;
    }

    .progress-line { width: 30px; height: 2px; background: var(--border); }
    .progress-line.done { background: var(--green); }

    /* Cards */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      padding: 2rem;
      margin-bottom: 1.5rem;
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s, transform 0.5s;
    }

    .card.visible { opacity: 1; transform: translateY(0); }
    .card.hidden { display: none; }

    .card-header {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .card-icon {
      width: 50px; height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-lg);
      font-size: 1.4rem;
      flex-shrink: 0;
    }

    .card-icon.purple { background: var(--purple-soft); border: 1px solid rgba(168, 85, 247, 0.3); }
    .card-icon.cyan { background: var(--cyan-soft); border: 1px solid rgba(6, 182, 212, 0.3); }
    .card-icon.green { background: var(--green-soft); border: 1px solid rgba(16, 185, 129, 0.3); }
    .card-icon.orange { background: var(--orange-soft); border: 1px solid rgba(249, 115, 22, 0.3); }

    .card-meta { flex: 1; }

    .step-label {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.25rem;
    }

    .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .card-desc {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Form Elements */
    .form-group { margin-bottom: 1.5rem; }

    .form-label {
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .form-hint {
      display: block;
      font-weight: 400;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    .form-input {
      width: 100%;
      padding: 0.85rem 1rem;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      color: var(--text);
      font-family: inherit;
      font-size: 0.9rem;
      transition: var(--transition);
      resize: vertical;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-soft);
    }

    .form-input::placeholder { color: var(--text-muted); }
    textarea.form-input { min-height: 80px; line-height: 1.7; }

    /* Info Box */
    .info-box {
      padding: 1rem 1.25rem;
      border-radius: var(--radius-md);
      margin-bottom: 1.5rem;
    }

    .info-box.tip {
      background: var(--cyan-soft);
      border: 1px solid rgba(6, 182, 212, 0.25);
    }

    .info-box.warning {
      background: var(--orange-soft);
      border: 1px solid rgba(245, 158, 11, 0.25);
    }

    .info-box-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .info-box.tip .info-box-header { color: var(--cyan); }
    .info-box.warning .info-box-header { color: var(--orange); }

    .info-box p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    /* Collapsible */
    .collapsible {
      margin-bottom: 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      overflow: hidden;
    }

    .collapsible-btn {
      width: 100%;
      padding: 0.85rem 1rem;
      background: rgba(255,255,255,0.02);
      border: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      color: var(--text);
      font-family: inherit;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .collapsible-btn span:last-child { transition: transform 0.3s; }
    .collapsible.open .collapsible-btn span:last-child { transform: rotate(180deg); }

    .collapsible-content {
      display: none;
      padding: 1rem;
      background: rgba(0,0,0,0.2);
      border-top: 1px solid var(--border);
    }

    .collapsible.open .collapsible-content { display: block; }

    .example-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
    }

    .example-item {
      padding: 0.75rem;
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
    }

    .example-item.bad {
      background: var(--red-soft);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .example-item.good {
      background: var(--green-soft);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .example-label {
      font-weight: 700;
      font-size: 0.75rem;
      margin-bottom: 0.25rem;
    }

    .example-item.bad .example-label { color: var(--red); }
    .example-item.good .example-label { color: var(--green); }

    /* Frame Grid */
    .frame-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .frame-item {
      padding: 1.25rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
    }

    .frame-item-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .frame-item-num {
      width: 24px; height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--accent-soft);
      border-radius: var(--radius-sm);
      font-weight: 700;
      font-size: 0.75rem;
      color: var(--accent);
    }

    .frame-item-title {
      font-weight: 600;
      font-size: 0.9rem;
    }

    /* Why Section */
    .why-section {
      padding: 1.25rem;
      background: var(--purple-soft);
      border: 1px solid rgba(168, 85, 247, 0.25);
      border-radius: var(--radius-md);
      margin-bottom: 1.5rem;
    }

    .why-section.hidden { display: none; }

    .why-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .why-title { font-weight: 700; color: var(--purple); }
    .why-subtitle { font-size: 0.8rem; color: var(--text-secondary); }

    .why-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.6rem;
    }

    .why-num {
      width: 22px; height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(168, 85, 247, 0.2);
      border-radius: 6px;
      font-weight: 700;
      font-size: 0.75rem;
      color: var(--purple);
      flex-shrink: 0;
    }

    .why-row input {
      flex: 1;
      padding: 0.6rem 0.85rem;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text);
      font-family: inherit;
      font-size: 0.85rem;
    }

    .why-row input:focus { outline: none; border-color: var(--purple); }

    /* Decision Options */
    .decision-options { display: flex; flex-direction: column; gap: 0.85rem; }

    .decision-option {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1.25rem;
      background: rgba(255,255,255,0.02);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: var(--transition);
    }

    .decision-option input { display: none; }

    .decision-option:hover {
      border-color: var(--border-hover);
      background: rgba(255,255,255,0.04);
    }

    .decision-option.selected {
      border-color: var(--accent);
      background: var(--accent-soft);
    }

    .option-icon {
      width: 44px; height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-md);
      font-size: 1.25rem;
      flex-shrink: 0;
    }

    .decision-option[data-type="small"] .option-icon {
      background: var(--green-soft);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .decision-option[data-type="medium"] .option-icon {
      background: var(--orange-soft);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .decision-option[data-type="big"] .option-icon {
      background: var(--red-soft);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .option-content { flex: 1; }
    .option-title { font-weight: 700; font-size: 1rem; margin-bottom: 0.25rem; }
    .option-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem; }

    .option-meta {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .option-time {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Rating */
    .rating-box {
      padding: 1.25rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
    }

    .rating-numbers {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .rating-num {
      width: 26px; height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.03);
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .rating-slider {
      width: 100%;
      -webkit-appearance: none;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(to left, var(--green), var(--orange), var(--red));
      margin: 0.5rem 0;
    }

    .rating-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 22px; height: 22px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--accent);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .rating-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .rating-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .rating-value {
      padding: 0.5rem 1.25rem;
      background: var(--accent-soft);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: var(--radius-sm);
      font-weight: 800;
      font-size: 1.25rem;
      color: var(--accent);
    }

    /* Checkbox */
    .checkbox-list { display: flex; flex-direction: column; gap: 0.6rem; }

    .checkbox-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.9rem 1rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: var(--transition);
    }

    .checkbox-item:hover { border-color: var(--border-hover); }

    .checkbox-item.checked {
      border-color: var(--green);
      background: var(--green-soft);
    }

    .checkbox-item input { display: none; }

    .checkbox-box {
      width: 22px; height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.05);
      border: 2px solid var(--border);
      border-radius: 6px;
      font-size: 0.8rem;
      flex-shrink: 0;
      transition: var(--transition);
    }

    .checkbox-item.checked .checkbox-box {
      background: var(--green);
      border-color: var(--green);
      color: white;
    }

    .checkbox-content { flex: 1; }
    .checkbox-title { font-weight: 600; font-size: 0.9rem; }
    .checkbox-desc { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.15rem; }

    /* Radio Cards */
    .radio-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.75rem;
    }

    .radio-card {
      padding: 1.25rem 1rem;
      background: rgba(255,255,255,0.02);
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .radio-card:hover { border-color: var(--border-hover); }

    .radio-card.selected {
      border-color: var(--accent);
      background: var(--accent-soft);
    }

    .radio-card input { display: none; }
    .radio-card-icon { font-size: 1.75rem; margin-bottom: 0.5rem; }
    .radio-card-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 0.25rem; }
    .radio-card-desc { font-size: 0.75rem; color: var(--text-muted); }

    /* Columns */
    .columns {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .column-card {
      padding: 1.25rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
    }

    .column-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
    }

    /* Deep Analysis */
    .deep-section {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background: linear-gradient(135deg, var(--purple-soft), rgba(99, 102, 241, 0.05));
      border: 1px solid rgba(168, 85, 247, 0.25);
      border-radius: var(--radius-lg);
    }

    .deep-section.hidden { display: none; }

    .deep-section-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.25rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(168, 85, 247, 0.2);
    }

    .deep-section-icon { font-size: 1.5rem; }
    .deep-section-title { font-weight: 700; color: var(--purple); }

    .time-box {
      padding: 1.25rem;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      margin-bottom: 1rem;
    }

    .time-box-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    .time-box-icon { font-size: 1.4rem; }
    .time-box-title { font-weight: 700; font-size: 1rem; }

    .pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .pros-box, .cons-box {
      padding: 1rem;
      border-radius: var(--radius-md);
    }

    .pros-box {
      background: var(--green-soft);
      border: 1px solid rgba(16, 185, 129, 0.25);
    }

    .cons-box {
      background: var(--red-soft);
      border: 1px solid rgba(239, 68, 68, 0.25);
    }

    .pros-header, .cons-header {
      font-weight: 700;
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .pros-header { color: var(--green); }
    .cons-header { color: var(--red); }

    .pros-box .form-input, .cons-box .form-input { background: rgba(0,0,0,0.2); }

    /* Commitment Box */
    .commitment-box {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background: linear-gradient(135deg, var(--green-soft), var(--cyan-soft));
      border: 1px solid rgba(16, 185, 129, 0.25);
      border-radius: var(--radius-lg);
    }

    .commitment-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .commitment-title { font-weight: 700; color: var(--green); }

    .commitment-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .commitment-item {
      padding: 1rem;
      background: rgba(0,0,0,0.2);
      border-radius: var(--radius-md);
    }

    .commitment-item-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 0.35rem;
    }

    /* Buttons */
    .btn {
      padding: 0.85rem 1.75rem;
      border-radius: 999px;
      border: none;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: var(--transition);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #4f46e5);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px var(--accent-glow);
    }

    .btn-secondary {
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      color: var(--text);
    }

    .btn-secondary:hover { background: rgba(255,255,255,0.08); }

    .btn-success {
      background: linear-gradient(135deg, var(--green), #059669);
      color: white;
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
    }

    .card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
    }

    /* Summary */
    .summary-container {
      margin-top: 1.5rem;
      padding: 1.5rem;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
    }

    .summary-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-top: 1px solid var(--border);
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .summary-title { font-weight: 700; font-size: 1rem; }

    .summary-buttons { display: flex; gap: 0.5rem; }

    .copy-btn {
      padding: 0.6rem 1.25rem;
      background: var(--accent-soft);
      border: 1px solid var(--accent);
      border-radius: var(--radius-sm);
      color: var(--accent);
      font-family: inherit;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      transition: var(--transition);
    }

    .copy-btn:hover { background: var(--accent); color: white; }

    .copy-btn.copied {
      background: var(--green);
      border-color: var(--green);
      color: white;
    }

    .summary-content {
      font-size: 0.85rem;
      line-height: 1.9;
      white-space: pre-wrap;
      max-height: 500px;
      overflow-y: auto;
      padding-left: 0.5rem;
    }

    .summary-content::-webkit-scrollbar { width: 5px; }
    .summary-content::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); border-radius: 3px; }
    .summary-content::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 3px; }

    /* Utility */
    .divider { height: 1px; background: var(--border); margin: 1.5rem 0; }

    /* Responsive */
    @media (max-width: 640px) {
      .container { padding: 1.25rem 1rem 3rem; }
      .card { padding: 1.5rem; }
      .frame-grid, .columns, .example-grid, .commitment-grid, .pros-cons { grid-template-columns: 1fr; }
      .card-actions { flex-direction: column; gap: 0.75rem; }
      .card-actions .btn { width: 100%; justify-content: center; }
      .progress-line { display: none; }
      .progress-step { padding: 0.4rem 0.6rem; font-size: 0.7rem; }
    }
  </style>
</head>
<body>
  <div class="theme-controls">
    <button class="theme-btn" id="themeToggle" title="ØªØºÛŒÛŒØ± ØªÙ…">ğŸŒ“</button>
    <button class="theme-btn" id="brightnessToggle" title="Ø±ÙˆØ´Ù†Ø§ÛŒÛŒ">â˜€ï¸</button>
  </div>

  <div class="theme-menu" id="themeMenu">
    <button class="theme-option active" data-theme="dark">ğŸŒ™ Ø´Ø¨</button>
    <button class="theme-option" data-theme="light">â˜€ï¸ Ø±ÙˆØ²</button>
    <button class="theme-option" data-theme="sepia">ğŸ“– Ù…Ø·Ø§Ù„Ø¹Ù‡</button>
  </div>

  <div class="brightness-control" id="brightnessControl">
    <div class="brightness-label">ğŸ’¡ Ø±ÙˆØ´Ù†Ø§ÛŒÛŒ</div>
    <input type="range" min="50" max="120" value="100" class="brightness-slider" id="brightnessSlider" />
  </div>

  <div class="container">
    <header>
      <div class="logo">
        <span class="logo-dot"></span>
        <span>Ø§Ø¨Ø²Ø§Ø± ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ</span>
      </div>
      <h1>Ù…Ø¯Ù„ <span class="gradient-text">Û±Û°â€“Û±Û°â€“Û±Û°</span></h1>
      <p class="subtitle">
        Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± ØªØµÙ…ÛŒÙ… Ù…Ù‡Ù…ØŒ Ø§Ø² Ø³Ù‡ Ù„Ù†Ø² Ø²Ù…Ø§Ù†ÛŒ Ø¨Ù‡Ø´ Ù†Ú¯Ø§Ù‡ Ú©Ù†
      </p>
      <div class="method-badge">
        <span><strong>Û±Û° Ø«Ø§Ù†ÛŒÙ‡</strong> Ø´Ù‡ÙˆØ¯</span>
        <span>â†</span>
        <span><strong>Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡</strong> ØªØ­Ù„ÛŒÙ„</span>
        <span>â†</span>
        <span><strong>Û±Û° Ø±ÙˆØ²</strong> Ø§Ù‚Ø¯Ø§Ù…</span>
      </div>
      <div class="time-hint">
        â±ï¸ ØªØµÙ…ÛŒÙ… Ú©ÙˆÚ†Ú© ~Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ | Ù…ØªÙˆØ³Ø· ~Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ | Ø¨Ø²Ø±Ú¯ ~Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡
      </div>
    </header>

    <div class="progress-bar" id="progressBar">
      <div class="progress-step active" data-step="0"><span class="num">Û°</span><span>ÙØ±ÛŒÙ…</span></div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="1"><span class="num">Û±</span><span>Ø´Ù‡ÙˆØ¯</span></div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="2"><span class="num">Û²</span><span>ØªØ­Ù„ÛŒÙ„</span></div>
      <div class="progress-line"></div>
      <div class="progress-step" data-step="3"><span class="num">Û³</span><span>Ø§Ù‚Ø¯Ø§Ù…</span></div>
    </div>

    <main>
      <!-- STEP 0 -->
      <section class="card visible" id="step-0">
        <div class="card-header">
          <div class="card-icon purple">ğŸ¯</div>
          <div class="card-meta">
            <div class="step-label">Ú¯Ø§Ù… ØµÙØ±</div>
            <h2 class="card-title">ÙØ±ÛŒÙ… Ú©Ø±Ø¯Ù† Ù…Ø³Ø¦Ù„Ù‡</h2>
            <p class="card-desc">Ù‚Ø¨Ù„ Ø§Ø² Â«Ú†ÛŒÚ©Ø§Ø± Ú©Ù†Ù…ØŸÂ» Ø¨Ø§ÛŒØ¯ Ø¨ÙÙ‡Ù…ÛŒ Â«Ù…Ø³Ø¦Ù„Ù‡â€ŒØ§Ù… Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ú†ÛŒÙ‡ØŸÂ»</p>
          </div>
        </div>

        <div class="collapsible" id="exampleToggle">
          <button class="collapsible-btn" type="button">
            <span>ğŸ’¡ Ù…Ø«Ø§Ù„: ØªÙØ§ÙˆØª Â«Ù†Ø§Ù„Ù‡Â» Ùˆ Â«Ù…Ø³Ø¦Ù„Ù‡Â»</span>
            <span>â–¼</span>
          </button>
          <div class="collapsible-content">
            <div class="example-grid">
              <div class="example-item bad">
                <div class="example-label">âŒ Ù†Ø§Ù„Ù‡</div>
                Â«ÙˆÙ‚Øª Ú©Ù… Ù…ÛŒØ§Ø±Ù… Ùˆ Ù†Ù…ÛŒâ€ŒØ±Ø³Ù…Â»
              </div>
              <div class="example-item good">
                <div class="example-label">âœ… Ù…Ø³Ø¦Ù„Ù‡</div>
                Â«Ø¨Ø§ Û² Ø³Ø§Ø¹Øª Ú©Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ØŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ùˆ ØªØ§ Ø¢Ø®Ø± Ù…Ø§Ù‡ ØªÙ…ÙˆÙ… Ú©Ù†Ù…Â»
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Ù…ÙˆØ¶ÙˆØ¹ ØªØµÙ…ÛŒÙ…</label>
          <input type="text" class="form-input" id="decisionTopic" placeholder="Ù…Ø«Ø§Ù„: Ø§Ø³ØªØ¹ÙØ§ Ø¨Ø¯Ù… / Ù…Ù‡Ø§Ø¬Ø±Øª Ú©Ù†Ù… / Ø§ÛŒÙ† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø±Ùˆ Ù‚Ø¨ÙˆÙ„ Ú©Ù†Ù…" />
        </div>

        <div class="frame-grid">
          <div class="frame-item">
            <div class="frame-item-header">
              <span class="frame-item-num">Û±</span>
              <span class="frame-item-title">Ø§Ù„Ø§Ù† Ú©Ø¬Ø§ÛŒÛŒØŸ</span>
            </div>
            <textarea class="form-input" id="currentState" placeholder="ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª: Ø¯Ø±Ø¢Ù…Ø¯ØŒ Ø³Ø§Ø¹Øª Ú©Ø§Ø±ØŒ Ø±Ø¶Ø§ÛŒØª..."></textarea>
          </div>
          <div class="frame-item">
            <div class="frame-item-header">
              <span class="frame-item-num">Û²</span>
              <span class="frame-item-title">Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ú©Ø¬Ø§ Ø¨Ø§Ø´ÛŒØŸ</span>
            </div>
            <textarea class="form-input" id="desiredState" placeholder="ÙˆØ¶Ø¹ÛŒØª Ù…Ø·Ù„ÙˆØ¨: Ú†Ù‡ ØªØºÛŒÛŒØ±ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¨Ø¨ÛŒÙ†ÛŒØŸ"></textarea>
          </div>
          <div class="frame-item">
            <div class="frame-item-header">
              <span class="frame-item-num">Û³</span>
              <span class="frame-item-title">Ù…ÙˆØ§Ù†Ø¹ Ú†ÛŒÙ‡ØŸ</span>
            </div>
            <textarea class="form-input" id="obstacles" placeholder="Ú†ÛŒ Ø¬Ù„ÙˆØª Ø±Ùˆ Ú¯Ø±ÙØªÙ‡ØŸ Ù¾ÙˆÙ„ØŒ Ø²Ù…Ø§Ù†ØŒ Ù…Ù‡Ø§Ø±ØªØŒ ØªØ±Ø³..."></textarea>
          </div>
          <div class="frame-item">
            <div class="frame-item-header">
              <span class="frame-item-num">Û´</span>
              <span class="frame-item-title">Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</span>
            </div>
            <textarea class="form-input" id="constraints" placeholder="ØªØ¹Ù‡Ø¯Ø§ØªØŒ Ø¨ÙˆØ¯Ø¬Ù‡ØŒ Ø²Ù…Ø§Ù†ØŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡..."></textarea>
          </div>
        </div>

        <div class="why-section hidden" id="whysSection">
          <div class="why-header">
            <span style="font-size: 1.25rem;">ğŸ”—</span>
            <div>
              <div class="why-title">ØªÚ©Ù†ÛŒÚ© Ûµ Ú†Ø±Ø§</div>
              <div class="why-subtitle">Ø¨Ø§ Ù¾Ø±Ø³ÛŒØ¯Ù† Â«Ú†Ø±Ø§Â» Ø¨Ù‡ Ø±ÛŒØ´Ù‡ Ø¨Ø±Ø³</div>
            </div>
          </div>
          <div class="why-row"><span class="why-num">Û±</span><input type="text" id="why1" placeholder="Ú†Ø±Ø§ Ø§ÛŒÙ† ØªØµÙ…ÛŒÙ… Ø§Ù„Ø§Ù† Ù…Ù‡Ù…Ù‡ØŸ" /></div>
          <div class="why-row"><span class="why-num">Û²</span><input type="text" id="why2" placeholder="Ú†Ø±Ø§ØŸ" /></div>
          <div class="why-row"><span class="why-num">Û³</span><input type="text" id="why3" placeholder="Ú†Ø±Ø§ØŸ" /></div>
          <div class="why-row"><span class="why-num">Û´</span><input type="text" id="why4" placeholder="Ú†Ø±Ø§ØŸ" /></div>
          <div class="why-row"><span class="why-num">Ûµ</span><input type="text" id="why5" placeholder="Ø±ÛŒØ´Ù‡ Ø§ØµÙ„ÛŒ" /></div>
        </div>

        <div class="divider"></div>

        <div class="form-group">
          <label class="form-label">Ø§ÛŒÙ† ØªØµÙ…ÛŒÙ… Ú†Ù‚Ø¯Ø± Ø¨Ø²Ø±Ú¯Ù‡ØŸ</label>
        </div>

        <div class="decision-options">
          <label class="decision-option" data-type="small">
            <input type="radio" name="decisionType" value="small" />
            <div class="option-icon">ğŸŸ¢</div>
            <div class="option-content">
              <div class="option-title">Ú©ÙˆÚ†Ú© Ùˆ Ø¨Ø±Ú¯Ø´Øªâ€ŒÙ¾Ø°ÛŒØ±</div>
              <div class="option-desc">Ø§Ú¯Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø´Ø¯ØŒ Ø±Ø§Ø­Øª Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ±Ù‡</div>
              <div class="option-meta"><div class="option-time">â±ï¸ ~Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡</div></div>
            </div>
          </label>

          <label class="decision-option" data-type="medium">
            <input type="radio" name="decisionType" value="medium" />
            <div class="option-icon">ğŸŸ¡</div>
            <div class="option-content">
              <div class="option-title">Ù…ØªÙˆØ³Ø·</div>
              <div class="option-desc">Ù…Ù‡Ù…Ù‡ ÙˆÙ„ÛŒ Ù‚Ø§Ø¨Ù„ Ø§ØµÙ„Ø§Ø­Ù‡</div>
              <div class="option-meta"><div class="option-time">â±ï¸ ~Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡</div></div>
            </div>
          </label>

          <label class="decision-option" data-type="big">
            <input type="radio" name="decisionType" value="big" />
            <div class="option-icon">ğŸ”´</div>
            <div class="option-content">
              <div class="option-title">Ø¨Ø²Ø±Ú¯ Ùˆ Ø³Ø®Øªâ€ŒØ¨Ø±Ú¯Ø´Øª</div>
              <div class="option-desc">Ù†ØªÛŒØ¬Ù‡â€ŒØ´ Ø³Ø§Ù„â€ŒÙ‡Ø§ Ø¨Ø§Ù‡Ø§ØªÙ‡</div>
              <div class="option-meta"><div class="option-time">â±ï¸ ~Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡</div></div>
            </div>
          </label>
        </div>
      </section>

      <!-- STEP 1 -->
      <section class="card hidden" id="step-1">
        <div class="card-header">
          <div class="card-icon cyan">âš¡</div>
          <div class="card-meta">
            <div class="step-label">Ú¯Ø§Ù… ÛŒÚ©</div>
            <h2 class="card-title">Û±Û° Ø«Ø§Ù†ÛŒÙ‡ â€” Ø´Ù‡ÙˆØ¯</h2>
            <p class="card-desc">Ø§ÛŒÙ† ÙÙ‚Ø· Ø¯Ø±ÛŒØ§ÙØª Ø³ÛŒÚ¯Ù†Ø§Ù„Ù‡ØŒ Ù†Ù‡ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ</p>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-header">âš ï¸ Ù‡Ø´Ø¯Ø§Ø±</div>
          <p>Ø´Ù‡ÙˆØ¯ Ù…Ù‡Ù…Ù‡ ÙˆÙ„ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª. Ù…Ù…Ú©Ù†Ù‡ Ø§Ø² ØªØ±Ø³ ÛŒØ§ ØªØ±ÙˆÙ…Ø§ Ø¨Ø§Ø´Ù‡. Ø¯Ø± Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ Ù…ÛŒâ€ŒØ³Ù†Ø¬ÛŒÙ….</p>
        </div>

        <div class="form-group">
          <label class="form-label">Ø§ÙˆÙ„ÛŒÙ† Ø­Ø³Øª Ú†ÛŒÙ‡ØŸ</label>
          <textarea class="form-input" id="gutReaction" placeholder="Ø¨Ø¯ÙˆÙ† Ø³Ø§Ù†Ø³ÙˆØ± Ø¨Ù†ÙˆÛŒØ³..."></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Ø´Ø¯Øª Ø§ÛŒÙ† Ø§Ø­Ø³Ø§Ø³</label>
          <div class="rating-box">
            <div class="rating-numbers">
              <span class="rating-num">Û±</span><span class="rating-num">Û²</span><span class="rating-num">Û³</span><span class="rating-num">Û´</span><span class="rating-num">Ûµ</span>
              <span class="rating-num">Û¶</span><span class="rating-num">Û·</span><span class="rating-num">Û¸</span><span class="rating-num">Û¹</span><span class="rating-num">Û±Û°</span>
            </div>
            <input type="range" min="1" max="10" value="5" class="rating-slider" id="feelingRating" />
            <div class="rating-labels"><span>Ú©Ù…</span><span>Ù…ØªÙˆØ³Ø·</span><span>Ø²ÛŒØ§Ø¯</span></div>
            <div class="rating-display"><div class="rating-value" id="feelingRatingValue">Ûµ</div></div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">ÙˆØ¶Ø¹ÛŒØª Ø§Ù„Ø§Ù†Øª (HALT)</label>
          <div class="checkbox-list" id="haltCheck">
            <label class="checkbox-item"><input type="checkbox" value="Ú¯Ø±Ø³Ù†Ù‡" /><span class="checkbox-box">âœ“</span><div class="checkbox-content"><div class="checkbox-title">Ú¯Ø±Ø³Ù†Ù‡ ğŸ½ï¸</div></div></label>
            <label class="checkbox-item"><input type="checkbox" value="Ø¹ØµØ¨Ø§Ù†ÛŒ" /><span class="checkbox-box">âœ“</span><div class="checkbox-content"><div class="checkbox-title">Ø¹ØµØ¨Ø§Ù†ÛŒ ğŸ˜¤</div></div></label>
            <label class="checkbox-item"><input type="checkbox" value="ØªÙ†Ù‡Ø§" /><span class="checkbox-box">âœ“</span><div class="checkbox-content"><div class="checkbox-title">ØªÙ†Ù‡Ø§ ğŸ˜”</div></div></label>
            <label class="checkbox-item"><input type="checkbox" value="Ø®Ø³ØªÙ‡" /><span class="checkbox-box">âœ“</span><div class="checkbox-content"><div class="checkbox-title">Ø®Ø³ØªÙ‡ ğŸ˜´</div></div></label>
            <label class="checkbox-item"><input type="checkbox" value="Ø®ÙˆØ¨" /><span class="checkbox-box">âœ“</span><div class="checkbox-content"><div class="checkbox-title">Ø­Ø§Ù„Ù… Ø®ÙˆØ¨Ù‡ âœ¨</div></div></label>
          </div>
        </div>

        <div class="card-actions">
          <button class="btn btn-secondary" id="backToStep0">â†’ Ù‚Ø¨Ù„ÛŒ</button>
          <button class="btn btn-success" id="toStep2">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
        </div>
      </section>

      <!-- STEP 2 -->
      <section class="card hidden" id="step-2">
        <div class="card-header">
          <div class="card-icon green">ğŸ§ </div>
          <div class="card-meta">
            <div class="step-label">Ú¯Ø§Ù… Ø¯Ùˆ</div>
            <h2 class="card-title">Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ â€” ØªØ­Ù„ÛŒÙ„</h2>
            <p class="card-desc">Ø­Ø§Ù„Ø§ Ù…Ù†Ø·Ù‚ÛŒ ÙÚ©Ø± Ú©Ù†</p>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§Øª Ú†ÛŒÙ‡ØŸ</label>
          <textarea class="form-input" id="options" placeholder="Ú¯Ø²ÛŒÙ†Ù‡ Û±: Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù…&#10;Ú¯Ø²ÛŒÙ†Ù‡ Û²: Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ù…&#10;Ú¯Ø²ÛŒÙ†Ù‡ Û³: Ù†Ø³Ø®Ù‡ Ú©ÙˆÚ†Ú©ØªØ±"></textarea>
        </div>

        <div class="columns">
          <div class="column-card">
            <div class="column-title">âœ… Ø§Ú¯Ù‡ Ø§Ù†Ø¬Ø§Ù…Ø´ Ø¨Ø¯Ù…...</div>
            <textarea class="form-input" id="ifYes" placeholder="Ú†ÛŒ Ù…ÛŒâ€ŒØ´Ù‡ØŸ"></textarea>
          </div>
          <div class="column-card">
            <div class="column-title">âŒ Ø§Ú¯Ù‡ Ø§Ù†Ø¬Ø§Ù…Ø´ Ù†Ø¯Ù…...</div>
            <textarea class="form-input" id="ifNo" placeholder="Ú†ÛŒ Ù…ÛŒâ€ŒØ´Ù‡ØŸ"></textarea>
          </div>
        </div>

        <div class="form-group" style="margin-top: 1.5rem;">
          <label class="form-label">ğŸ­ ÙˆÚ©ÛŒÙ„ Ù…Ø¯Ø§ÙØ¹ Ø´ÛŒØ·Ø§Ù†</label>
          <textarea class="form-input" id="devilAdvocate" placeholder="ÛŒÙ‡ Ø¯Ù„ÛŒÙ„ Ù…Ø­Ú©Ù… Ø¨ÛŒØ§Ø± Ú©Ù‡ Ú†Ø±Ø§ Ø§ÛŒÙ† ØªØµÙ…ÛŒÙ… Ù…Ù…Ú©Ù†Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨Ø§Ø´Ù‡"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Ø§Ø² Ú©Ø¯ÙˆÙ… Ø¨ÛŒØ´ØªØ± Ù¾Ø´ÛŒÙ…ÙˆÙ† Ù…ÛŒâ€ŒØ´ÛŒØŸ</label>
          <div class="radio-grid" id="regretChoice">
            <label class="radio-card"><input type="radio" name="regret" value="action" /><div class="radio-card-icon">ğŸ˜”</div><div class="radio-card-title">Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†</div></label>
            <label class="radio-card"><input type="radio" name="regret" value="inaction" /><div class="radio-card-icon">ğŸ˜•</div><div class="radio-card-title">Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ø§Ø¯Ù†</div></label>
            <label class="radio-card"><input type="radio" name="regret" value="equal" /><div class="radio-card-icon">âš–ï¸</div><div class="radio-card-title">Ù†Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù…</div></label>
          </div>
        </div>

        <div class="deep-section hidden" id="deepAnalysis">
          <div class="deep-section-header">
            <span class="deep-section-icon">ğŸ”®</span>
            <div>
              <div class="deep-section-title">ØªØ­Ù„ÛŒÙ„ Ø¹Ù…ÛŒÙ‚: Û±Û° Ø±ÙˆØ² / Û±Û° Ù…Ø§Ù‡ / Û±Û° Ø³Ø§Ù„</div>
            </div>
          </div>

          <div class="time-box">
            <div class="time-box-header">
              <span class="time-box-icon">ğŸ“…</span>
              <div class="time-box-title">Û±Û° Ø±ÙˆØ² Ø¨Ø¹Ø¯</div>
            </div>
            <div class="pros-cons">
              <div class="pros-box"><div class="pros-header">âœ… Ø³ÙˆØ¯Ù‡Ø§</div><textarea class="form-input" id="pros10days" placeholder=""></textarea></div>
              <div class="cons-box"><div class="cons-header">âŒ Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§</div><textarea class="form-input" id="cons10days" placeholder=""></textarea></div>
            </div>
          </div>

          <div class="time-box">
            <div class="time-box-header">
              <span class="time-box-icon">ğŸ“†</span>
              <div class="time-box-title">Û±Û° Ù…Ø§Ù‡ Ø¨Ø¹Ø¯</div>
            </div>
            <div class="pros-cons">
              <div class="pros-box"><div class="pros-header">âœ… Ø³ÙˆØ¯Ù‡Ø§</div><textarea class="form-input" id="pros10months" placeholder=""></textarea></div>
              <div class="cons-box"><div class="cons-header">âŒ Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§</div><textarea class="form-input" id="cons10months" placeholder=""></textarea></div>
            </div>
          </div>

          <div class="time-box">
            <div class="time-box-header">
              <span class="time-box-icon">ğŸ”®</span>
              <div class="time-box-title">Û±Û° Ø³Ø§Ù„ Ø¨Ø¹Ø¯</div>
            </div>
            <div class="pros-cons">
              <div class="pros-box"><div class="pros-header">âœ… Ø³ÙˆØ¯Ù‡Ø§</div><textarea class="form-input" id="pros10years" placeholder=""></textarea></div>
              <div class="cons-box"><div class="cons-header">âŒ Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§</div><textarea class="form-input" id="cons10years" placeholder=""></textarea></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸŒŸ Ø¨Ù‡ØªØ±ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ</label>
            <textarea class="form-input" id="bestCase" placeholder="Ø§Ú¯Ù‡ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¹Ø§Ù„ÛŒ Ù¾ÛŒØ´ Ø¨Ø±Ù‡..."></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">âš ï¸ Ø¨Ø¯ØªØ±ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ + Ú†Ø±Ø§ Ù…Ù…Ú©Ù†Ù‡ Ø´Ú©Ø³Øª Ø¨Ø®ÙˆØ±Ù…</label>
            <textarea class="form-input" id="worstCase" placeholder="Ø§Ú¯Ù‡ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¨Ø¯ Ù¾ÛŒØ´ Ø¨Ø±Ù‡... Ùˆ Ø¯Ù„Ø§ÛŒÙ„ Ø´Ú©Ø³Øª Ø§Ø­ØªÙ…Ø§Ù„ÛŒ"></textarea>
          </div>
        </div>

        <div class="card-actions">
          <button class="btn btn-secondary" id="backToStep1">â†’ Ù‚Ø¨Ù„ÛŒ</button>
          <button class="btn btn-success" id="toStep3">Ø§Ø¯Ø§Ù…Ù‡ â†</button>
        </div>
      </section>

      <!-- STEP 3 -->
      <section class="card hidden" id="step-3">
        <div class="card-header">
          <div class="card-icon orange">ğŸš€</div>
          <div class="card-meta">
            <div class="step-label">Ú¯Ø§Ù… Ø³Ù‡</div>
            <h2 class="card-title">Û±Û° Ø±ÙˆØ² â€” Ø§Ù‚Ø¯Ø§Ù…</h2>
            <p class="card-desc">ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ± Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ú†ÛŒÙ†</p>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Ù‚Ø¯Ù… Ø¨Ø¹Ø¯ÛŒ Ú†ÛŒÙ‡ØŸ</label>
          <div class="radio-grid" id="actionType">
            <label class="radio-card"><input type="radio" name="actionType" value="experiment" /><div class="radio-card-icon">ğŸ§ª</div><div class="radio-card-title">Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©ÙˆÚ†Ú©</div><div class="radio-card-desc">ÛŒÙ‡ Ù†Ø³Ø®Ù‡ Ú©ÙˆÚ†ÛŒÚ© Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†Ù…</div></label>
            <label class="radio-card"><input type="radio" name="actionType" value="research" /><div class="radio-card-icon">ğŸ“š</div><div class="radio-card-title">ØªØ­Ù‚ÛŒÙ‚ Ø¨ÛŒØ´ØªØ±</div><div class="radio-card-desc">Ø¨Ø§ Ù…ØªØ®ØµØµ ØµØ­Ø¨Øª Ú©Ù†Ù…</div></label>
            <label class="radio-card"><input type="radio" name="actionType" value="ready" /><div class="radio-card-icon">âœ…</div><div class="radio-card-title">Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§Ù…</div><div class="radio-card-desc">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§ÙÛŒ Ø¯Ø§Ø±Ù…</div></label>
          </div>
        </div>

        <div class="commitment-box">
          <div class="commitment-header">
            <span style="font-size: 1.25rem;">ğŸ“</span>
            <div class="commitment-title">ØªØ¹Ù‡Ø¯Ù†Ø§Ù…Ù‡ Ø§Ù‚Ø¯Ø§Ù…</div>
          </div>

          <div class="commitment-grid">
            <div class="commitment-item">
              <div class="commitment-item-label">Ø§ÙˆÙ„ÛŒÙ† Ù‚Ø¯Ù…</div>
              <input type="text" class="form-input" id="firstStep" placeholder="Ø§Ù…Ø´Ø¨ Ú†ÛŒÚ©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù…ØŸ" />
            </div>
            <div class="commitment-item">
              <div class="commitment-item-label">ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹</div>
              <input type="text" class="form-input" id="startDate" placeholder="Ù…Ø«Ø§Ù„: ÙØ±Ø¯Ø§" />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Ø¨Ù‡ Ú©ÛŒ Ù…ÛŒâ€ŒÚ¯Ù…ØŸ</label>
            <input type="text" class="form-input" id="accountability" placeholder="ÛŒÙ‡ Ù†ÙØ± Ú©Ù‡ Ø¨Ù‡Ø´ Ø¨Ú¯Ù… ØªØ§ Ù…ØªØ¹Ù‡Ø¯ Ø¨Ù…ÙˆÙ†Ù…" />
          </div>
        </div>

        <div class="form-group" style="margin-top: 1.5rem;">
          <label class="form-label">ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ</label>
          <textarea class="form-input" id="finalDecision" placeholder="ØªØµÙ…ÛŒÙ… Ú¯Ø±ÙØªÙ… Ú©Ù‡..."></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Ø³Ø¤Ø§Ù„Ø§ØªÙ… Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§ÙˆØ±/AI</label>
          <textarea class="form-input" id="keyQuestions" placeholder="Ú†Ù‡ Ø³Ø¤Ø§Ù„Ø§ØªÛŒ Ø¯Ø§Ø±Ù… Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… Ú©Ù…Ú© Ø¨Ú¯ÛŒØ±Ù…ØŸ"></textarea>
        </div>

        <div class="card-actions">
          <button class="btn btn-secondary" id="backToStep2">â†’ Ù‚Ø¨Ù„ÛŒ</button>
          <button class="btn btn-success" id="showSummary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´ â†</button>
        </div>
      </section>

      <!-- SUMMARY -->
      <section class="card hidden" id="step-summary">
        <div class="card-header">
          <div class="card-icon green">ğŸ“‹</div>
          <div class="card-meta">
            <div class="step-label">Ú¯Ø²Ø§Ø±Ø´</div>
            <h2 class="card-title">Ú¯Ø²Ø§Ø±Ø´ ØªØ­Ù„ÛŒÙ„ ØªØµÙ…ÛŒÙ…</h2>
            <p class="card-desc">Ú©Ù¾ÛŒ Ú©Ù† Ùˆ Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§ÙˆØ± ÛŒØ§ AI Ø¨ÙØ±Ø³Øª</p>
          </div>
        </div>

        <div class="summary-container">
          <div class="summary-header">
            <div class="summary-title">Ù…ØªÙ† Ú¯Ø²Ø§Ø±Ø´</div>
            <div class="summary-buttons">
              <button class="copy-btn" id="copyBtn">ğŸ“‹ Ú©Ù¾ÛŒ</button>
            </div>
          </div>
          <div class="summary-content" id="summaryContent"></div>
        </div>

        <div class="card-actions" style="justify-content: center;">
          <button class="btn btn-primary" id="resetAll">Ø´Ø±ÙˆØ¹ Ø§Ø² Ø§ÙˆÙ„</button>
        </div>
      </section>
    </main>
  </div>

  <script>
    let currentStep = 0;
    let decisionType = null;
    let maxSteps = 1;

    const cards = {
      0: document.getElementById('step-0'),
      1: document.getElementById('step-1'),
      2: document.getElementById('step-2'),
      3: document.getElementById('step-3'),
      summary: document.getElementById('step-summary')
    };

    function toPersian(n) {
      return n.toString().replace(/\d/g, d => 'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[d]);
    }

    function showCard(key) {
      Object.values(cards).forEach(c => {
        c.classList.add('hidden');
        c.classList.remove('visible');
      });
      setTimeout(() => {
        cards[key].classList.remove('hidden');
        setTimeout(() => {
          cards[key].classList.add('visible');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }, 50);
      }, 300);
    }

    function updateProgress() {
      document.querySelectorAll('.progress-step').forEach(s => {
        const n = parseInt(s.dataset.step);
        s.classList.remove('active', 'done');
        if (n < currentStep) s.classList.add('done');
        else if (n === currentStep) s.classList.add('active');
      });
      document.querySelectorAll('.progress-line').forEach((l, i) => {
        l.classList.toggle('done', i < currentStep);
      });
    }

    // Collapsible
    document.querySelectorAll('.collapsible-btn').forEach(btn => {
      btn.addEventListener('click', () => btn.closest('.collapsible').classList.toggle('open'));
    });

    // Decision Options
    document.querySelectorAll('.decision-option').forEach(opt => {
      opt.addEventListener('click', () => {
        document.querySelectorAll('.decision-option').forEach(o => o.classList.remove('selected'));
        opt.classList.add('selected');
        decisionType = opt.dataset.type;
        
        const whysSection = document.getElementById('whysSection');
        const deepAnalysis = document.getElementById('deepAnalysis');
        
        // Reset
        whysSection.classList.add('hidden');
        deepAnalysis.classList.add('hidden');
        
        if (decisionType === 'small') {
          maxSteps = 1;
        } else if (decisionType === 'medium') {
          maxSteps = 2;
        } else {
          maxSteps = 3;
          whysSection.classList.remove('hidden');
          deepAnalysis.classList.remove('hidden');
        }

        setTimeout(() => {
          currentStep = 1;
          updateProgress();
          showCard(1);
        }, 400);
      });
    });

    // Sliders
    document.getElementById('feelingRating').addEventListener('input', function() {
      document.getElementById('feelingRatingValue').textContent = toPersian(this.value);
    });

    // Checkboxes
    document.querySelectorAll('.checkbox-item').forEach(item => {
      item.addEventListener('click', () => {
        const cb = item.querySelector('input');
        cb.checked = !cb.checked;
        item.classList.toggle('checked', cb.checked);
      });
    });

    // Radio Cards
    document.querySelectorAll('.radio-card').forEach(card => {
      card.addEventListener('click', () => {
        const name = card.querySelector('input').name;
        document.querySelectorAll(`.radio-card input[name="${name}"]`).forEach(r => {
          r.closest('.radio-card').classList.remove('selected');
        });
        card.classList.add('selected');
        card.querySelector('input').checked = true;
      });
    });

    // Navigation
    document.getElementById('backToStep0').addEventListener('click', () => {
      currentStep = 0;
      decisionType = null;
      document.querySelectorAll('.decision-option').forEach(o => o.classList.remove('selected'));
      updateProgress();
      showCard(0);
    });

    document.getElementById('toStep2').addEventListener('click', () => {
      if (maxSteps === 1) {
        document.getElementById('summaryContent').textContent = generateSummary();
        showCard('summary');
      } else {
        currentStep = 2;
        updateProgress();
        showCard(2);
      }
    });

    document.getElementById('backToStep1').addEventListener('click', () => {
      currentStep = 1;
      updateProgress();
      showCard(1);
    });

    document.getElementById('toStep3').addEventListener('click', () => {
      if (maxSteps === 2) {
        document.getElementById('summaryContent').textContent = generateSummary();
        showCard('summary');
      } else {
        currentStep = 3;
        updateProgress();
        showCard(3);
      }
    });

    document.getElementById('backToStep2').addEventListener('click', () => {
      currentStep = 2;
      updateProgress();
      showCard(2);
    });

    document.getElementById('showSummary').addEventListener('click', () => {
      document.getElementById('summaryContent').textContent = generateSummary();
      showCard('summary');
    });

    // Copy
    document.getElementById('copyBtn').addEventListener('click', async function() {
      const text = document.getElementById('summaryContent').textContent;
      try {
        await navigator.clipboard.writeText(text);
        this.classList.add('copied');
        this.textContent = 'âœ“ Ú©Ù¾ÛŒ Ø´Ø¯';
        setTimeout(() => {
          this.classList.remove('copied');
          this.textContent = 'ğŸ“‹ Ú©Ù¾ÛŒ';
        }, 2000);
      } catch(e) {
        alert('Ú©Ù¾ÛŒ Ù†Ø´Ø¯');
      }
    });

    // Reset
    document.getElementById('resetAll').addEventListener('click', () => {
      if (!confirm('Ù…Ø·Ù…Ø¦Ù†ÛŒØŸ')) return;
      currentStep = 0;
      decisionType = null;
      maxSteps = 1;
      document.querySelectorAll('.form-input').forEach(i => i.value = '');
      document.querySelectorAll('.checkbox-item').forEach(i => {
        i.classList.remove('checked');
        i.querySelector('input').checked = false;
      });
      document.querySelectorAll('.radio-card').forEach(c => {
        c.classList.remove('selected');
        c.querySelector('input').checked = false;
      });
      document.querySelectorAll('.decision-option').forEach(o => o.classList.remove('selected'));
      document.getElementById('feelingRating').value = 5;
      document.getElementById('feelingRatingValue').textContent = 'Ûµ';
      document.getElementById('whysSection').classList.add('hidden');
      document.getElementById('deepAnalysis').classList.add('hidden');
      updateProgress();
      showCard(0);
    });

    function generateSummary() {
      const v = id => document.getElementById(id)?.value?.trim() || '';
      const today = new Date();
      const dateStr = today.toLocaleDateString('fa-IR');
      
      const fr = parseInt(document.getElementById('feelingRating').value);
      
      const haltChecks = [];
      document.querySelectorAll('#haltCheck .checkbox-item.checked').forEach(i => {
        haltChecks.push(i.querySelector('.checkbox-title').textContent.trim());
      });
      
      const regretRadio = document.querySelector('input[name="regret"]:checked');
      const regretVal = regretRadio ? (regretRadio.value === 'action' ? 'Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†' : regretRadio.value === 'inaction' ? 'Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ø§Ø¯Ù†' : 'Ù†Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù…') : 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡';
      
      const actionRadio = document.querySelector('input[name="actionType"]:checked');
      const actionVal = actionRadio ? 
        (actionRadio.value === 'experiment' ? 'Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©ÙˆÚ†Ú©' : 
         actionRadio.value === 'research' ? 'ØªØ­Ù‚ÛŒÙ‚ Ø¨ÛŒØ´ØªØ±' : 'Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§Ù…') : 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡';

      const typeLabels = {
        small: 'Ú©ÙˆÚ†Ú©',
        medium: 'Ù…ØªÙˆØ³Ø·',
        big: 'Ø¨Ø²Ø±Ú¯'
      };

      let whyChain = '';
      for (let i = 1; i <= 5; i++) {
        const w = v('why' + i);
        if (w) whyChain += `Ú†Ø±Ø§ÛŒ ${toPersian(i)}: ${w}\n`;
      }

      let summary = `Ú¯Ø²Ø§Ø±Ø´ ØªØ­Ù„ÛŒÙ„ ØªØµÙ…ÛŒÙ… Ø¨Ø§ Ù…Ø¯Ù„ Û±Û°-Û±Û°-Û±Û°
ØªØ§Ø±ÛŒØ®: ${dateStr}

Ø§ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´ Ø®Ø±ÙˆØ¬ÛŒ ÛŒÚ© ÙØ±Ø¢ÛŒÙ†Ø¯ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒØ§ÙØªÙ‡ Ø§Ø³Øª.
Ù…Ø¯Ù„ Û±Û°-Û±Û°-Û±Û°: Ù†Ú¯Ø§Ù‡ Ø§Ø² Ø³Ù‡ Ø²Ø§ÙˆÛŒÙ‡ Ø²Ù…Ø§Ù†ÛŒ (Û±Û° Ø«Ø§Ù†ÛŒÙ‡ Ø´Ù‡ÙˆØ¯ØŒ Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ ØªØ­Ù„ÛŒÙ„ØŒ Û±Û° Ø±ÙˆØ² Ø§Ù‚Ø¯Ø§Ù…)


Ù…ÙˆØ¶ÙˆØ¹: ${v('decisionTopic') || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}
Ù†ÙˆØ¹: ${typeLabels[decisionType] || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}


ÙØ±ÛŒÙ… Ù…Ø³Ø¦Ù„Ù‡:

ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ: ${v('currentState') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

ÙˆØ¶Ø¹ÛŒØª Ù…Ø·Ù„ÙˆØ¨: ${v('desiredState') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

Ù…ÙˆØ§Ù†Ø¹: ${v('obstacles') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§: ${v('constraints') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

${whyChain ? `\nØ²Ù†Ø¬ÛŒØ±Ù‡ Ûµ Ú†Ø±Ø§:\n${whyChain}` : ''}

Ø´Ù‡ÙˆØ¯ (Û±Û° Ø«Ø§Ù†ÛŒÙ‡):

Ø§ÙˆÙ„ÛŒÙ† Ø­Ø³: ${v('gutReaction') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}
Ø´Ø¯Øª Ø§Ø­Ø³Ø§Ø³: ${toPersian(fr)} Ø§Ø² Û±Û°
ÙˆØ¶Ø¹ÛŒØª HALT: ${haltChecks.length > 0 ? haltChecks.join('ØŒ ') : 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}
`;

      if (maxSteps >= 2) {
        summary += `

ØªØ­Ù„ÛŒÙ„ (Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡):

Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§: ${v('options') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

Ø§Ú¯Ø± Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù…: ${v('ifYes') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

Ø§Ú¯Ø± Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ù…: ${v('ifNo') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

ÙˆÚ©ÛŒÙ„ Ù…Ø¯Ø§ÙØ¹ Ø´ÛŒØ·Ø§Ù†: ${v('devilAdvocate') || 'Ù†ÙˆØ´ØªÙ‡ Ù†Ø´Ø¯Ù‡'}

Ù¾Ø´ÛŒÙ…Ø§Ù†ÛŒ Ø¨ÛŒØ´ØªØ± Ø§Ø²: ${regretVal}
`;
      }

      if (decisionType === 'big') {
        summary += `

ØªØ­Ù„ÛŒÙ„ Ø¹Ù…ÛŒÙ‚ (Û±Û° Ø±ÙˆØ² / Û±Û° Ù…Ø§Ù‡ / Û±Û° Ø³Ø§Ù„):

Û±Û° Ø±ÙˆØ² Ø¨Ø¹Ø¯:
  Ø³ÙˆØ¯Ù‡Ø§: ${v('pros10days') || '-'}
  Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§: ${v('cons10days') || '-'}

Û±Û° Ù…Ø§Ù‡ Ø¨Ø¹Ø¯:
  Ø³ÙˆØ¯Ù‡Ø§: ${v('pros10months') || '-'}
  Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§: ${v('cons10months') || '-'}

Û±Û° Ø³Ø§Ù„ Ø¨Ø¹Ø¯:
  Ø³ÙˆØ¯Ù‡Ø§: ${v('pros10years') || '-'}
  Ø²ÛŒØ§Ù†â€ŒÙ‡Ø§: ${v('cons10years') || '-'}

Ø¨Ù‡ØªØ±ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ: ${v('bestCase') || '-'}
Ø¨Ø¯ØªØ±ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ: ${v('worstCase') || '-'}
`;
      }

      if (maxSteps >= 3) {
        summary += `

Ø§Ù‚Ø¯Ø§Ù… (Û±Û° Ø±ÙˆØ²):

Ù‚Ø¯Ù… Ø¨Ø¹Ø¯ÛŒ: ${actionVal}
Ø§ÙˆÙ„ÛŒÙ† Ù‚Ø¯Ù…: ${v('firstStep') || '-'}
ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹: ${v('startDate') || '-'}
ØªØ¹Ù‡Ø¯ Ø¨Ù‡: ${v('accountability') || '-'}

ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ: ${v('finalDecision') || 'Ù‡Ù†ÙˆØ² Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}

Ø³Ø¤Ø§Ù„Ø§Øª Ù…Ù†: ${v('keyQuestions') || '-'}
`;
      }

      summary += `


Ø¯Ø³ØªÙˆØ±Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø±Ø§ÛŒ AI/Ù…Ø´Ø§ÙˆØ±:

Ù†Ù‚Ø´: Ù…Ø´Ø§ÙˆØ± Ø§Ù†ØªÙ‚Ø§Ø¯ÛŒ (Ù†Ù‡ ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡)

Ù„Ø·ÙØ§Ù‹ ØªØ­Ù„ÛŒÙ„ Ú©Ù†:
Û±. ÙØ±ÛŒÙ… Ù…Ø³Ø¦Ù„Ù‡ Ø¯Ø±Ø³ØªÙ‡ØŸ
Û². Ù†Ù‚Ø§Ø· Ú©ÙˆØ± Ú†ÛŒÙ‡ØŸ
Û³. Ú©Ø¬Ø§ Ø³ÙˆÚ¯ÛŒØ±ÛŒ Ø¯Ø§Ø±Ù…ØŸ
Û´. Ø±ÛŒØ³Ú©â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù‡Ø§Ù†
Ûµ. Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
Û¶. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¹Ù…Ù„ÛŒ Û³Û° Ø±ÙˆØ²Ù‡
Û·. Ø§Ú¯Ù‡ Ø¬Ø§ÛŒ Ù…Ù† Ø¨ÙˆØ¯ÛŒ Ú†ÛŒÚ©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯ÛŒØŸ
${v('keyQuestions') ? `\nÛ¸. Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø³Ø¤Ø§Ù„Ø§Øª Ù…Ù†` : ''}

ØµØ§Ø¯Ù‚ Ø¨Ø§Ø´. ØªØ£ÛŒÛŒØ¯ Ú©ÙˆØ±Ú©ÙˆØ±Ø§Ù†Ù‡ Ù†Ú©Ù†.
`;

      return summary;
    }

    updateProgress();

    // Theme
    const themeToggle = document.getElementById('themeToggle');
    const themeMenu = document.getElementById('themeMenu');
    const brightnessToggle = document.getElementById('brightnessToggle');
    const brightnessControl = document.getElementById('brightnessControl');
    const brightnessSlider = document.getElementById('brightnessSlider');

    const savedTheme = localStorage.getItem('theme') || 'dark';
    const savedBrightness = localStorage.getItem('brightness') || '100';

    function setTheme(theme) {
      document.body.classList.remove('light-mode', 'sepia-mode');
      if (theme === 'light') document.body.classList.add('light-mode');
      else if (theme === 'sepia') document.body.classList.add('sepia-mode');
      document.querySelectorAll('.theme-option').forEach(opt => {
        opt.classList.toggle('active', opt.dataset.theme === theme);
      });
      localStorage.setItem('theme', theme);
    }

    function setBrightness(value) {
      document.documentElement.style.setProperty('--brightness', value / 100);
      localStorage.setItem('brightness', value);
    }

    setTheme(savedTheme);
    setBrightness(savedBrightness);
    brightnessSlider.value = savedBrightness;

    themeToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      themeMenu.classList.toggle('show');
      brightnessControl.classList.remove('show');
    });

    document.querySelectorAll('.theme-option').forEach(opt => {
      opt.addEventListener('click', () => {
        setTheme(opt.dataset.theme);
        themeMenu.classList.remove('show');
      });
    });

    brightnessToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      brightnessControl.classList.toggle('show');
      themeMenu.classList.remove('show');
    });

    brightnessSlider.addEventListener('input', function() {
      setBrightness(this.value);
    });

    document.addEventListener('click', () => {
      themeMenu.classList.remove('show');
      brightnessControl.classList.remove('show');
    });
  </script>
</body>
</html>
